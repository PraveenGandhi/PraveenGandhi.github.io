!function(e){e.$fuse$=e,e.target="browser";var t={FB_AU_LOG:!1,devMode:!1};e.pkg("default",{},(function(e){})),e.pkg("@firebase/app",{},(function(e){return e.file("dist/index.cjs.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s=t("tslib"),a=t("@firebase/util"),u=t("@firebase/logger"),c=((o={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",o["bad-app-name"]="Illegal App name: '{$appName}",o["duplicate-app"]="Firebase App named '{$appName}' already exists",o["app-deleted"]="Firebase App named '{$appName}' already deleted",o["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",o),l=new a.ErrorFactory("app","Firebase",c),h="[DEFAULT]",p=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.services_={},this.tokenListeners_=[],this.analyticsEventRequests_=[],this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(e);var i=this;this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(e){r.tokenListeners_.push(e),setTimeout((function(){return e(null)}),0)},removeAuthTokenListener:function(e){r.tokenListeners_=r.tokenListeners_.filter((function(t){return t!==e}))},analytics:{logEvent:function(){i.analyticsEventRequests_.push(arguments)}}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){e.firebase_.INTERNAL.removeApp(e.name_);for(var t=[],n=0,r=Object.keys(e.services_);n<r.length;n++)for(var i=r[n],o=0,s=Object.keys(e.services_[i]);o<s.length;o++){var a=s[o];t.push(e.services_[i][a])}return Promise.all(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))})).then((function(){e.isDeleted_=!0,e.services_={}}))},e.prototype._getService=function(e,t){if(void 0===t&&(t=h),this.checkDestroyed_(),this.services_[e]||(this.services_[e]={}),!this.services_[e][t]){var n=t!==h?t:void 0,r=this.firebase_.INTERNAL.factories[e](this,this.extendApp.bind(this),n);this.services_[e][t]=r}return this.services_[e][t]},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=h),this.services_[e]&&this.services_[e][t]&&delete this.services_[e][t]},e.prototype.extendApp=function(e){if(a.deepExtend(this,e),e.INTERNAL){if(e.INTERNAL.addAuthTokenListener){for(var t=0,n=this.tokenListeners_;t<n.length;t++){var r=n[t];this.INTERNAL.addAuthTokenListener(r)}this.tokenListeners_=[]}if(e.INTERNAL.analytics){for(var i=0,o=this.analyticsEventRequests_;i<o.length;i++){var s=o[i];this.INTERNAL.analytics.logEvent.apply(void 0,s)}this.analyticsEventRequests_=[]}}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var d="7.0.0",f=new u.Logger("@firebase/app");
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(a.isBrowser()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){var t=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){var t={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={});if("object"!=typeof r||null===r){r={name:r}}var o=r;void 0===o.name&&(o.name=h);var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(t,s))throw l.create("duplicate-app",{appName:s});var c=new e(n,o,i);return t[s]=c,u(c,"create"),c},app:o,apps:null,SDK_VERSION:d,INTERNAL:{registerService:function(t,u,c,h,p){void 0===p&&(p=!1);if(n[t])return f.debug("There were multiple attempts to register service "+t+"."),i[t];n[t]=u,h&&(r[t]=h,s().forEach((function(e){h("create",e)})));function d(e){if(void 0===e&&(e=o()),"function"!=typeof e[t])throw l.create("invalid-app-argument",{appName:t});return e[t]()}void 0!==c&&a.deepExtend(d,c);return i[t]=d,e.prototype[t]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this._getService.bind(this,t);return r.apply(this,p?e:[])},d},removeApp:function(e){u(t[e],"delete"),delete t[e]},factories:n,useAsService:c}};function o(e){if(e=e||h,!a.contains(t,e))throw l.create("no-app",{appName:e});return t[e]}function s(){return Object.keys(t).map((function(e){return t[e]}))}function u(e,t){for(var i=0,o=Object.keys(n);i<o.length;i++){var s=c(e,o[i]);if(null===s)return;r[s]&&r[s](t,e)}}function c(e,t){return"serverAuth"===t?null:t}return(i.default=i,Object.defineProperty(i,"apps",{get:s}),o.App=e,i)}(p);return t.INTERNAL=s.__assign({},t.INTERNAL,{createFirebaseNamespace:e,extendNamespace:function(e){a.deepExtend(t,e)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),t}(),y=g.initializeApp;g.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.isNode()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,e)};var m=g;e.default=m,e.firebase=m})),e.entry="dist/index.cjs.js"})),e.pkg("@firebase/auth",{},(function(e){return e.file("dist/auth.js",(function(e,t,n,r,i){(function(){var e,n=t("@firebase/app").default,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},i="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function o(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function s(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:o(e)}}!function(e,t){if(t){var n=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];s in n||(n[s]={}),n=n[s]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var o=i.setTimeout;n.prototype.c=function(e){o(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.o(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.h(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.v(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.o=function(e){var t=this.f();e.Ja(t.resolve,t.reject)},t.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,s=new t((function(e,t){i=e,o=t}));return this.Ja(r(e,i),r(n,o)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Ja=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=s(e),o=i.next();!o.done;o=i.next())r(o.value).Ja(t,n)}))},t.all=function(e){var n=s(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){s[t]=n,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Ja(o(s.length-1),t),i=n.next()}while(!i.done)}))},t}));var a=a||{},u=this||self;function c(e){return"string"==typeof e}function l(e){return"boolean"==typeof e}var h=/^[\w+/_-]+[=]{0,2}$/,p=null;function d(){}function f(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function v(e){return null===e}function g(e){return"array"==f(e)}function y(e){var t=f(e);return"array"==t||"object"==t&&"number"==typeof e.length}function m(e){return"function"==f(e)}function b(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var w="closure_uid_"+(1e9*Math.random()>>>0),_=0;function C(e,t,n){return e.call.apply(e.bind,arguments)}function E(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function x(e,t,n){return(x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?C:E).apply(null,arguments)}function S(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var k=Date.now||function(){return+new Date};function T(e,t){function n(){}n.prototype=t.prototype,e.qb=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.fd=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function O(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function I(e){if(Error.captureStackTrace)Error.captureStackTrace(this,I);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function A(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");I.call(this,n+e[r])}function N(e,t){throw new A("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function R(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function P(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function M(){this.b=this.a=null}T(I,Error),I.prototype.name="CustomError",T(A,I),A.prototype.name="AssertionError",R.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var L=new R((function(){return new j}),(function(e){e.reset()}));function D(){var e=We,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function j(){this.next=this.b=this.a=null}function F(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(b(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;N("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}M.prototype.add=function(e,t){var n=L.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var V=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(c(e))return c(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},B=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=c(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var q=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=c(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},U=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=c(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function H(e,t){return 0<=V(e,t)}function W(e,t){var n;return(n=0<=(t=V(e,t)))&&Array.prototype.splice.call(e,t,1),n}function z(e,t){!function(e,t){for(var n=c(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function Q(e){return Array.prototype.concat.apply([],arguments)}function K(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function G(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function Y(e){for(var t in e)return!1;return!0}function $(e){var t,n={};for(t in e)n[t]=e[t];return n}var X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<X.length;o++)n=X[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Z(e,t){this.a=e===ne&&t||"",this.b=te}function ee(e){return e instanceof Z&&e.constructor===Z&&e.b===te?e.a:(N("expected object of type Const, got '"+e+"'"),"type_error:Const")}Z.prototype.qa=!0,Z.prototype.pa=function(){return this.a},Z.prototype.toString=function(){return"Const{"+this.a+"}"};var te={},ne={},re=new Z(ne,"");function ie(){this.a="",this.b=ce}function oe(e){return e instanceof ie&&e.constructor===ie&&e.b===ce?e.a:(N("expected object of type TrustedResourceUrl, got '"+e+"' of type "+f(e)),"type_error:TrustedResourceUrl")}function se(e,t){var n=ee(e);if(!ue.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return le(e=n.replace(ae,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof Z?ee(e):encodeURIComponent(String(e))})))}ie.prototype.qa=!0,ie.prototype.pa=function(){return this.a.toString()},ie.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var ae=/%{(\w+)}/g,ue=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,ce={};function le(e){var t=new ie;return t.a=e,t}var he=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},pe=/&/g,de=/</g,fe=/>/g,ve=/"/g,ge=/'/g,ye=/\x00/g,me=/[\x00&<>"']/;function be(e,t){return-1!=e.indexOf(t)}function we(e,t){return e<t?-1:e>t?1:0}function _e(){this.a="",this.b=ke}function Ce(e){return e instanceof _e&&e.constructor===_e&&e.b===ke?e.a:(N("expected object of type SafeUrl, got '"+e+"' of type "+f(e)),"type_error:SafeUrl")}_e.prototype.qa=!0,_e.prototype.pa=function(){return this.a.toString()},_e.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ee=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xe(e){return e instanceof _e?e:(e="object"==typeof e&&e.qa?e.pa():String(e),Ee.test(e)||(e="about:invalid#zClosurez"),Te(e))}var Se,ke={};function Te(e){var t=new _e;return t.a=e,t}Te("about:blank");e:{var Oe=u.navigator;if(Oe){var Ie=Oe.userAgent;if(Ie){Se=Ie;break e}}Se=""}function Ae(e){return be(Se,e)}function Ne(){this.a="",this.b=Pe}function Re(e){return e instanceof Ne&&e.constructor===Ne&&e.b===Pe?e.a:(N("expected object of type SafeHtml, got '"+e+"' of type "+f(e)),"type_error:SafeHtml")}Ne.prototype.qa=!0,Ne.prototype.pa=function(){return this.a.toString()},Ne.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Pe={};function Me(e){var t=new Ne;return t.a=e,t}Me("<!DOCTYPE html>");var Le,De,je=Me("");function Fe(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ve(e){return me.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(pe,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(de,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(fe,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ve,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ge,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(ye,"&#0;"))),e}function Be(e){u.setTimeout((function(){throw e}),0)}function qe(){var e=u.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ae("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",function(e){var t=le(ee(re));F(e,"HTMLIFrameElement"),e.src=oe(t).toString()}(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(Re(je)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=x((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0!==e&&!Ae("Trident")&&!Ae("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){u.setTimeout(e,0)}}function Ue(e,t){De||function(){if(u.Promise&&u.Promise.resolve){var e=u.Promise.resolve(void 0);De=function(){e.then(ze)}}else De=function(){var e=ze;!m(u.setImmediate)||u.Window&&u.Window.prototype&&!Ae("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(Le||(Le=qe()),Le(e)):u.setImmediate(e)}}(),He||(De(),He=!0),We.add(e,t)}Me("<br>");var He=!1,We=new M;function ze(){for(var e;e=D();){try{e.a.call(e.b)}catch(e){Be(e)}P(L,e)}He=!1}function Qe(e,t){if(this.a=Ke,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=d)try{var n=this;e.call(t,(function(e){ot(n,Ge,e)}),(function(e){if(!(e instanceof pt))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}ot(n,Ye,e)}))}catch(e){ot(this,Ye,e)}}var Ke=0,Ge=2,Ye=3;function $e(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}$e.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Xe=new R((function(){return new $e}),(function(e){e.reset()}));function Je(e,t,n){var r=Xe.get();return r.g=e,r.b=t,r.f=n,r}function Ze(e){if(e instanceof Qe)return e;var t=new Qe(d);return ot(t,Ge,e),t}function et(e){return new Qe((function(t,n){n(e)}))}function tt(e,t,n){st(e,t,n,null)||Ue(S(t,e))}function nt(e){return new Qe((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)tt(e[o],S(i,o,!0),S(i,o,!1));else t(r)}))}function rt(e,t){e.b||e.a!=Ge&&e.a!=Ye||at(e),e.f?e.f.next=t:e.b=t,e.f=t}function it(e,t,n,r){var i=Je(null,null,null);return i.a=new Qe((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(e){o(e)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof pt?o(t):e(i)}catch(e){o(e)}}:o})),i.a.c=e,rt(e,i),i.a}function ot(e,t,n){e.a==Ke&&(e===n&&(t=Ye,n=new TypeError("Promise cannot resolve to itself")),e.a=1,st(n,e.Oc,e.Pc,e)||(e.i=n,e.a=t,e.c=null,at(e),t!=Ye||n instanceof pt||function(e,t){e.g=!0,Ue((function(){e.g&&ht.call(null,t)}))}(e,n)))}function st(e,t,n,r){if(e instanceof Qe)return rt(e,Je(t||d,n||null,r)),!0;if(O(e))return e.then(t,n,r),!0;if(b(e))try{var i=e.then;if(m(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}var s=!1;try{t.call(e,(function(e){s||(s=!0,n.call(i,e))}),o)}catch(e){o(e)}}(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function at(e){e.h||(e.h=!0,Ue(e.Zb,e))}function ut(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function ct(e,t,n,r){if(n==Ye&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,lt(t,n,r);else try{t.c?t.g.call(t.f):lt(t,n,r)}catch(e){ht.call(null,e)}P(Xe,t)}function lt(e,t,n){t==Ge?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}Qe.prototype.then=function(e,t,n){return it(this,m(e)?e:null,m(t)?t:null,n)},Qe.prototype.$goog_Thenable=!0,(e=Qe.prototype).ka=function(e,t){return(e=Je(e,e,t)).c=!0,rt(this,e),this},e.s=function(e,t){return it(this,null,e,t)},e.cancel=function(e){this.a==Ke&&Ue((function(){!function e(t,n){if(t.a==Ke)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==t&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==Ke&&1==i?e(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ut(r),ct(r,o,Ye,n)))}t.c=null}else ot(t,Ye,n)}(this,new pt(e))}),this)},e.Oc=function(e){this.a=Ke,ot(this,Ge,e)},e.Pc=function(e){this.a=Ke,ot(this,Ye,e)},e.Zb=function(){for(var e;e=ut(this);)ct(this,e,this.a,this.i);this.h=!1};var ht=Be;function pt(e){I.call(this,e)}function dt(){0!=ft&&(vt[this[w]||(this[w]=++_)]=this),this.ta=this.ta,this.la=this.la}T(pt,I),pt.prototype.name="cancel";var ft=0,vt={};function gt(e){if(!e.ta&&(e.ta=!0,e.xa(),0!=ft)){var t=e[w]||(e[w]=++_);if(0!=ft&&e.la&&0<e.la.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete vt[t]}}function yt(e){return yt[" "](e),e}dt.prototype.ta=!1,dt.prototype.xa=function(){if(this.la)for(;this.la.length;)this.la.shift()()},yt[" "]=d;var mt,bt,wt=Ae("Opera"),_t=Ae("Trident")||Ae("MSIE"),Ct=Ae("Edge"),Et=Ct||_t,xt=Ae("Gecko")&&!(be(Se.toLowerCase(),"webkit")&&!Ae("Edge"))&&!(Ae("Trident")||Ae("MSIE"))&&!Ae("Edge"),St=be(Se.toLowerCase(),"webkit")&&!Ae("Edge");function kt(){var e=u.document;return e?e.documentMode:void 0}e:{var Tt="",Ot=(bt=Se,xt?/rv:([^\);]+)(\)|;)/.exec(bt):Ct?/Edge\/([\d\.]+)/.exec(bt):_t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(bt):St?/WebKit\/(\S+)/.exec(bt):wt?/(?:Version)[ \/]?(\S+)/.exec(bt):void 0);if(Ot&&(Tt=Ot?Ot[1]:""),_t){var It=kt();if(null!=It&&It>parseFloat(Tt)){mt=String(It);break e}}mt=Tt}var At,Nt={};function Rt(e){return function(e,t){var n=Nt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=he(String(mt)).split("."),r=he(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;t=we(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||we(0==s[2].length,0==a[2].length)||we(s[2],a[2]),s=s[3],a=a[3]}while(0==t)}return 0<=t}))}At=u.document&&_t?kt():void 0;var Pt=Object.freeze||function(e){return e},Mt=!_t||9<=Number(At),Lt=_t&&!Rt("9"),Dt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",d,t),u.removeEventListener("test",d,t)}catch(e){}return e}();function jt(e,t){this.type=e,this.b=this.target=t,this.Mb=!0}function Ft(e,t){if(jt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(xt){e:{try{yt(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=c(e.pointerType)?e.pointerType:Vt[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}jt.prototype.preventDefault=function(){this.Mb=!1},T(Ft,jt);var Vt=Pt({2:"touch",3:"pen",4:"mouse"});Ft.prototype.preventDefault=function(){Ft.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Lt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(e){}},Ft.prototype.f=function(){return this.a};var Bt="closure_listenable_"+(1e6*Math.random()|0),qt=0;function Ut(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Na=i,this.key=++qt,this.ra=this.Ia=!1}function Ht(e){e.ra=!0,e.listener=null,e.proxy=null,e.src=null,e.Na=null}function Wt(e){this.src=e,this.a={},this.b=0}function zt(e,t){var n=t.type;n in e.a&&W(e.a[n],t)&&(Ht(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Qt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ra&&o.listener==t&&o.capture==!!n&&o.Na==r)return i}return-1}Wt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var s=Qt(e,t,r,i);return-1<s?(t=e[s],n||(t.Ia=!1)):((t=new Ut(t,this.src,o,!!r,i)).Ia=n,e.push(t)),t};var Kt="closure_lm_"+(1e6*Math.random()|0),Gt={};function Yt(e,t,n,r,i){if(r&&r.once)Xt(e,t,n,r,i);else if(g(t))for(var o=0;o<t.length;o++)Yt(e,t[o],n,r,i);else n=an(n),e&&e[Bt]?cn(e,t,n,b(r)?!!r.capture:!!r,i):$t(e,t,n,!1,r,i)}function $t(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=b(i)?!!i.capture:!!i,a=on(e);if(a||(e[Kt]=a=new Wt(e)),!(n=a.add(t,n,r,s,o)).proxy){if(r=function(){var e=rn,t=Mt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Dt||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(en(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function Xt(e,t,n,r,i){if(g(t))for(var o=0;o<t.length;o++)Xt(e,t[o],n,r,i);else n=an(n),e&&e[Bt]?ln(e,t,n,b(r)?!!r.capture:!!r,i):$t(e,t,n,!0,r,i)}function Jt(e,t,n,r,i){if(g(t))for(var o=0;o<t.length;o++)Jt(e,t[o],n,r,i);else r=b(r)?!!r.capture:!!r,n=an(n),e&&e[Bt]?(e=e.u,(t=String(t).toString())in e.a&&(-1<(n=Qt(o=e.a[t],n,r,i))&&(Ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=on(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Qt(t,n,r,i)),(n=-1<e?t[e]:null)&&Zt(n))}function Zt(e){if("number"!=typeof e&&e&&!e.ra){var t=e.src;if(t&&t[Bt])zt(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(en(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=on(t))?(zt(n,e),0==n.b&&(n.src=null,t[Kt]=null)):Ht(e)}}}function en(e){return e in Gt?Gt[e]:Gt[e]="on"+e}function tn(e,t,n,r){var i=!0;if((e=on(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ra&&(o=nn(o,r),i=i&&!1!==o)}return i}function nn(e,t){var n=e.listener,r=e.Na||e.src;return e.Ia&&Zt(e),n.call(r,t)}function rn(e,t){if(e.ra)return!0;if(!Mt){if(!t)e:{t=["window","event"];for(var n=u,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Ft(r=t,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=tn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=tn(r[i],e,!1,t),n=n&&o}return n}return nn(e,new Ft(t,this))}function on(e){return(e=e[Kt])instanceof Wt?e:null}var sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function an(e){return m(e)?e:(e[sn]||(e[sn]=function(t){return e.handleEvent(t)}),e[sn])}function un(){dt.call(this),this.u=new Wt(this),this.Sb=this,this.Wa=null}function cn(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function ln(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function hn(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.ra&&s.capture==n){var a=s.listener,u=s.Na||s.src;s.Ia&&zt(e.u,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Mb}function pn(e,t,n){if(m(e))n&&(e=x(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=x(e.handleEvent,e)}return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function dn(e){var t=null;return new Qe((function(n,r){-1==(t=pn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).s((function(e){throw u.clearTimeout(t),e}))}function fn(e){if(e.U&&"function"==typeof e.U)return e.U();if(c(e))return e.split("");if(y(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function vn(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.U||"function"!=typeof e.U){if(y(e)||c(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function gn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof gn)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function yn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];mn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)mn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function mn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}T(un,dt),un.prototype[Bt]=!0,un.prototype.addEventListener=function(e,t,n,r){Yt(this,e,t,n,r)},un.prototype.removeEventListener=function(e,t,n,r){Jt(this,e,t,n,r)},un.prototype.dispatchEvent=function(e){var t,n=this.Wa;if(n)for(t=[];n;n=n.Wa)t.push(n);n=this.Sb;var r=e.type||e;if(c(e))e=new jt(e,n);else if(e instanceof jt)e.target=e.target||n;else{var i=e;J(e=new jt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var s=e.b=t[o];i=hn(s,r,!0,e)&&i}if(i=hn(s=e.b=n,r,!0,e)&&i,i=hn(s,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=hn(s=e.b=t[o],r,!1,e)&&i;return i},un.prototype.xa=function(){if(un.qb.xa.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)Ht(n[r]);delete t.a[e],t.b--}}this.Wa=null},(e=gn.prototype).U=function(){yn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.X=function(){return yn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return mn(this.b,e)?this.b[e]:t},e.set=function(e,t){mn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var bn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof wn?(this.h=void 0!==t?t:e.h,_n(this,e.f),this.i=e.i,this.b=e.b,Cn(this,e.l),this.c=e.c,En(this,Un(e.a)),this.g=e.g):e&&(n=String(e).match(bn))?(this.h=!!t,_n(this,n[1]||"",!0),this.i=On(n[2]||""),this.b=On(n[3]||"",!0),Cn(this,n[4]),this.c=On(n[5]||"",!0),En(this,n[6]||"",!0),this.g=On(n[7]||"")):(this.h=!!t,this.a=new Dn(null,this.h))}function _n(e,t,n){e.f=n?On(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Cn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.l=t}else e.l=null}function En(e,t,n){t instanceof Dn?(e.a=t,function(e,t){t&&!e.f&&(jn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Vn(this,t),qn(this,n,e))}),e)),e.f=t}(e.a,e.h)):(n||(t=In(t,Mn)),e.a=new Dn(t,e.h))}function xn(e,t,n){e.a.set(t,n)}function Sn(e,t){return e.a.get(t)}function kn(e){return e instanceof wn?new wn(e):new wn(e,void 0)}function Tn(e,t){var n=new wn(null,void 0);return _n(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function On(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function In(e,t,n){return c(e)?(e=encodeURI(e).replace(t,An),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function An(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}wn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(In(t,Nn,!0),":");var n=this.b;return(n||"file"==t)&&(e.push("//"),(t=this.i)&&e.push(In(t,Nn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(In(n,"/"==n.charAt(0)?Pn:Rn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",In(n,Ln)),e.join("")},wn.prototype.resolve=function(e){var t=new wn(this),n=!!e.f;n?_n(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)Cn(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(be(i,"./")||be(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?En(t,Un(e.a)):n=!!e.g,n&&(t.g=e.g),t};var Nn=/[#\/\?@]/g,Rn=/[#\?:]/g,Pn=/[#\?]/g,Mn=/[#\?@]/g,Ln=/#/g;function Dn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function jn(e){e.a||(e.a=new gn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Fn(e){var t=vn(e);if(void 0===t)throw Error("Keys are undefined");var n=new Dn(null,void 0);e=fn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];g(o)?qn(n,i,o):n.add(i,o)}return n}function Vn(e,t){jn(e),t=Hn(e,t),mn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,mn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&yn(e)))}function Bn(e,t){return jn(e),t=Hn(e,t),mn(e.a.b,t)}function qn(e,t,n){Vn(e,t),0<n.length&&(e.c=null,e.a.set(Hn(e,t),K(n)),e.b+=n.length)}function Un(e){var t=new Dn;return t.c=e.c,e.a&&(t.a=new gn(e.a),t.b=e.b),t}function Hn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(e=Dn.prototype).add=function(e,t){jn(this),this.c=null,e=Hn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(e,t){jn(this),this.a.forEach((function(n,r){B(n,(function(n){e.call(t,n,r,this)}),this)}),this)},e.X=function(){jn(this);for(var e=this.a.U(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.U=function(e){jn(this);var t=[];if(c(e))Bn(this,e)&&(t=Q(t,this.a.get(Hn(this,e))));else{e=this.a.U();for(var n=0;n<e.length;n++)t=Q(t,e[n])}return t},e.set=function(e,t){return jn(this),this.c=null,Bn(this,e=Hn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.U(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),e.push(s)}}return this.c=e.join("&")};var Wn=!_t||9<=Number(At);function zn(e){var t=document;return c(e)?t.getElementById(e):e}function Qn(e,t){G(t,(function(t,n){t&&"object"==typeof t&&t.qa&&(t=t.pa()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Kn.hasOwnProperty(n)?e.setAttribute(Kn[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var Kn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Gn(e,t,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!Wn&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ve(s.name),'"'),s.type){o.push(' type="',Ve(s.type),'"');var a={};J(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=i.createElement(o),s&&(c(s)?o.className=s:g(s)?o.className=s.join(" "):Qn(o,s)),2<r.length&&function(e,t,n){function r(n){n&&t.appendChild(c(n)?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!y(o)||b(o)&&0<o.nodeType?r(o):B(Yn(o)?K(o):o,r)}}(i,o,r),o}function Yn(e){if(e&&"number"==typeof e.length){if(b(e))return"function"==typeof e.item||"string"==typeof e.item;if(m(e))return"function"==typeof e.item}return!1}function $n(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(g(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),e(t,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),er(i,r),r.push(":"),e(t,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":er(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Xn,e,t),t.join("")}function Xn(){}var Jn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Zn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function er(e,t){t.push('"',e.replace(Zn,(function(e){var t=Jn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Jn[e]=t),t})),'"')}function tr(){var e=wr();return _t&&!!At&&11==At||/Edge\/\d+/.test(e)}function nr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function rr(e,t){t=t||u.window;var n="about:blank";e&&(n=Ce(xe(e)).toString()),t.location.href=n}function ir(e){return!!((e=(e||wr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function or(e){e=e||u.window;try{e.close()}catch(e){}}function sr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(s in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=wr().toLowerCase(),r&&(t.target=r,be(n,"crios/")&&(t.target="_blank")),yr(wr())==vr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof _e?n:xe(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+e[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(e[s]?1:0))}var s=i.join(",");if((Ae("iPhone")&&!Ae("iPod")&&!Ae("iPad")||Ae("iPad")||Ae("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(F(s=r.document.createElement("A"),"HTMLAnchorElement"),t instanceof _e||t instanceof _e||(t="object"==typeof t&&t.qa?t.pa():String(t),Ee.test(t)||(t="about:invalid#zClosurez"),t=Te(t)),s.href=Ce(t),s.setAttribute("target",n),e.noreferrer&&s.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(e),s={}):e.noreferrer?(s=r.open("",n,s),e=Ce(t).toString(),s&&(Et&&be(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),s.opener=null,e=Me('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ve(e)+'">'),s.document.write(Re(e)),s.document.close())):(s=r.open(Ce(t).toString(),n,s))&&e.noopener&&(s.opener=null),s)try{s.focus()}catch(e){}return s}var ar=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ur=/^[^@]+@[^@]+$/;function cr(){var e=null;return new Qe((function(t){"complete"==u.document.readyState?t():(e=function(){t()},Xt(window,"load",e))})).s((function(t){throw Jt(window,"load",e),t}))}function lr(e){return e=e||wr(),!("file:"!==Sr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function hr(){var e=u.window;try{return!(!e||e==e.top)}catch(e){return!1}}function pr(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function dr(){return n.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":n.INTERNAL.hasOwnProperty("node")?"Node":pr()?"Worker":"Browser"}function fr(){var e=dr();return"ReactNative"===e||"Node"===e}var vr="Firefox",gr="Chrome";function yr(e){var t=e.toLowerCase();return be(t,"opera/")||be(t,"opr/")||be(t,"opios/")?"Opera":be(t,"iemobile")?"IEMobile":be(t,"msie")||be(t,"trident/")?"IE":be(t,"edge/")?"Edge":be(t,"firefox/")?vr:be(t,"silk/")?"Silk":be(t,"blackberry")?"Blackberry":be(t,"webos")?"Webos":!be(t,"safari/")||be(t,"chrome/")||be(t,"crios/")||be(t,"android")?!be(t,"chrome/")&&!be(t,"crios/")||be(t,"edge/")?be(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":gr:"Safari"}var mr={Vc:"FirebaseCore-web",Xc:"FirebaseUI-web"};function br(e,t){t=t||[];var n,r=[],i={};for(n in mr)i[mr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=dr())?r=yr(i=wr()):"Worker"===r&&(r=yr(i=wr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function wr(){return u.navigator&&u.navigator.userAgent||""}function _r(e,t){e=e.split("."),t=t||u;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Cr(){try{var e=u.localStorage,t=Ar();if(e)return e.setItem(t,"1"),e.removeItem(t),!tr()||!!u.indexedDB}catch(e){return pr()&&!!u.indexedDB}return!1}function Er(){return(xr()||"chrome-extension:"===Sr()||lr())&&!fr()&&Cr()&&!pr()}function xr(){return"http:"===Sr()||"https:"===Sr()}function Sr(){return u.location&&u.location.protocol||null}function kr(e){return!ir(e=e||wr())&&yr(e)!=vr}function Tr(e){return void 0===e?null:$n(e)}function Or(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Ir(e){if(null!==e)return JSON.parse(e)}function Ar(e){return e||Math.floor(1e9*Math.random()).toString()}function Nr(e){return"Safari"!=yr(e=e||wr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Rr(){var e=u.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Pr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=wr(),t=dr(),this.b=ir(e)||"ReactNative"===t}function Mr(){var e=u.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Lr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function Dr(){return!(!_r("fireauth.oauthhelper",u)&&!_r("fireauth.iframe",u))}Pr.prototype.get=function(){var e=u.navigator;return!e||"boolean"!=typeof e.onLine||!xr()&&"chrome-extension:"!==Sr()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var jr,Fr={};function Vr(e){Fr[e]||(Fr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Br={};Object.defineProperty(Br,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Br,"abcd",{configurable:!0,enumerable:!0,value:2}),jr=2==Br.abcd}catch(bt){jr=!1}function qr(e,t,n){jr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Ur(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&qr(e,n,t[n])}function Hr(e){var t={};return Ur(t,e),t}function Wr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)qr(t,n,Wr(e[n]));return t}function zr(e){var t={},n=e[Kr],r=e[Gr];if(!(e=e[Yr])||e!=Qr&&!n)throw Error("Invalid provider user info!");t[Xr]=r||null,t[$r]=n||null,qr(this,Zr,e),qr(this,Jr,Wr(t))}var Qr="EMAIL_SIGNIN",Kr="email",Gr="newEmail",Yr="requestType",$r="email",Xr="fromEmail",Jr="data",Zr="operation";function ei(e,t){this.code=ni+e,this.message=t||ri[e]||""}function ti(e){var t=e&&e.code;return t?new ei(t.substring(ni.length),e.message):null}T(ei,Error),ei.prototype.A=function(){return{code:this.code,message:this.message}},ei.prototype.toJSON=function(){return this.A()};var ni="auth/",ri={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ii(e){var t=Sn(e=kn(e),oi)||null,n=Sn(e,si)||null,r=Sn(e,ci)||null;if(r=r&&hi[r]||null,!t||!n||!r)throw new ei("argument-error",oi+", "+si+"and "+ci+" are required in a valid action code URL.");Ur(this,{apiKey:t,operation:r,code:n,continueUrl:Sn(e,ai)||null,languageCode:Sn(e,ui)||null,tenantId:Sn(e,li)||null})}var oi="apiKey",si="oobCode",ai="continueUrl",ui="languageCode",ci="mode",li="tenantId",hi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Qr,verifyEmail:"VERIFY_EMAIL"};function pi(e){try{return new ii(e)}catch(e){return null}}function di(e){var t=e[mi];if(void 0===t)throw new ei("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new ei("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[fi];if(n&&"object"==typeof n){t=n[_i];var r=n[bi];if(n=n[wi],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new ei("argument-error",bi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new ei("argument-error",wi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new ei("argument-error",_i+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new ei("missing-android-pkg-name")}}else if(void 0!==n)throw new ei("argument-error",fi+" property must be a non null object when specified.");if(this.f=null,(t=e[yi])&&"object"==typeof t){if("string"==typeof(t=t[Ci])&&t.length)this.f=t;else if(void 0!==t)throw new ei("argument-error",Ci+" property must be a non empty string when specified.")}else if(void 0!==t)throw new ei("argument-error",yi+" property must be a non null object when specified.");if(void 0!==(t=e[gi])&&"boolean"!=typeof t)throw new ei("argument-error",gi+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[vi])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new ei("argument-error",vi+" property must be a non empty string when specified.");this.i=e||null}var fi="android",vi="dynamicLinkDomain",gi="handleCodeInApp",yi="iOS",mi="url",bi="installApp",wi="minimumVersion",_i="packageName",Ci="bundleId";function Ei(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var xi=null,Si=null;function ki(e){var t="";return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Si[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!xi){xi={},Si={};for(var e=0;65>e;e++)xi[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),Si[xi[e]]=e,62<=e&&(Si["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;t(i<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(e,(function(e){t+=String.fromCharCode(e)})),t}function Ti(e){this.f=e.sub,k(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.c=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Oi(e){return(e=Ii(e))&&e.sub&&e.iss&&e.aud&&e.exp?new Ti(e):null}function Ii(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(ki(e))}catch(e){}return null}Ti.prototype.R=function(){return this.c},Ti.prototype.g=function(){return this.b};var Ai,Ni={ad:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},cd:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},dd:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ri(e){for(var t in Ni)if(Ni[t].id===e)return{firebaseEndpoint:(e=Ni[t]).bb,secureTokenEndpoint:e.ib};return null}Ai=Ri("__EID__")?"__EID__":void 0;var Pi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Mi=["client_id","response_type","scope","redirect_uri","state"],Li={Wc:{Oa:"locale",Da:500,Ca:600,Pa:"facebook.com",hb:Mi},Yc:{Oa:null,Da:500,Ca:620,Pa:"github.com",hb:Mi},Zc:{Oa:"hl",Da:515,Ca:680,Pa:"google.com",hb:Mi},ed:{Oa:"lang",Da:485,Ca:705,Pa:"twitter.com",hb:Pi}};function Di(e){for(var t in Li)if(Li[t].Pa==e)return Li[t];return null}function ji(e){var t={};t["facebook.com"]=Ui,t["google.com"]=Wi,t["github.com"]=Hi,t["twitter.com"]=zi;var n=e&&e[Vi];try{if(n)return t[n]?new t[n](e):new qi(e);if(void 0!==e[Fi])return new Bi(e)}catch(e){}return null}var Fi="idToken",Vi="providerId";function Bi(e){var t=e[Vi];if(!t&&e[Fi]){var n=Oi(e[Fi]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),qr(this,"providerId",t),qr(this,"isNewUser",n)}function qi(e){Bi.call(this,e),qr(this,"profile",Wr((e=Ir(e.rawUserInfo||"{}"))||{}))}function Ui(e){if(qi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Hi(e){if(qi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");qr(this,"username",this.profile&&this.profile.login||null)}function Wi(e){if(qi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(e){if(qi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");qr(this,"username",e.screenName||null)}function Qi(e){var t=kn(e),n=Sn(t,"link"),r=Sn(kn(n),"link");return t=Sn(t,"deep_link_id"),Sn(kn(t),"link")||t||r||n||e}function Ki(){}function Gi(e,t){return e.then((function(e){if(e[Ds]){var n=Oi(e[Ds]);if(!n||t!=n.f)throw new ei("user-mismatch");return e}throw new ei("user-mismatch")})).s((function(e){throw e&&e.code&&e.code==ni+"user-not-found"?new ei("user-mismatch"):e}))}function Yi(e,t){if(!t)throw new ei("internal-error","failed to construct a credential");this.a=t,qr(this,"providerId",e),qr(this,"signInMethod",e)}function $i(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Xi(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Yi(e.providerId,e.pendingToken)}catch(e){}return null}function Ji(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&qr(this,"idToken",t.idToken),t.accessToken&&qr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&qr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new ei("internal-error","failed to construct a credential");qr(this,"accessToken",t.oauthToken),qr(this,"secret",t.oauthTokenSecret)}qr(this,"providerId",e),qr(this,"signInMethod",n)}function Zi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Fn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function eo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Ji(e.providerId,t,e.signInMethod)}catch(e){}}return null}function to(e,t){this.Fc=t||[],Ur(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.cb=(Di(e)||{}).Oa||null,this.ab=null}function no(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new ei("argument-error",'SAML provider IDs must be prefixed with "saml."');to.call(this,e,[])}function ro(e){to.call(this,e,Mi),this.a=[]}function io(){ro.call(this,"facebook.com")}function oo(e){if(!e)throw new ei("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return b(e)&&(t=e.accessToken),(new io).credential({accessToken:t})}function so(){ro.call(this,"github.com")}function ao(e){if(!e)throw new ei("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return b(e)&&(t=e.accessToken),(new so).credential({accessToken:t})}function uo(){ro.call(this,"google.com"),this.wa("profile")}function co(e,t){var n=e;return b(e)&&(n=e.idToken,t=e.accessToken),(new uo).credential({idToken:n,accessToken:t})}function lo(){to.call(this,"twitter.com",Pi)}function ho(e,t){var n=e;if(b(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new ei("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ji("twitter.com",n,"twitter.com")}function po(e,t,n){this.a=e,this.c=t,qr(this,"providerId","password"),qr(this,"signInMethod",n===vo.EMAIL_LINK_SIGN_IN_METHOD?vo.EMAIL_LINK_SIGN_IN_METHOD:vo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function fo(e){return e&&e.email&&e.password?new po(e.email,e.password,e.signInMethod):null}function vo(){Ur(this,{providerId:"password",isOAuthProvider:!1})}function go(e,t){if(!(t=yo(t)))throw new ei("argument-error","Invalid email link!");return new po(e,t.code,vo.EMAIL_LINK_SIGN_IN_METHOD)}function yo(e){return(e=pi(e=Qi(e)))&&e.operation===Qr?e:null}function mo(e){if(!(e.Ua&&e.Ta||e.Fa&&e.ba))throw new ei("internal-error");this.a=e,qr(this,"providerId","phone"),qr(this,"signInMethod","phone")}function bo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return B(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new mo(t)}return null}function wo(e){return e.a.Fa&&e.a.ba?{temporaryProof:e.a.Fa,phoneNumber:e.a.ba}:{sessionInfo:e.a.Ua,code:e.a.Ta}}function _o(e){try{this.a=e||n.auth()}catch(e){throw new ei("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ur(this,{providerId:"phone",isOAuthProvider:!1})}function Co(e,t){if(!e)throw new ei("missing-verification-id");if(!t)throw new ei("missing-verification-code");return new mo({Ua:e,Ta:t})}function Eo(e){if(e.temporaryProof&&e.phoneNumber)return new mo({Fa:e.temporaryProof,ba:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,s=e&&e.pendingToken;try{switch(t){case"google.com":return co(o,n);case"facebook.com":return oo(n);case"github.com":return ao(n);case"twitter.com":return ho(n,r);default:return n||r||o||s?s?0==t.indexOf("saml.")?new Yi(t,s):new Ji(t,{pendingToken:s,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new ro(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function xo(e){if(!e.isOAuthProvider)throw new ei("invalid-oauth-provider")}function So(e,t,n,r,i,o,s){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new ei("invalid-auth-event");if(this.g&&this.a)throw new ei("invalid-auth-event");if(this.g&&!this.f)throw new ei("invalid-auth-event")}function ko(e){return(e=e||{}).type?new So(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&ti(e.error),e.postBody,e.tenantId):null}function To(){this.b=null,this.a=[]}T(qi,Bi),T(Ui,qi),T(Hi,qi),T(Wi,qi),T(zi,qi),Yi.prototype.na=function(e){return ea(e,$i(this))},Yi.prototype.b=function(e,t){var n=$i(this);return n.idToken=t,ta(e,n)},Yi.prototype.f=function(e,t){return Gi(na(e,$i(this)),t)},Yi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ji.prototype.na=function(e){return ea(e,Zi(this))},Ji.prototype.b=function(e,t){var n=Zi(this);return n.idToken=t,ta(e,n)},Ji.prototype.f=function(e,t){return Gi(na(e,Zi(this)),t)},Ji.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},to.prototype.Ea=function(e){return this.zb=$(e),this},T(no,to),T(ro,to),ro.prototype.wa=function(e){return H(this.a,e)||this.a.push(e),this},ro.prototype.Hb=function(){return K(this.a)},ro.prototype.credential=function(e,t){var n;if(!(n=b(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new ei("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ji(this.providerId,n,this.providerId)},T(io,ro),qr(io,"PROVIDER_ID","facebook.com"),qr(io,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(so,ro),qr(so,"PROVIDER_ID","github.com"),qr(so,"GITHUB_SIGN_IN_METHOD","github.com"),T(uo,ro),qr(uo,"PROVIDER_ID","google.com"),qr(uo,"GOOGLE_SIGN_IN_METHOD","google.com"),T(lo,to),qr(lo,"PROVIDER_ID","twitter.com"),qr(lo,"TWITTER_SIGN_IN_METHOD","twitter.com"),po.prototype.na=function(e){return this.signInMethod==vo.EMAIL_LINK_SIGN_IN_METHOD?Na(e,la,{email:this.a,oobCode:this.c}):Na(e,Ta,{email:this.a,password:this.c})},po.prototype.b=function(e,t){return this.signInMethod==vo.EMAIL_LINK_SIGN_IN_METHOD?Na(e,ha,{idToken:t,email:this.a,oobCode:this.c}):Na(e,_a,{idToken:t,email:this.a,password:this.c})},po.prototype.f=function(e,t){return Gi(this.na(e),t)},po.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Ur(vo,{PROVIDER_ID:"password"}),Ur(vo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ur(vo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),mo.prototype.na=function(e){return e.Va(wo(this))},mo.prototype.b=function(e,t){var n=wo(this);return n.idToken=t,Na(e,Ia,n)},mo.prototype.f=function(e,t){var n=wo(this);return n.operation="REAUTH",Gi(e=Na(e,Aa,n),t)},mo.prototype.A=function(){var e={providerId:"phone"};return this.a.Ua&&(e.verificationId=this.a.Ua),this.a.Ta&&(e.verificationCode=this.a.Ta),this.a.Fa&&(e.temporaryProof=this.a.Fa),this.a.ba&&(e.phoneNumber=this.a.ba),e},_o.prototype.Va=function(e,t){var n=this.a.b;return Ze(t.verify()).then((function(r){if(!c(r))throw new ei("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":return function(e,t){return Na(e,ba,t)}(n,{phoneNumber:e,recaptchaToken:r}).then((function(e){return"function"==typeof t.reset&&t.reset(),e}),(function(e){throw"function"==typeof t.reset&&t.reset(),e}));default:throw new ei("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Ur(_o,{PROVIDER_ID:"phone"}),Ur(_o,{PHONE_SIGN_IN_METHOD:"phone"}),So.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},So.prototype.R=function(){return this.h},So.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var Oo,Io=null;function Ao(e){var t="unauthorized-domain",n=void 0,r=kn(e);e=r.b,"chrome-extension"==(r=r.f)?n=Fe("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Fe("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",ei.call(this,t,n)}function No(e,t,n){ei.call(this,e,n),(e=t||{}).Ab&&qr(this,"email",e.Ab),e.ba&&qr(this,"phoneNumber",e.ba),e.credential&&qr(this,"credential",e.credential),e.Qb&&qr(this,"tenantId",e.Qb)}function Ro(e){if(e.code){var t=e.code||"";0==t.indexOf(ni)&&(t=t.substring(ni.length));var n={credential:Eo(e),Qb:e.tenantId};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.ba=e.phoneNumber;else if(!n.credential)return new ei(t,e.message||void 0);return new No(t,n,e.message)}return null}function Po(){}function Mo(e){return e.c||(e.c=e.b())}function Lo(){}function Do(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function jo(){}function Fo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=x(this.fc,this),this.a.onerror=x(this.Ib,this),this.a.onprogress=x(this.gc,this),this.a.ontimeout=x(this.kc,this)}function Vo(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Bo(e,t,n){this.reset(e,t,n,void 0,void 0)}T(Ao,ei),T(No,ei),No.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.A();return t&&J(e,t),e},No.prototype.toJSON=function(){return this.A()},Po.prototype.c=null,T(Lo,Po),Lo.prototype.a=function(){var e=Do(this);return e?new ActiveXObject(e):new XMLHttpRequest},Lo.prototype.b=function(){var e={};return Do(this)&&(e[0]=!0,e[1]=!0),e},Oo=new Lo,T(jo,Po),jo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Fo;throw Error("Unsupported browser")},jo.prototype.b=function(){return{}},(e=Fo.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Vo(this,4)},e.Ib=function(){this.status=500,this.response=this.responseText="",Vo(this,4)},e.kc=function(){this.Ib()},e.gc=function(){this.status=200,Vo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Bo.prototype.a=null;function qo(e){this.f=e,this.b=this.c=this.a=null}function Uo(e,t){this.name=e,this.value=t}Bo.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||k(),delete this.a},Uo.prototype.toString=function(){return this.name};var Ho=new Uo("SEVERE",1e3),Wo=new Uo("WARNING",900),zo=new Uo("CONFIG",700),Qo=new Uo("FINE",500);qo.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(N("Root logger has no level set."),null)}(this).value)for(m(t)&&(t=t()),e=new Bo(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var Ko={},Go=null;function Yo(e){var t;if(Go||(Go=new qo(""),Ko[""]=Go,Go.c=zo),!(t=Ko[e])){t=new qo(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=Yo(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,Ko[e]=t}return t}function $o(e,t){e&&e.log(Qo,t,void 0)}function Xo(e){this.f=e}function Jo(e){un.call(this),this.o=e,this.readyState=Zo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Yo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}T(Xo,Po),Xo.prototype.a=function(){return new Jo(this.f)},Xo.prototype.b=function(e){return function(){return e}}({}),T(Jo,un);var Zo=0;function es(e){e.c.read().then(e.ec.bind(e)).catch(e.Ma.bind(e))}function ts(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,ns(e)}function ns(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function rs(e){un.call(this),this.headers=new gn,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=is,this.v=this.P=!1}(e=Jo.prototype).open=function(e,t){if(this.readyState!=Zo)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,ns(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.o.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.Ma.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ts(this,!1)),this.readyState=Zo},e.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,ns(this)),this.a&&(this.readyState=3,ns(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.Ma.bind(this)):void 0!==u.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,es(this)):e.text().then(this.ic.bind(this),this.Ma.bind(this)))))},e.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?ts(this,!0):ns(this),3==this.readyState&&es(this)}},e.ic=function(e){this.a&&(this.response=this.responseText=e,ts(this,!0))},e.hc=function(e){this.a&&(this.response=e,ts(this,!0))},e.Ma=function(e){var t=this.h;t&&t.log(Wo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&ts(this,!0)},e.setRequestHeader=function(e,t){this.i.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Wo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Wo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},T(rs,un);var is="";rs.prototype.b=Yo("goog.net.XhrIo");var os=/^https?$/i,ss=["POST","PUT"];function as(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.O=n,e.I=!1,e.c=!0,e.a=e.B?e.B.a():Oo.a(),e.w=e.B?Mo(e.B):Mo(Oo),e.a.onreadystatechange=x(e.Lb,e);try{$o(e.b,gs(e,"Opening Xhr")),e.J=!0,e.a.open(n,String(t),!0),e.J=!1}catch(t){return $o(e.b,gs(e,"Error opening Xhr: "+t.message)),void cs(e,t)}t=r||"";var o=new gn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(y(e)||c(e))B(e,t,void 0);else for(var n=vn(e),r=fn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=us,n=e.length,r=c(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:c(e)?e.charAt(t):e[t]}(o.X()),r=u.FormData&&t instanceof u.FormData,!H(ss,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.P&&(e.a.withCredentials=e.P);try{ds(e),0<e.g&&(e.v=function(e){return _t&&Rt(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(e.a),$o(e.b,gs(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.v)),e.v?(e.a.timeout=e.g,e.a.ontimeout=x(e.Ga,e)):e.o=pn(e.Ga,e.g,e)),$o(e.b,gs(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){$o(e.b,gs(e,"Send error: "+t.message)),cs(e,t)}}function us(e){return"content-type"==e.toLowerCase()}function cs(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ls(e),ps(e)}function ls(e){e.I||(e.I=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function hs(e){if(e.c&&void 0!==a)if(e.w[1]&&4==fs(e)&&2==vs(e))$o(e.b,gs(e,"Local request error detected and ignored"));else if(e.i&&4==fs(e))pn(e.Lb,0,e);else if(e.dispatchEvent("readystatechange"),4==fs(e)){$o(e.b,gs(e,"Request complete")),e.c=!1;try{var t,n=vs(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(bn)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!os.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<fs(e)?e.a.statusText:""}catch(t){$o(e.b,"Can not get status: "+t.message),c=""}e.h=c+" ["+vs(e)+"]",ls(e)}}finally{ps(e)}}}function ps(e,t){if(e.a){ds(e);var n=e.a,r=e.w[0]?d:null;e.a=null,e.w=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Ho,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function ds(e){e.a&&e.v&&(e.a.ontimeout=null),e.o&&(u.clearTimeout(e.o),e.o=null)}function fs(e){return e.a?e.a.readyState:0}function vs(e){try{return 2<fs(e)?e.a.status:-1}catch(e){return-1}}function gs(e,t){return t+" ["+e.O+" "+e.l+" "+vs(e)+"]"}function ys(e){var t=Os;this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function ms(e,t,n){e.a=!0,e.c=n,e.f=!t,Cs(e)}function bs(e){if(e.a){if(!e.u)throw new Es(e);e.u=!1}}function ws(e,t,n,r){e.g.push([t,n,r]),e.a&&Cs(e)}function _s(e){return U(e.g,(function(e){return m(e[1])}))}function Cs(e){if(e.h&&e.a&&_s(e)){var t=e.h,n=ks[t];n&&(u.clearTimeout(n.a),delete ks[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var a=o.call(i||e.o,t);void 0!==a&&(e.f=e.f&&(a==t||a instanceof Error),e.c=t=a),(O(t)||"function"==typeof u.Promise&&t instanceof u.Promise)&&(r=!0,e.i=!0)}catch(r){t=r,e.f=!0,_s(e)||(n=!0)}}e.c=t,r&&(a=x(e.m,e,!0),r=x(e.m,e,!1),t instanceof ys?(ws(t,a,r),t.w=!0):t.then(a,r)),n&&(t=new Ss(t),ks[t.a]=t,e.h=t.a)}function Es(){I.call(this)}function xs(){I.call(this)}function Ss(e){this.a=u.setTimeout(x(this.c,this),0),this.b=e}(e=rs.prototype).Ga=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",$o(this.b,gs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&($o(this.b,gs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ps(this))},e.xa=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ps(this,!0)),rs.qb.xa.call(this)},e.Lb=function(){this.ta||(this.J||this.i||this.f?hs(this):this.yc())},e.yc=function(){hs(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case is:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Ho,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return $o(this.b,"Can not get response: "+e.message),null}},ys.prototype.cancel=function(e){if(this.a)this.c instanceof ys&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new xs(this),bs(this),ms(this,!1,e))}},ys.prototype.m=function(e,t){this.i=!1,ms(this,e,t)},ys.prototype.then=function(e,t,n){var r,i,o=new Qe((function(e,t){r=e,i=t}));return ws(this,r,(function(e){e instanceof xs?o.cancel():i(e)})),o.then(e,t,n)},ys.prototype.$goog_Thenable=!0,T(Es,I),Es.prototype.message="Deferred has already fired",Es.prototype.name="AlreadyCalledError",T(xs,I),xs.prototype.message="Deferred was canceled",xs.prototype.name="CanceledError",Ss.prototype.c=function(){throw delete ks[this.a],this.b};var ks={};function Ts(e){var t={},n=t.document||document,r=oe(e).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ga:void 0},s=new ys(o),a=null,c=null!=t.timeout?t.timeout:5e3;return 0<c&&(a=window.setTimeout((function(){Is(i,!0);var e=new Rs(Ns,"Timeout reached for loading script "+r);bs(s),ms(s,!1,e)}),c),o.Ga=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Is(i,t.gd||!1,a),bs(s),ms(s,!0,null))},i.onerror=function(){Is(i,!0,a);var e=new Rs(As,"Error while loading script "+r);bs(s),ms(s,!1,e)},J(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Qn(i,o),function(e,t){F(e,"HTMLScriptElement"),e.src=oe(t),null===p&&(p=(t=(t=u.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&h.test(t)?t:""),(t=p)&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),s}function Os(){if(this&&this.Nb){var e=this.Nb;e&&"SCRIPT"==e.tagName&&Is(e,!0,this.Ga)}}function Is(e,t,n){null!=n&&u.clearTimeout(n),e.onload=d,e.onerror=d,e.onreadystatechange=d,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var As=0,Ns=1;function Rs(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),I.call(this,n),this.code=e}function Ps(e){this.f=e}function Ms(e,t,r){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||js,this.g=$(e.secureTokenHeaders||Fs),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||Vs,this.a=$(e.firebaseHeaders||Bs),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==dr(),!(r=u.XMLHttpRequest||r&&n.INTERNAL.node&&n.INTERNAL.node.XMLHttpRequest)&&!pr())throw new ei("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,pr()?this.f=new Xo(self):fr()?this.f=new Ps(r):this.f=new jo,this.b=null}T(Rs,I),T(Ps,Po),Ps.prototype.a=function(){return new this.f},Ps.prototype.b=function(){return{}};var Ls,Ds="idToken",js=new Pr(3e4,6e4),Fs={"Content-Type":"application/x-www-form-urlencoded"},Vs=new Pr(3e4,6e4),Bs={"Content-Type":"application/json"};function qs(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Us(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Hs(e,t,n,r,i,o,s){(function(){var e=wr();return!((e=yr(e)!=gr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!_t||!At||9<At)})()||pr()?e=x(e.o,e):(Ls||(Ls=new Qe((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{u[zs]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){ws(e,null,t,void 0)}(Ts(se(Ws,{onload:zs})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=x(e.m,e)),e(t,n,r,i,o,s)}Ms.prototype.R=function(){return this.b},Ms.prototype.o=function(e,t,n,r,i,o){if(pr()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new ei("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new rs(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}cn(s,"complete",(function(){a&&clearTimeout(a);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return $o(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}t&&t(e)})),ln(s,"ready",(function(){a&&clearTimeout(a),gt(this)})),ln(s,"timeout",(function(){a&&clearTimeout(a),gt(this),t&&t(null)})),as(s,e,n,r,i)};var Ws=new Z(ne,"https://apis.google.com/js/client.js?onload=%{onload}"),zs="__fcb"+Math.floor(1e6*Math.random()).toString();function Qs(e){if(!c(e=e.email)||!ur.test(e))throw new ei("invalid-email")}function Ks(e){"email"in e&&Qs(e)}function Gs(e){if(!e[Ds])throw new ei("internal-error")}function Ys(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new ei("internal-error")}else{if(!e.sessionInfo)throw new ei("missing-verification-id");if(!e.code)throw new ei("missing-verification-code")}}Ms.prototype.m=function(e,t,n,r,i){var o=this;Ls.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(s),t&&t(e)}})})).s((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Ms.prototype.ob=function(){return Na(this,Ca,{})},Ms.prototype.rb=function(e,t){return Na(this,wa,{idToken:e,email:t})},Ms.prototype.sb=function(e,t){return Na(this,_a,{idToken:e,password:t})};var $s={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Xs(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new ei("internal-error")}function Js(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(Bn(e=new Dn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function Zs(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Ro(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Ro(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Ro(e)):e.errorMessage&&(t=Ra(e.errorMessage)),t)throw t;if(!e[Ds])throw new ei("internal-error")}function ea(e,t){return t.returnIdpCredential=!0,Na(e,Ea,t)}function ta(e,t){return t.returnIdpCredential=!0,Na(e,Sa,t)}function na(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Na(e,xa,t)}function ra(e){if(!e.oobCode)throw new ei("invalid-action-code")}(e=Ms.prototype).tb=function(e,t){var n={idToken:e},r=[];return G($s,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Na(this,wa,n)},e.kb=function(e,t){return J(e={requestType:"PASSWORD_RESET",email:e},t),Na(this,va,e)},e.lb=function(e,t){return J(e={requestType:"EMAIL_SIGNIN",email:e},t),Na(this,da,e)},e.jb=function(e,t){return J(e={requestType:"VERIFY_EMAIL",idToken:e},t),Na(this,fa,e)},e.Va=function(e){return Na(this,Oa,e)},e.$a=function(e,t){return Na(this,ma,{oobCode:e,newPassword:t})},e.Ka=function(e){return Na(this,oa,{oobCode:e})},e.Xa=function(e){return Na(this,ia,{oobCode:e})};var ia={endpoint:"setAccountInfo",D:ra,fa:"email",F:!0},oa={endpoint:"resetPassword",D:ra,K:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new ei("internal-error")},F:!0},sa={endpoint:"signupNewUser",D:function(e){if(Qs(e),!e.password)throw new ei("weak-password")},K:Gs,T:!0,F:!0},aa={endpoint:"createAuthUri",F:!0},ua={endpoint:"deleteAccount",V:["idToken"]},ca={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(e){if(!g(e.deleteProvider))throw new ei("internal-error")}},la={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Qs,K:Gs,T:!0,F:!0},ha={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Qs,K:Gs,T:!0},pa={endpoint:"getAccountInfo"},da={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new ei("internal-error");Qs(e)},fa:"email",F:!0},fa={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new ei("internal-error")},fa:"email",F:!0},va={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new ei("internal-error");Qs(e)},fa:"email",F:!0},ga={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},ya={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(e){if(!e.recaptchaSiteKey)throw new ei("internal-error")}},ma={endpoint:"resetPassword",D:ra,fa:"email",F:!0},ba={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},wa={endpoint:"setAccountInfo",V:["idToken"],D:Ks,T:!0},_a={endpoint:"setAccountInfo",V:["idToken"],D:function(e){if(Ks(e),!e.password)throw new ei("weak-password")},K:Gs,T:!0},Ca={endpoint:"signupNewUser",K:Gs,T:!0,F:!0},Ea={endpoint:"verifyAssertion",D:Xs,Qa:Js,K:Zs,T:!0,F:!0},xa={endpoint:"verifyAssertion",D:Xs,Qa:Js,K:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new ei("user-not-found");if(e.errorMessage)throw Ra(e.errorMessage);if(!e[Ds])throw new ei("internal-error")},T:!0,F:!0},Sa={endpoint:"verifyAssertion",D:function(e){if(Xs(e),!e.idToken)throw new ei("internal-error")},Qa:Js,K:Zs,T:!0},ka={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new ei("invalid-custom-token")},K:Gs,T:!0,F:!0},Ta={endpoint:"verifyPassword",D:function(e){if(Qs(e),!e.password)throw new ei("wrong-password")},K:Gs,T:!0,F:!0},Oa={endpoint:"verifyPhoneNumber",D:Ys,K:Gs,F:!0},Ia={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new ei("internal-error");Ys(e)},K:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Ro(e);Gs(e)}},Aa={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ys,K:Gs,F:!0};function Na(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.V))return et(new ei("internal-error"));var r,i=t.Kb||"POST";return Ze(n).then(t.D).then((function(){return t.T&&(n.returnSecureToken=!0),t.F&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,n,r,i,o){var s=kn(e.h+t);xn(s,"key",e.c),o&&xn(s,"cb",k().toString());var a="GET"==n;if(a)for(var u in r)r.hasOwnProperty(u)&&xn(s,u,r[u]);return new Qe((function(t,o){Hs(e,s.toString(),(function(e){e?e.error?o(Pa(e,i||{})):t(e):o(new ei("network-request-failed"))}),n,a?void 0:$n(Or(r)),e.a,e.i.get())}))}(e,t.endpoint,i,n,t.Yb,t.wb||!1)})).then((function(e){return r=e,t.Qa?t.Qa(n,r):r})).then(t.K).then((function(){if(!t.fa)return r;if(!(t.fa in r))throw new ei("internal-error");return r[t.fa]}))}function Ra(e){return Pa({error:{errors:[{message:e}],code:400,message:e}})}function Pa(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new ei(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",J(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new ei(r[i],t);return!t&&e&&(t=Tr(e)),new ei("internal-error",t)}function Ma(e){this.b=e,this.a=null,this.fb=function(e){return(Fa||(Fa=new Qe((function(e,t){function n(){Rr(),_r("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Rr(),t(Error("Network Error"))},timeout:Da.get()})}if(_r("gapi.iframes.Iframe"))e();else if(_r("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){_r("gapi.load")?n():t(Error("Network Error"))},Ze(Ts(r=se(La,{onload:r}))).s((function(){t(Error("Network Error"))}))}})).s((function(e){throw Fa=null,e})))).then((function(){return new Qe((function(t,n){_r("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ja.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var La=new Z(ne,"https://apis.google.com/js/api.js?onload=%{onload}"),Da=new Pr(3e4,6e4),ja=new Pr(5e3,15e3),Fa=null;function Va(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Tn(this.i,"/__/auth/iframe"),xn(this.a,"apiKey",this.g),xn(this.a,"appName",this.h),this.b=null,this.c=[]}function Ba(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function qa(e){try{return n.app(e).auth().Aa()}catch(e){return[]}}function Ua(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Ha(e){var t=nr();return function(e){return Na(e,ga,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=kn(t),r=n.f;n=n.b;for(var i=0;i<e.length;i++){var o=e[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=kn(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:ar.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){e=!0;break e}}e=!1}if(!e)throw new Ao(nr())}))}function Wa(e){return e.l?e.l:(e.l=cr().then((function(){if(!e.o){var t=e.c,n=e.h,r=qa(e.b),i=new Va(e.u,e.f,e.b);i.f=t,i.b=n,i.c=K(r||[]),e.o=i.toString()}e.i=new Ma(e.o),function(e){if(!e.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.fb.then((function(){e.a.register("authEvent",t,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.i,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=ko(t.authEvent),n=0;n<e.g.length;n++)r=e.g[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Ze(n)}return n.status="ERROR",Ze(n)}))}(e)})),e.l)}function za(e){return e.m||(e.v=e.c?br(e.c,qa(e.b)):null,e.m=new Ms(e.f,Ri(e.h),e.v)),e.m}function Qa(e,t,n,r,i,o,s,a,u,c,l){return(e=new Ba(e,t,n,r,i)).l=o,e.g=s,e.i=a,e.b=$(u||null),e.f=c,e.nb(l).toString()}function Ka(e){if(this.a=e||n.INTERNAL.reactNative&&n.INTERNAL.reactNative.AsyncStorage,!this.a)throw new ei("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ga(e){this.b=e,this.a={},this.f=x(this.c,this)}Va.prototype.toString=function(){return this.f?xn(this.a,"v",this.f):Vn(this.a.a,"v"),this.b?xn(this.a,"eid",this.b):Vn(this.a.a,"eid"),this.c.length?xn(this.a,"fw",this.c.join(",")):Vn(this.a.a,"fw"),this.a.toString()},Ba.prototype.nb=function(e){return this.h=e,this},Ba.prototype.toString=function(){var e=Tn(this.o,"/__/auth/handler");if(xn(e,"apiKey",this.m),xn(e,"appName",this.c),xn(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var r=n.app(this.c).auth().ha()}catch(e){r=null}for(var i in t.ab=r,xn(e,"providerId",this.a.providerId),r=Or((t=this.a).zb))r[i]=r[i].toString();i=t.Fc,r=$(r);for(var o=0;o<i.length;o++){var s=i[o];s in r&&delete r[s]}t.cb&&t.ab&&!r[t.cb]&&(r[t.cb]=t.ab),Y(r)||xn(e,"customParameters",Tr(r))}if("function"==typeof this.a.Hb&&((t=this.a.Hb()).length&&xn(e,"scopes",t.join(","))),this.l?xn(e,"redirectUrl",this.l):Vn(e.a,"redirectUrl"),this.g?xn(e,"eventId",this.g):Vn(e.a,"eventId"),this.i?xn(e,"v",this.i):Vn(e.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Sn(e,a)&&xn(e,a,this.b[a]);return this.h?xn(e,"tid",this.h):Vn(e.a,"tid"),this.f?xn(e,"eid",this.f):Vn(e.a,"eid"),(a=qa(this.c)).length&&xn(e,"fw",a.join(",")),e.toString()},(e=Ua.prototype).Fb=function(e,t,n){var r=new ei("popup-closed-by-user"),i=new ei("web-storage-unsupported"),o=this,s=!1;return this.ia().then((function(){(function(e){var t={type:"webStorageSupport"};return Wa(e).then((function(){return function(e,t){return e.fb.then((function(){return new Qe((function(n){e.a.send(t.type,t,n,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.i,t)})).then((function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&or(e),t(i),s=!0)}))})).s((function(){})).then((function(){if(!s)return function(e){return new Qe((function(t){return function n(){dn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!s)return dn(n).then((function(){t(r)}))}))},e.Ob=function(){var e=wr();return!kr(e)&&!Nr(e)},e.Jb=function(){return!1},e.Db=function(e,t,n,r,i,o,s,a){if(!e)return et(new ei("popup-blocked"));if(s&&!kr())return this.ia().s((function(t){or(e),i(t)})),r(),Ze();this.a||(this.a=Ha(za(this)));var u=this;return this.a.then((function(){var t=u.ia().s((function(t){throw or(e),i(t),t}));return r(),t})).then((function(){(xo(n),s)||rr(Qa(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)})).s((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},e.Eb=function(e,t,n,r){this.a||(this.a=Ha(za(this)));var i=this;return this.a.then((function(){xo(t),rr(Qa(i.u,i.f,i.b,e,t,nr(),n,i.c,void 0,i.h,r))})).s((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},e.ia=function(){var e=this;return Wa(this).then((function(){return e.i.fb})).s((function(){throw e.a=null,new ei("network-request-failed")}))},e.Rb=function(){return!0},e.ya=function(e){this.g.push(e)},e.La=function(e){z(this.g,(function(t){return t==e}))},(e=Ka.prototype).get=function(e){return Ze(this.a.getItem(e)).then((function(e){return e&&Ir(e)}))},e.set=function(e,t){return Ze(this.a.setItem(e,Tr(t)))},e.S=function(e){return Ze(this.a.removeItem(e))},e.$=function(){},e.ea=function(){};var Ya,$a=[];function Xa(e,t,n){Y(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Ja(e){this.a=e}function Za(e){this.c=e,this.b=!1,this.a=[]}function eu(e,t,n,r){var i,o,s,a,u=n||{},c=null;if(e.b)return et(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Qe((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(a),void 0!==e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return tu(e,c),t})).s((function(t){throw tu(e,c),t}))}function tu(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),z(e.a,(function(e){return e==t}))}}function nu(){if(!ou())throw new ei("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=u.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var e=this;pr()&&self?(this.l=function(){var e=pr()?self:null;if(B($a,(function(n){n.b==e&&(t=n)})),!t){var t=new Ga(e);$a.push(t)}return t}(),Xa(this.l,"keyChanged",(function(t,n){return lu(e).then((function(t){return 0<t.length&&B(e.a,(function(e){e(t)})),{keyProcessed:H(t,n.key)}}))})),Xa(this.l,"ping",(function(){return Ze(["keyChanged"])}))):function(){var e=u.navigator;return e&&e.serviceWorker?Ze().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).s((function(){return null})):Ze(null)}().then((function(t){(e.h=t)&&(e.g=new Za(new Ja(t)),eu(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&H(t[0].value,"keyChanged")&&(e.o=!0)})).s((function(){})))}))}function ru(e){return new Qe((function(t,n){var r=e.u.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(e){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new Qe((function(t,n){var r=e.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return ru(e)})).then((function(e){t(e)})).s((function(e){n(e)}))}}))}function iu(e){return e.m||(e.m=ru(e)),e.m}function ou(){try{return!!u.indexedDB}catch(e){return!1}}function su(e){return e.objectStore("firebaseLocalStorage")}function au(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function uu(e){return new Qe((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function cu(e,t){return e.g&&e.h&&function(){var e=u.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?eu(e.g,"keyChanged",{key:t},e.o).then((function(){})).s((function(){})):Ze()}function lu(e){return iu(e).then((function(e){var t=su(au(e,!1));return t.getAll?uu(t.getAll()):new Qe((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(e.c,n),e.c=n}return r}))}function hu(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function pu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Ze().then((function(){if(ou()){var e=Ar(),r="__sak"+e;return Ya||(Ya=new nu),(n=Ya).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.$((function(e){B(t.a,(function(t){t(e)}))})),e}))}function du(){this.a={},this.type="inMemory"}function fu(){if(!function(){var e="Node"==dr();if(!(e=vu()||e&&n.INTERNAL.node&&n.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==dr())throw new ei("internal-error","The LocalStorage compatibility library was not found.");throw new ei("web-storage-unsupported")}this.a=vu()||n.INTERNAL.node.localStorage,this.type="localStorage"}function vu(){try{var e=u.localStorage,t=Ar();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function gu(){this.type="nullStorage"}function yu(){if(!function(){var e="Node"==dr();if(!(e=mu()||e&&n.INTERNAL.node&&n.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==dr())throw new ei("internal-error","The SessionStorage compatibility library was not found.");throw new ei("web-storage-unsupported")}this.a=mu()||n.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function mu(){try{var e=u.sessionStorage,t=Ar();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function bu(){var e={};e.Browser=Cu,e.Node=Eu,e.ReactNative=xu,e.Worker=Su,this.a=e[dr()]}Ga.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];B(r,(function(t){i.push(Ze().then((function(){return t(e.origin,e.data.data)})))})),nt(i).then((function(r){var i=[];B(r,(function(e){i.push({fulfilled:e.Gb,value:e.value,reason:e.reason?e.reason.message:void 0})})),B(i,(function(e){for(var t in e)void 0===e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Ja.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Za.prototype.close=function(){for(;0<this.a.length;)tu(this,this.a[0]);this.b=!0},(e=nu.prototype).set=function(e,t){var n,r=!1,i=this;return iu(this).then((function(t){return uu((t=su(au(n=t,!0))).get(e))})).then((function(o){var s=su(au(n,!0));return o?(o.value=t,uu(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=e,o.value=t,uu(s.add(o)))})).then((function(){return i.c[e]=t,cu(i,e)})).ka((function(){r&&i.b--}))},e.get=function(e){return iu(this).then((function(t){return uu(su(au(t,!1)).get(e))})).then((function(e){return e&&e.value}))},e.S=function(e){var t=!1,n=this;return iu(this).then((function(r){return t=!0,n.b++,uu(su(au(r,!0)).delete(e))})).then((function(){return delete n.c[e],cu(n,e)})).ka((function(){t&&n.b--}))},e.$=function(e){0==this.a.length&&function(e){hu(e),function t(){e.f=setTimeout((function(){e.i=lu(e).then((function(t){0<t.length&&B(e.a,(function(e){e(t)}))})).then((function(){t()})).s((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()}(this),this.a.push(e)},e.ea=function(e){z(this.a,(function(t){return t==e})),0==this.a.length&&hu(this)},(e=pu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},e.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},e.S=function(e){return this.b.then((function(t){return t.S(e)}))},e.$=function(e){this.a.push(e)},e.ea=function(e){z(this.a,(function(t){return t==e}))},(e=du.prototype).get=function(e){return Ze(this.a[e])},e.set=function(e,t){return this.a[e]=t,Ze()},e.S=function(e){return delete this.a[e],Ze()},e.$=function(){},e.ea=function(){},(e=fu.prototype).get=function(e){var t=this;return Ze().then((function(){return Ir(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Ze().then((function(){var r=Tr(t);null===r?n.S(e):n.a.setItem(e,r)}))},e.S=function(e){var t=this;return Ze().then((function(){t.a.removeItem(e)}))},e.$=function(e){u.window&&Yt(u.window,"storage",e)},e.ea=function(e){u.window&&Jt(u.window,"storage",e)},(e=gu.prototype).get=function(){return Ze(null)},e.set=function(){return Ze()},e.S=function(){return Ze()},e.$=function(){},e.ea=function(){},(e=yu.prototype).get=function(e){var t=this;return Ze().then((function(){return Ir(t.a.getItem(e))}))},e.set=function(e,t){var n=this;return Ze().then((function(){var r=Tr(t);null===r?n.S(e):n.a.setItem(e,r)}))},e.S=function(e){var t=this;return Ze().then((function(){t.a.removeItem(e)}))},e.$=function(){},e.ea=function(){};var wu,_u,Cu={C:fu,Sa:yu},Eu={C:fu,Sa:yu},xu={C:Ka,Sa:gu},Su={C:fu,Sa:gu},ku={$c:"local",NONE:"none",bd:"session"};function Tu(){var e=!(Nr(wr())||!hr()),t=kr(),n=Cr();this.m=e,this.h=t,this.l=n,this.a={},wu||(wu=new bu),e=wu;try{this.g=!tr()&&Dr()||!u.indexedDB?new e.a.C:new pu(pr()?new du:new e.a.C)}catch(e){this.g=new du,this.h=!0}try{this.i=new e.a.Sa}catch(e){this.i=new du}this.u=new du,this.f=x(this.Pb,this),this.b={}}function Ou(){return _u||(_u=new Tu),_u}function Iu(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function Au(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Nu(e,t,n){return n=Au(t,n),"local"==t.C&&(e.b[n]=null),Iu(e,t.C).S(n)}function Ru(e){e.c&&(clearInterval(e.c),e.c=null)}function Pu(e){this.a=e,this.b=Ou()}(e=Tu.prototype).get=function(e,t){return Iu(this,e.C).get(Au(e,t))},e.set=function(e,t,n){var r=Au(e,n),i=this,o=Iu(this,e.C);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.C&&(i.b[r]=t)}))},e.addListener=function(e,t,n){e=Au(e,t),this.l&&(this.b[e]=u.localStorage.getItem(e)),Y(this.a)&&(Iu(this,"local").$(this.f),this.h||(tr()||!Dr())&&u.indexedDB||!this.l||function(e){Ru(e),e.c=setInterval((function(){for(var t in e.a){var n=u.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Ft({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Pb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=Au(e,t),this.a[e]&&(z(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),Y(this.a)&&(Iu(this,"local").ea(this.f),Ru(this))},e.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Za(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?Iu(this,"local").ea(this.f):Ru(this),this.m)if(n=u.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?u.localStorage.setItem(t,r):u.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===u.localStorage.getItem(t)||(o.b[t]=u.localStorage.getItem(t),o.Za(t))},_t&&At&&10==At&&u.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else B(e,x(this.Za,this))},e.Za=function(e){this.a[e]&&B(this.a[e],(function(e){e()}))};var Mu,Lu={name:"authEvent",C:"local"};function Du(){this.a=Ou()}function ju(e,t){this.b=Fu,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0!==Mu||(Mu=u.Int32Array?new Int32Array(zu):zu),this.reset()}T(ju,(function(){this.b=-1}));for(var Fu=64,Vu=Fu-1,Bu=[],qu=0;qu<Vu;qu++)Bu[qu]=0;var Uu=Q(128,Bu);function Hu(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+s|0}r=0|e.a[0],i=0|e.a[1];var a=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|Mu[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+p|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+a|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function Wu(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(c(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Hu(e),i=0);else{if(!y(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Hu(e),i=0)}}e.c=i,e.g+=n}ju.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):K(this.h)};var zu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Qu(){ju.call(this,8,Ku)}T(Qu,ju);var Ku=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Gu(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=i||null,this.h=t+":"+n,this.v=new Du,this.g=new Pu(this.h),this.f=null,this.b=[],this.a=this.c=null}function Yu(e){return new ei("invalid-cordova-configuration",e)}function $u(e){var t=new Qu;Wu(t,e),e=[];var n=8*t.g;56>t.c?Wu(t,Uu,56-t.c):Wu(t,Uu,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Hu(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return q(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Xu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function Ju(e){return e.f||(e.f=e.ia().then((function(){return new Qe((function(t){e.ya((function n(r){return t(r),e.La(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),Zu(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=Qi(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Ir(Sn(o=kn(i),"firebaseError")||null))?ti(o):null)?new So(r.c,r.b,null,null,o,null,r.R()):new So(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}Xu(e,i)}))}var n=new So("unknown",null,null,null,new ei("no-auth-event")),r=!1,i=dn(500).then((function(){return Zu(e).then((function(){r||Xu(e,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(_r("BuildInfo.packageName",u).toLowerCase()+"://")&&t({url:e}),"function"==typeof o)try{o(e)}catch(e){console.error(e)}},Io||(Io=new To),function(e){var t=Io;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"==typeof(e=_r("universalLinks.subscribe",u))&&e(null,t.b))}(t)}(e)}))}))),e.f}function Zu(e){var t=null;return function(e){return e.b.get(Lu,e.a).then((function(e){return ko(e)}))}(e.g).then((function(n){return t=n,Nu((n=e.g).b,Lu,n.a)})).then((function(){return t}))}function ec(e){this.a=e,this.b=Ou()}(e=Gu.prototype).ia=function(){return this.Ba?this.Ba:this.Ba=(lr(void 0)?cr().then((function(){return new Qe((function(e,t){var n=u.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):et(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof _r("universalLinks.subscribe",u))throw Yu("cordova-universal-links-plugin-fix is not installed");if(void 0===_r("BuildInfo.packageName",u))throw Yu("cordova-plugin-buildinfo is not installed");if("function"!=typeof _r("cordova.plugins.browsertab.openUrl",u))throw Yu("cordova-plugin-browsertab is not installed");if("function"!=typeof _r("cordova.InAppBrowser.open",u))throw Yu("cordova-plugin-inappbrowser is not installed")}),(function(){throw new ei("cordova-not-ready")}))},e.Fb=function(e,t){return t(new ei("operation-not-supported-in-this-environment")),Ze()},e.Db=function(){return et(new ei("operation-not-supported-in-this-environment"))},e.Rb=function(){return!1},e.Ob=function(){return!0},e.Jb=function(){return!0},e.Eb=function(e,t,n,r){if(this.c)return et(new ei("redirect-operation-pending"));var i=this,o=u.document,s=null,a=null,c=null,l=null;return this.c=Ze().then((function(){return xo(t),Ju(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),s=new So(t,r,null,o,new ei("no-auth-event"),null,i),a=_r("BuildInfo.packageName",u);if("string"!=typeof a)throw new ei("invalid-cordova-configuration");var c=_r("BuildInfo.displayName",u),l={};if(wr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=a;else{if(!wr().toLowerCase().match(/android/))return et(new ei("operation-not-supported-in-this-environment"));l.apn=a}c&&(l.appDisplayName=c),o=$u(o),l.sessionId=o;var h=Qa(e.u,e.i,e.l,t,n,null,r,e.m,l,e.o,i);return e.ia().then((function(){var t=e.h;return e.v.a.set(Lu,s.A(),t)})).then((function(){var t=_r("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof t)throw new ei("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!=typeof(n=_r("cordova.plugins.browsertab.openUrl",u)))throw new ei("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=_r("cordova.InAppBrowser.open",u)))throw new ei("invalid-cordova-configuration");t=wr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new Qe((function(e,t){a=function(){var t=_r("cordova.plugins.browsertab.close",u);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.ya(a),c=function(){s||(s=dn(2e3).then((function(){t(new ei("redirect-cancelled-by-user"))})))},l=function(){Mr()&&c()},o.addEventListener("resume",c,!1),wr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(e){return Zu(i).then((function(){throw e}))}))})).ka((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),a&&i.La(a),i.c=null}))},e.ya=function(e){this.b.push(e),Ju(this).s((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new So("unknown",null,null,null,new ei("no-auth-event")),e(t))}))},e.La=function(e){z(this.b,(function(t){return t==e}))};var tc={name:"pendingRedirect",C:"session"};function nc(e){return Nu(e.b,tc,e.a)}function rc(e,t,n){this.i={},this.v=0,this.B=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=x(this.o,this),this.b=new yc,this.w=new Cc,this.g=new ec(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=ic(this.B,this.u,this.m,Ai)}function ic(e,t,r,i){var o=n.SDK_VERSION||null;return lr()?new Gu(e,t,r,o,i):new Ua(e,t,r,o,i)}function oc(e){e.f||(e.f=!0,e.a.ya(e.l));var t=e.a;return e.a.ia().s((function(n){throw e.a==t&&e.reset(),n}))}function sc(e){e.a.Ob()&&oc(e).s((function(t){var n=new So("unknown",null,null,null,new ei("operation-not-supported-in-this-environment"));pc(t)&&e.o(n)})),e.a.Jb()||mc(e.b)}function ac(e,t){H(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(tc,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?nc(e.g).then((function(){oc(e).s((function(t){var n=new So("unknown",null,null,null,new ei("operation-not-supported-in-this-environment"));pc(t)&&e.o(n)}))})):sc(e)})).s((function(){sc(e)}))}function uc(e,t){z(e.h,(function(e){return e==t}))}rc.prototype.reset=function(){this.f=!1,this.a.La(this.l),this.a=ic(this.B,this.u,this.m),this.i={}},rc.prototype.o=function(e){if(!e)throw new ei("invalid-auth-event");if(6e5<=k()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=k())),t=!0;break}}return mc(this.b),t};var cc=new Pr(2e3,1e4),lc=new Pr(3e4,6e4);function hc(e,t,n,r,i,o,s){return e.a.Db(t,n,r,(function(){e.f||(e.f=!0,e.a.ya(e.l))}),(function(){e.reset()}),i,o,s)}function pc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function dc(e,t,n,r,i){var o;return function(e){return e.b.set(tc,"pending",e.a)}(e.g).then((function(){return e.a.Eb(t,n,r,i).s((function(t){if(pc(t))throw new ei("operation-not-supported-in-this-environment");return o=t,nc(e.g).then((function(){throw o}))})).then((function(){return e.a.Rb()?new Qe((function(){})):nc(e.g).then((function(){return e.oa()})).then((function(){})).s((function(){}))}))}))}function fc(e,t,n,r,i){return e.a.Fb(r,(function(e){t.ja(n,null,e,i)}),cc.get())}rc.prototype.oa=function(){return this.b.oa()};var vc={};function gc(e,t,n){var r=t+":"+n;return vc[r]||(vc[r]=new rc(e,t,n)),vc[r]}function yc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function mc(e){e.g||(e.g=!0,_c(e,!1,null,null))}function bc(e){e.g&&!e.i&&_c(e,!1,null,null)}function wc(e,t){if(e.b=function(){return Ze(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function _c(e,t,n,r){t?r?function(e,t){if(e.b=function(){return et(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):wc(e,n):wc(e,{user:null}),e.f=[],e.c=[]}function Cc(){}function Ec(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(e){this.vb=e},enumerable:!1})}function xc(e,t){this.a=t,qr(this,"verificationId",e)}function Sc(e,t,n,r){return new _o(e).Va(t,n).then((function(e){return new xc(e,r)}))}function kc(e){var t=Ii(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new ei("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ur(this,{token:e,expirationTime:Lr(1e3*t.exp),authTime:Lr(1e3*t.auth_time),issuedAtTime:Lr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function Tc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Oc(e){this.f=e,this.b=this.a=null,this.c=0}function Ic(e,t){var n=t[Ds],r=t.refreshToken;t=Ac(t.expiresIn),e.b=n,e.c=t,e.a=r}function Ac(e){return k()+1e3*parseInt(e,10)}function Nc(e,t){return function(e,t){return new Qe((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Hs(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(Pa(e)):e.access_token&&e.refresh_token?n(e):r(new ei("internal-error")):r(new ei("network-request-failed"))}),"POST",Fn(t).toString(),e.g,e.u.get()):r(new ei("internal-error"))}))}(e.f,t).then((function(t){return e.b=t.access_token,e.c=Ac(t.expires_in),e.a=t.refresh_token,{accessToken:e.b,expirationTime:e.c,refreshToken:e.a}})).s((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function Rc(e,t){this.a=e||null,this.b=t||null,Ur(this,{lastSignInTime:Lr(t||null),creationTime:Lr(e||null)})}function Pc(e,t,n,r,i,o){Ur(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Mc(e,t){for(var n in jt.call(this,e),t)this[n]=t[n]}function Lc(e,t,r){this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=n.SDK_VERSION?br(n.SDK_VERSION):null,this.a=new Ms(this.l,Ri(Ai),e),this.b=new Oc(this.a),Uc(this,t[Ds]),Ic(this.b,t),qr(this,"refreshToken",this.b.a),zc(this,r||{}),un.call(this),this.J=!1,this.o&&Er()&&(this.i=gc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(e){return new Tc((function(){return e.G(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-k()-3e5;return 0<t?t:0}))}(this),this.W=x(this.Ha,this);var i=this;this.ga=null,this.va=function(e){i.sa(e.g)},this.Z=null,this.P=[],this.ua=function(e){jc(i,e.c)},this.Y=null}function Dc(e,t){e.Z&&Jt(e.Z,"languageCodeChanged",e.va),(e.Z=t)&&Yt(t,"languageCodeChanged",e.va)}function jc(e,t){e.P=t,Us(e.a,n.SDK_VERSION?br(n.SDK_VERSION,e.P):null)}function Fc(e,t){e.Y&&Jt(e.Y,"frameworkChanged",e.ua),(e.Y=t)&&Yt(t,"frameworkChanged",e.ua)}function Vc(e){try{return n.app(e.m).auth()}catch(t){throw new ei("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Bc(e){e.B||e.w.b||(e.w.start(),Jt(e,"tokenChanged",e.W),Yt(e,"tokenChanged",e.W))}function qc(e){Jt(e,"tokenChanged",e.W),e.w.stop()}function Uc(e,t){e.ma=t,qr(e,"_lat",t)}function Hc(e){for(var t=[],n=0;n<e.O.length;n++)t.push(e.O[n](e));return nt(t).then((function(){return e}))}function Wc(e){e.i&&!e.J&&(e.J=!0,ac(e.i,e))}function zc(e,t){Ur(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Rc(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Qc(){}function Kc(e){return Ze().then((function(){if(e.B)throw new ei("app-deleted")}))}function Gc(e){return q(e.providerData,(function(e){return e.providerId}))}function Yc(e,t){t&&($c(e,t.providerId),e.providerData.push(t))}function $c(e,t){z(e.providerData,(function(e){return e.providerId==t}))}function Xc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&qr(e,t,n)}function Jc(e,t){e!=t&&(Ur(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?qr(e,"metadata",function(e){return new Rc(e.a,e.b)}(t.metadata)):qr(e,"metadata",new Rc),B(t.providerData,(function(t){Yc(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),qr(e,"refreshToken",e.b.a))}function Zc(e){return e.G().then((function(t){var n=e.isAnonymous;return function(e,t){return Na(e.a,pa,{idToken:t}).then(x(e.zc,e))}(e,t).then((function(){return n||Xc(e,"isAnonymous",!1),t}))}))}function el(e,t){t[Ds]&&e.ma!=t[Ds]&&(Ic(e.b,t),e.dispatchEvent(new Mc("tokenChanged")),Uc(e,t[Ds]),Xc(e,"refreshToken",e.b.a))}function tl(e,t){return Zc(e).then((function(){if(H(Gc(e),t))return Hc(e).then((function(){throw new ei("provider-already-linked")}))}))}function nl(e,t,n){return Hr({user:e,credential:Eo(t),additionalUserInfo:t=ji(t),operationType:n})}function rl(e,t){return el(e,t),e.reload().then((function(){return e}))}function il(e,t,r,i,o){if(!Er())return et(new ei("operation-not-supported-in-this-environment"));if(e.h&&!o)return et(e.h);var s=Di(r.providerId),a=Ar(e.uid+":::"),u=null;(!kr()||hr())&&e.o&&r.isOAuthProvider&&(u=Qa(e.o,e.l,e.m,t,r,null,a,n.SDK_VERSION||null,null,null,e.tenantId));var c=sr(u,s&&s.Da,s&&s.Ca);return i=i().then((function(){if(sl(e),!o)return e.G().then((function(){}))})).then((function(){return hc(e.i,c,t,r,a,!!u,e.tenantId)})).then((function(){return new Qe((function(n,r){e.ja(t,null,new ei("cancelled-popup-request"),e.g||null),e.f=n,e.v=r,e.g=a,e.c=fc(e.i,e,t,c,a)}))})).then((function(e){return c&&or(c),e?Hr(e):null})).s((function(e){throw c&&or(c),e})),al(e,i,o)}function ol(e,t,n,r,i){if(!Er())return et(new ei("operation-not-supported-in-this-environment"));if(e.h&&!i)return et(e.h);var o=null,s=Ar(e.uid+":::");return r=r().then((function(){if(sl(e),!i)return e.G().then((function(){}))})).then((function(){return e.ca=s,Hc(e)})).then((function(t){return e.da&&(t=(t=e.da).b.set(ll,e.A(),t.a)),t})).then((function(){return dc(e.i,t,n,s,e.tenantId)})).s((function(t){if(o=t,e.da)return hl(e.da);throw o})).then((function(){if(o)throw o})),al(e,r,i)}function sl(e){if(!e.i||!e.J){if(e.i&&!e.J)throw new ei("internal-error");throw new ei("auth-domain-config-required")}}function al(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),et(e.h)):t.s((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new Mc("userInvalidated")),e.h=t),t}))}(e,t,n);return e.I.push(r),r.ka((function(){W(e.I,r)})),r}function ul(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[Ds]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-k())/1e3;var r=new Lc(t,n,e);return e.providerData&&B(e.providerData,(function(e){e&&Yc(r,Hr(e))})),e.redirectEventId&&(r.ca=e.redirectEventId),r}function cl(e){this.a=e,this.b=Ou()}yc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},yc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(_c(this,!0,null,e.a),Ze()):t.za(n,r)?function(e,t,n){n=n.za(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.R(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then((function(t){_c(e,a,t,null)})).s((function(t){_c(e,a,null,t)}))}(this,e,t):et(new ei("invalid-auth-event")):(_c(this,!1,null,null),Ze())}else et(new ei("invalid-auth-event"))},yc.prototype.oa=function(){var e=this;return new Qe((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new ei("timeout");e.a&&e.a.cancel(),e.a=dn(lc.get()).then((function(){e.b||(e.g=!0,_c(e,!0,null,t))}))}(e))}))},Cc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ja(e.c,null,e.a,e.b),Ze()):t.za(n,r)?function(e,t){var n=e.b,r=e.c;t.za(r,n)(e.g,e.f,e.R(),e.i).then((function(e){t.ja(r,e,null,n)})).s((function(e){t.ja(r,null,e,n)}))}(e,t):et(new ei("invalid-auth-event"))}else et(new ei("invalid-auth-event"))},xc.prototype.confirm=function(e){return e=Co(this.verificationId,e),this.a(e)},Tc.prototype.start=function(){this.a=this.c,function e(t,n){t.stop();t.b=dn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(t,n)).then((function(){return function(){var e=u.document,t=null;return Mr()||!e?Ze():new Qe((function(n){t=function(){Mr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).s((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return t.h()})).then((function(){e(t,!0)})).s((function(n){t.i(n)&&e(t,!1)}))}(this,!0)},Tc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Oc.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Oc.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?et(new ei("user-token-expired")):e||!this.b||k()>this.c-3e4?this.a?Nc(this,{grant_type:"refresh_token",refresh_token:this.a}):Ze(null):Ze({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Rc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(Mc,jt),T(Lc,un),Lc.prototype.sa=function(e){this.ga=e,qs(this.a,e)},Lc.prototype.ha=function(){return this.ga},Lc.prototype.Aa=function(){return K(this.P)},Lc.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},qr(Lc.prototype,"providerId","firebase"),(e=Lc.prototype).reload=function(){var e=this;return al(this,Kc(this).then((function(){return Zc(e).then((function(){return Hc(e)})).then(Qc)})))},e.dc=function(e){return this.G(e).then((function(e){return new kc(e)}))},e.G=function(e){var t=this;return al(this,Kc(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new ei("internal-error");return e.accessToken!=t.ma&&(Uc(t,e.accessToken),t.dispatchEvent(new Mc("tokenChanged"))),Xc(t,"refreshToken",e.refreshToken),e.accessToken})))},e.zc=function(e){if(!(e=e.users)||!e.length)throw new ei("internal-error");zc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?q(e,(function(e){return new Pc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Yc(this,t[n]);Xc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.Ac=function(e){return Vr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.gb(e)},e.gb=function(e){var t=this,n=null;return al(this,e.f(this.a,this.uid).then((function(e){return el(t,e),n=nl(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},e.rc=function(e){return Vr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.eb(e)},e.eb=function(e){var t=this,n=null;return al(this,tl(this,e.providerId).then((function(){return t.G()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=nl(t,e,"link"),rl(t,e)})).then((function(){return n})))},e.sc=function(e,t){var n=this;return al(this,tl(this,"phone").then((function(){return Sc(Vc(n),e,t,x(n.eb,n))})))},e.Bc=function(e,t){var n=this;return al(this,Ze().then((function(){return Sc(Vc(n),e,t,x(n.gb,n))})),!0)},e.rb=function(e){var t=this;return al(this,this.G().then((function(n){return t.a.rb(n,e)})).then((function(e){return el(t,e),t.reload()})))},e.Sc=function(e){var t=this;return al(this,this.G().then((function(n){return e.b(t.a,n)})).then((function(e){return el(t,e),t.reload()})))},e.sb=function(e){var t=this;return al(this,this.G().then((function(n){return t.a.sb(n,e)})).then((function(e){return el(t,e),t.reload()})))},e.tb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Kc(this);var t=this;return al(this,this.G().then((function(n){return t.a.tb(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return el(t,e),Xc(t,"displayName",e.displayName||null),Xc(t,"photoURL",e.photoUrl||null),B(t.providerData,(function(e){"password"===e.providerId&&(qr(e,"displayName",t.displayName),qr(e,"photoURL",t.photoURL))})),Hc(t)})).then(Qc))},e.Qc=function(e){var t=this;return al(this,Zc(this).then((function(n){return H(Gc(t),e)?function(e,t,n){return Na(e,ca,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return B(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),B(Gc(t),(function(e){n[e]||$c(t,e)})),n[_o.PROVIDER_ID]||qr(t,"phoneNumber",null),Hc(t)})):Hc(t).then((function(){throw new ei("no-such-provider")}))})))},e.delete=function(){var e=this;return al(this,this.G().then((function(t){return Na(e.a,ua,{idToken:t})})).then((function(){e.dispatchEvent(new Mc("userDeleted"))}))).then((function(){for(var t=0;t<e.I.length;t++)e.I[t].cancel("app-deleted");Dc(e,null),Fc(e,null),e.I=[],e.B=!0,qc(e),qr(e,"refreshToken",null),e.i&&uc(e.i,e)}))},e.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ca||null)==t||"reauthViaRedirect"==e&&(this.ca||null)==t)},e.ja=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.za=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?x(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?x(this.Cb,this):"linkViaRedirect"==e&&(this.ca||null)==t?x(this.Bb,this):"reauthViaRedirect"==e&&(this.ca||null)==t?x(this.Cb,this):null},e.tc=function(e){var t=this;return il(this,"linkViaPopup",e,(function(){return tl(t,e.providerId).then((function(){return Hc(t)}))}),!1)},e.Cc=function(e){return il(this,"reauthViaPopup",e,(function(){return Ze()}),!0)},e.uc=function(e){var t=this;return ol(this,"linkViaRedirect",e,(function(){return tl(t,e.providerId)}),!1)},e.Dc=function(e){return ol(this,"reauthViaRedirect",e,(function(){return Ze()}),!0)},e.Bb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return al(this,this.G().then((function(n){return ta(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=nl(i,e,"link"),rl(i,e)})).then((function(){return o})))},e.Cb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return al(this,Ze().then((function(){return Gi(na(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=nl(i,e,"reauthenticate"),el(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},e.jb=function(e){var t=this,n=null;return al(this,this.G().then((function(t){return n=t,void 0===e||Y(e)?{}:Ei(new di(e))})).then((function(e){return t.a.jb(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},e.toJSON=function(){return this.A()},e.A=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&J(e,this.metadata.A()),B(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),e};var ll={name:"redirectUser",C:"session"};function hl(e){return Nu(e.b,ll,e.a)}function pl(e){this.a=e,this.b=Ou(),this.c=null,this.f=function(e){var t=vl("local"),n=vl("session"),r=vl("none");return function(e,t,n){var r=Au(t,n),i=Iu(e,t.C);return e.get(t,n).then((function(o){var s=null;try{s=Ir(u.localStorage.getItem(r))}catch(e){}if(s&&!o)return u.localStorage.removeItem(r),e.set(t,s,n);s&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(fl,e.a).then((function(e){return e?vl(e):t}))}))}))})).then((function(t){return e.c=t,dl(e,t.C)})).s((function(){e.c||(e.c=t)}))}(this),this.b.addListener(vl("local"),this.a,x(this.g,this))}function dl(e,t){var n,r=[];for(n in ku)ku[n]!==t&&r.push(Nu(e.b,vl(ku[n]),e.a));return r.push(Nu(e.b,fl,e.a)),function(e){return new Qe((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},a=0;a<e.length;a++)tt(e[a],S(o,a),s);else t(i)}))}(r)}pl.prototype.g=function(){var e=this,t=vl("local");bl(this,(function(){return Ze().then((function(){return e.c&&"local"!=e.c.C?e.b.get(t,e.a):null})).then((function(n){if(n)return dl(e,"local").then((function(){e.c=t}))}))}))};var fl={name:"persistence",C:"session"};function vl(e){return{name:"authUser",C:e}}function gl(e,t){return bl(e,(function(){return e.b.set(e.c,t.A(),e.a)}))}function yl(e){return bl(e,(function(){return Nu(e.b,e.c,e.a)}))}function ml(e,t){return bl(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),ul(e||{})}))}))}function bl(e,t){return e.f=e.f.then(t,t),e.f}function wl(e){if(this.l=!1,qr(this,"settings",new Ec),qr(this,"app",e),!Ol(this).options||!Ol(this).options.apiKey)throw new ei("invalid-api-key");e=n.SDK_VERSION?br(n.SDK_VERSION):null,this.b=new Ms(Ol(this).options&&Ol(this).options.apiKey,Ri(Ai),e),this.O=[],this.m=[],this.J=[],this.Ub=n.INTERNAL.createSubscribe(x(this.oc,this)),this.W=void 0,this.Vb=n.INTERNAL.createSubscribe(x(this.pc,this)),kl(this,null),this.h=new pl(Ol(this).options.apiKey+":"+Ol(this).name),this.w=new cl(Ol(this).options.apiKey+":"+Ol(this).name),this.Y=Rl(this,function(e){var t=Ol(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(ll,e.a).then((function(e){return e&&t&&(e.authDomain=t),ul(e||{})}))}(e.w,Ol(e).options.authDomain).then((function(t){return(e.B=t)&&(t.da=e.w),hl(e.w)}));return Rl(e,t)}(e).then((function(){return ml(e.h,t)})).then((function(t){return t?(t.da=e.w,e.B&&(e.B.ca||null)==(t.ca||null)?t:t.reload().then((function(){return gl(e.h,t).then((function(){return t}))})).s((function(n){return"auth/network-request-failed"==n.code?t:yl(e.h)}))):null})).then((function(t){kl(e,t||null)}));return Rl(e,n)}(this)),this.i=Rl(this,function(e){return e.Y.then((function(){return xl(e)})).s((function(){})).then((function(){if(!e.l)return e.ma()})).s((function(){})).then((function(){if(!e.l){e.ga=!0;var t=e.h;t.b.addListener(vl("local"),t.a,e.ma)}}))}(this)),this.ga=!1,this.ma=x(this.Nc,this),this.ub=x(this.aa,this),this.ua=x(this.bc,this),this.va=x(this.mc,this),this.Ha=x(this.nc,this),this.a=null,function(e){var t=Ol(e).options.authDomain,n=Ol(e).options.apiKey;t&&Er()&&(e.Tb=e.Y.then((function(){if(!e.l){if(e.a=gc(t,n,Ol(e).name),ac(e.a,e),Il(e)&&Wc(Il(e)),e.B){Wc(e.B);var r=e.B;r.sa(e.ha()),Dc(r,e),jc(r=e.B,e.I),Fc(r,e),e.B=null}return e.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=x(this.delete,this),this.INTERNAL.logFramework=x(this.vc,this),this.o=0,un.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ha()},set:function(e){this.sa(e)},enumerable:!1}),e.Z=null,Object.defineProperty(e,"ti",{get:function(){return this.R()},set:function(e){this.nb(e)},enumerable:!1}),e.P=null}(this),this.I=[]}function _l(e){jt.call(this,"languageCodeChanged"),this.g=e}function Cl(e){jt.call(this,"frameworkChanged"),this.c=e}function El(e){return e.Tb||et(new ei("auth-domain-config-required"))}function xl(e){if(!Er())return et(new ei("operation-not-supported-in-this-environment"));var t=El(e).then((function(){return e.a.oa()})).then((function(e){return e?Hr(e):null}));return Rl(e,t)}function Sl(e,t){var n={};return n.apiKey=Ol(e).options.apiKey,n.authDomain=Ol(e).options.authDomain,n.appName=Ol(e).name,e.Y.then((function(){return function(e,t,n,r){var i=new Lc(e,t);return n&&(i.da=n),r&&jc(i,r),i.reload().then((function(){return i}))}(n,t,e.w,e.Aa())})).then((function(t){return Il(e)&&t.uid==Il(e).uid?(Jc(Il(e),t),e.aa(t)):(kl(e,t),Wc(t),e.aa(t))})).then((function(){Nl(e)}))}function kl(e,t){Il(e)&&(function(e,t){z(e.O,(function(e){return e==t}))}(Il(e),e.ub),Jt(Il(e),"tokenChanged",e.ua),Jt(Il(e),"userDeleted",e.va),Jt(Il(e),"userInvalidated",e.Ha),qc(Il(e))),t&&(t.O.push(e.ub),Yt(t,"tokenChanged",e.ua),Yt(t,"userDeleted",e.va),Yt(t,"userInvalidated",e.Ha),0<e.o&&Bc(t)),qr(e,"currentUser",t),t&&(t.sa(e.ha()),Dc(t,e),jc(t,e.I),Fc(t,e))}function Tl(e,t){var n=null,r=null;return Rl(e,t.then((function(t){return n=Eo(t),r=ji(t),Sl(e,t)})).then((function(){return Hr({user:Il(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Ol(e){return e.app}function Il(e){return e.currentUser}function Al(e){return Il(e)&&Il(e)._lat||null}function Nl(e){if(e.ga){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](Al(e));if(e.W!==e.getUid()&&e.J.length)for(e.W=e.getUid(),t=0;t<e.J.length;t++)e.J[t]&&e.J[t](Al(e))}}function Rl(e,t){return e.O.push(t),t.ka((function(){W(e.O,t)})),t}function Pl(){}function Ml(){this.a={},this.b=1e12}pl.prototype.mb=function(e){var t=null,n=this;return function(e){var t=new ei("invalid-persistence-type"),n=new ei("unsupported-persistence-type");e:{for(r in ku)if(ku[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(dr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!Cr()&&"none"!==e)throw n}}(e),bl(this,(function(){return e!=n.c.C?n.b.get(n.c,n.a).then((function(r){return t=r,dl(n,e)})).then((function(){if(n.c=vl(e),t)return n.b.set(n.c,t,n.a)})):Ze()}))},T(wl,un),T(_l,jt),T(Cl,jt),(e=wl.prototype).mb=function(e){return Rl(this,e=this.h.mb(e))},e.sa=function(e){this.Z===e||this.l||(this.Z=e,qs(this.b,this.Z),this.dispatchEvent(new _l(this.ha())))},e.ha=function(){return this.Z},e.Tc=function(){var e=u.navigator;this.sa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.vc=function(e){this.I.push(e),Us(this.b,n.SDK_VERSION?br(n.SDK_VERSION,this.I):null),this.dispatchEvent(new Cl(this.I))},e.Aa=function(){return K(this.I)},e.nb=function(e){this.P===e||this.l||(this.P=e,this.b.b=this.P)},e.R=function(){return this.P},e.toJSON=function(){return{apiKey:Ol(this).options.apiKey,authDomain:Ol(this).options.authDomain,appName:Ol(this).name,currentUser:Il(this)&&Il(this).A()}},e.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.ja=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.za=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?x(this.ac,this):null},e.ac=function(e,t,n,r){var i=this;e={requestUri:e,postBody:r,sessionId:t,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,s=null,a=ea(i.b,e).then((function(e){return o=Eo(e),s=ji(e),e}));return Rl(this,e=i.Y.then((function(){return a})).then((function(e){return Sl(i,e)})).then((function(){return Hr({user:Il(i),credential:o,additionalUserInfo:s,operationType:"signIn"})})))},e.Lc=function(e){if(!Er())return et(new ei("operation-not-supported-in-this-environment"));var t=this,r=Di(e.providerId),i=Ar(),o=null;(!kr()||hr())&&Ol(this).options.authDomain&&e.isOAuthProvider&&(o=Qa(Ol(this).options.authDomain,Ol(this).options.apiKey,Ol(this).name,"signInViaPopup",e,null,i,n.SDK_VERSION||null,null,null,this.R()));var s=sr(o,r&&r.Da,r&&r.Ca);return Rl(this,r=El(this).then((function(n){return hc(n,s,"signInViaPopup",e,i,!!o,t.R())})).then((function(){return new Qe((function(e,n){t.ja("signInViaPopup",null,new ei("cancelled-popup-request"),t.g),t.f=e,t.v=n,t.g=i,t.c=fc(t.a,t,"signInViaPopup",s,i)}))})).then((function(e){return s&&or(s),e?Hr(e):null})).s((function(e){throw s&&or(s),e})))},e.Mc=function(e){if(!Er())return et(new ei("operation-not-supported-in-this-environment"));var t=this;return Rl(this,El(this).then((function(){return function(e){return bl(e,(function(){return e.b.set(fl,e.c.C,e.a)}))}(t.h)})).then((function(){return dc(t.a,"signInViaRedirect",e,void 0,t.R())})))},e.oa=function(){var e=this;return xl(this).then((function(t){return e.a&&bc(e.a.b),t})).s((function(t){throw e.a&&bc(e.a.b),t}))},e.Rc=function(e){if(!e)return et(new ei("null-user"));if(this.P!=e.tenantId)return et(new ei("tenant-id-mismatch"));var t=this,n={};n.apiKey=Ol(this).options.apiKey,n.authDomain=Ol(this).options.authDomain,n.appName=Ol(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.o,appName:e.m};var i=e.b,o={};return o[Ds]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-k())/1e3,t=new Lc(t,o),n&&(t.da=n),r&&jc(t,r),Jc(t,e),t}(e,n,t.w,t.Aa());return Rl(this,this.i.then((function(){if(Ol(t).options.apiKey!=e.l)return r.reload()})).then((function(){return Il(t)&&e.uid==Il(t).uid?(Jc(Il(t),e),t.aa(e)):(kl(t,r),Wc(r),t.aa(r))})).then((function(){Nl(t)})))},e.pb=function(){var e=this;return Rl(this,this.i.then((function(){return e.a&&bc(e.a.b),Il(e)?(kl(e,null),yl(e.h).then((function(){Nl(e)}))):Ze()})))},e.Nc=function(){var e=this;return ml(this.h,Ol(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=Il(e)&&t){n=Il(e).uid;var r=t.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Jc(Il(e),t),Il(e).G();(Il(e)||t)&&(kl(e,t),t&&(Wc(t),t.da=e.w),e.a&&ac(e.a,e),Nl(e))}}))},e.aa=function(e){return gl(this.h,e)},e.bc=function(){Nl(this),this.aa(Il(this))},e.mc=function(){this.pb()},e.nc=function(){this.pb()},e.oc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(Il(t))}))},e.pc=function(e){var t=this;!function(e,t){e.J.push(t),Rl(e,e.i.then((function(){!e.l&&H(e.J,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(Al(e)))})))}(this,(function(){e.next(Il(t))}))},e.xc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){m(e)?e(Il(r)):m(e.next)&&e.next(Il(r))})),this.Ub(e,t,n)},e.wc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),m(e)?e(Il(r)):m(e.next)&&e.next(Il(r))})),this.Vb(e,t,n)},e.cc=function(e){var t=this;return Rl(this,this.i.then((function(){return Il(t)?Il(t).G(e).then((function(e){return{accessToken:e}})):null})))},e.Hc=function(e){var t=this;return this.i.then((function(){return Tl(t,Na(t.b,ka,{token:e}))})).then((function(e){var n=e.user;return Xc(n,"isAnonymous",!1),t.aa(n),e}))},e.Ic=function(e,t){var n=this;return this.i.then((function(){return Tl(n,Na(n.b,Ta,{email:e,password:t}))}))},e.Xb=function(e,t){var n=this;return this.i.then((function(){return Tl(n,Na(n.b,sa,{email:e,password:t}))}))},e.Ra=function(e){var t=this;return this.i.then((function(){return Tl(t,e.na(t.b))}))},e.Gc=function(e){return Vr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ra(e)},e.ob=function(){var e=this;return this.i.then((function(){var t=Il(e);if(t&&t.isAnonymous){var n=Hr({providerId:null,isNewUser:!1});return Hr({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Tl(e,e.b.ob()).then((function(t){var n=t.user;return Xc(n,"isAnonymous",!0),e.aa(n),t}))}))},e.getUid=function(){return Il(this)&&Il(this).uid||null},e.Wb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&Il(this)&&Bc(Il(this))},e.Ec=function(e){var t=this;B(this.m,(function(n){n==e&&t.o--})),0>this.o&&(this.o=0),0==this.o&&Il(this)&&qc(Il(this)),this.removeAuthTokenListener(e)},e.addAuthTokenListener=function(e){var t=this;this.m.push(e),Rl(this,this.i.then((function(){t.l||H(t.m,e)&&e(Al(t))})))},e.removeAuthTokenListener=function(e){z(this.m,(function(t){return t==e}))},e.delete=function(){this.l=!0;for(var e=0;e<this.O.length;e++)this.O[e].cancel("app-deleted");return this.O=[],this.h&&(e=this.h).b.removeListener(vl("local"),e.a,this.ma),this.a&&(uc(this.a,this),bc(this.a.b)),Promise.resolve()},e.$b=function(e){return Rl(this,function(e,t){return Na(e,aa,{identifier:t,continueUri:xr()?nr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.b,e))},e.qc=function(e){return!!yo(e)},e.lb=function(e,t){var n=this;return Rl(this,Ze().then((function(){var e=new di(t);if(!e.c)throw new ei("argument-error",gi+" must be true when sending sign in link to email");return Ei(e)})).then((function(t){return n.b.lb(e,t)})).then((function(){})))},e.Uc=function(e){return this.Ka(e).then((function(e){return e.data.email}))},e.$a=function(e,t){return Rl(this,this.b.$a(e,t).then((function(){})))},e.Ka=function(e){return Rl(this,this.b.Ka(e).then((function(e){return new zr(e)})))},e.Xa=function(e){return Rl(this,this.b.Xa(e).then((function(){})))},e.kb=function(e,t){var n=this;return Rl(this,Ze().then((function(){return void 0===t||Y(t)?{}:Ei(new di(t))})).then((function(t){return n.b.kb(e,t)})).then((function(){})))},e.Kc=function(e,t){return Rl(this,Sc(this,e,t,x(this.Ra,this)))},e.Jc=function(e,t){var n=this;return Rl(this,Ze().then((function(){var r=t||nr(),i=go(e,r);if(!(r=yo(r)))throw new ei("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new ei("tenant-id-mismatch");return n.Ra(i)})))},Pl.prototype.render=function(){},Pl.prototype.reset=function(){},Pl.prototype.getResponse=function(){},Pl.prototype.execute=function(){};var Ll=null;function Dl(e,t){return(t=jl(t))&&e.a[t]||null}function jl(e){return(e=void 0===e?1e12:e)?e.toString():null}function Fl(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=zn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():Yt(this.f,"click",this.i)}function Vl(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Bl(){}Ml.prototype.render=function(e,t){return this.a[this.b.toString()]=new Fl(e,t),this.b++},Ml.prototype.reset=function(e){var t=Dl(this,e);e=jl(e),t&&e&&(t.delete(),delete this.a[e])},Ml.prototype.getResponse=function(e){return(e=Dl(this,e))?e.getResponse():null},Ml.prototype.execute=function(e){(e=Dl(this,e))&&e.execute()},Fl.prototype.getResponse=function(){return Vl(this),this.b},Fl.prototype.execute=function(){Vl(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(e){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(e){}e.h&&e.execute()}),6e4)}),500))},Fl.prototype.delete=function(){Vl(this),this.g=!0,clearTimeout(this.a),this.a=null,Jt(this.f,"click",this.i)},Bl.prototype.g=function(){return Ll||(Ll=new Ml),Ze(Ll)},Bl.prototype.c=function(){};var ql=null;function Ul(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Hl=new Z(ne,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Wl=new Pr(3e4,6e4);Ul.prototype.g=function(e){var t=this;return new Qe((function(n,r){var i=setTimeout((function(){r(new ei("network-request-failed"))}),Wl.get());!u.grecaptcha||e!==t.f&&!t.b?(u[t.a]=function(){if(u.grecaptcha){t.f=e;var o=u.grecaptcha.render;u.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new ei("internal-error"));delete u[t.a]},Ze(Ts(se(Hl,{onload:t.a,hl:e||""}))).s((function(){clearTimeout(i),r(new ei("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Ul.prototype.c=function(){this.b--};var zl=null;function Ql(e,t,n,r,i,o,s){if(qr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=t,this.g=null,s?(ql||(ql=new Bl),s=ql):(zl||(zl=new Ul),s=zl),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Yl])throw new ei("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[$l],!u.document)throw new ei("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!zn(t)||!this.i&&zn(t).hasChildNodes())throw new ei("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ms(e,o||null,i||null),this.v=r||function(){return null};var a=this;this.l=[];var c=this.a[Kl];this.a[Kl]=function(e){if(Xl(a,e),"function"==typeof c)c(e);else if("string"==typeof c){var t=_r(c,u);"function"==typeof t&&t(e)}};var l=this.a[Gl];this.a[Gl]=function(){if(Xl(a,null),"function"==typeof l)l();else if("string"==typeof l){var e=_r(l,u);"function"==typeof e&&e()}}}var Kl="callback",Gl="expired-callback",Yl="sitekey",$l="size";function Xl(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function Jl(e,t){return e.h.push(t),t.ka((function(){W(e.h,t)})),t}function Zl(e){if(e.B)throw new ei("internal-error","RecaptchaVerifier instance has been destroyed.")}function eh(e,t,r){var i=!1;try{this.b=r||n.app()}catch(e){throw new ei("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new ei("invalid-api-key");r=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Aa()}catch(e){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}s=n.SDK_VERSION?br(n.SDK_VERSION,s):null,Ql.call(this,r,e,t,(function(){try{var e=o.b.auth().ha()}catch(t){e=null}return e}),s,Ri(Ai),i)}function th(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<t.length;s++)if(t[s].optional)o=!0;else{if(o)throw new ei("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].N(n[i])&&!o){if(t=t[i],0>i||i>=nh.length)throw new ei("internal-error","Argument validator received an unsupported number of arguments.");n=nh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.M+".";break e}r=null}}if(r)throw new ei("argument-error",e+" failed: "+r)}(e=Ql.prototype).Ba=function(){var e=this;return this.f?this.f:this.f=Jl(this,Ze().then((function(){if(xr()&&!pr())return cr();throw new ei("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.v())})).then((function(t){return e.g=t,Na(e.o,ya,{})})).then((function(t){e.a[Yl]=t.recaptchaSiteKey})).s((function(t){throw e.f=null,t})))},e.render=function(){Zl(this);var e=this;return Jl(this,this.Ba().then((function(){if(null===e.c){var t=e.u;if(!e.i){var n=zn(t);t=Gn("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},e.verify=function(){Zl(this);var e=this;return Jl(this,this.render().then((function(t){return new Qe((function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(function(e,t){z(e.l,(function(e){return e==t}))}(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}}))})))},e.reset=function(){Zl(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Zl(this),this.B=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=zn(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},T(eh,Ql);var nh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function rh(e,t){return{name:e||"",M:"a valid string",optional:!!t,N:c}}function ih(e,t){return{name:e||"",M:"a boolean",optional:!!t,N:l}}function oh(e,t){return{name:e||"",M:"a valid object",optional:!!t,N:b}}function sh(e,t){return{name:e||"",M:"a function",optional:!!t,N:m}}function ah(e,t){return{name:e||"",M:"null",optional:!!t,N:v}}function uh(e){return{name:e?e+"Credential":"credential",M:e?"a valid "+e+" credential":"a valid credential",optional:!1,N:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.na||!n)}}}function ch(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(e){return!!(e&&c(e.type)&&m(e.verify))}}}function lh(e,t,n,r){return{name:n||"",M:e.M+" or "+t.M,optional:!!r,N:function(n){return e.N(n)||t.N(n)}}}function hh(e,t){for(var n in t){var r=t[n].name;e[r]=fh(r,e[n],t[n].j)}}function ph(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:S((function(e){return this[e]}),n),set:S((function(e,t,n,r){th(e,[n],[r],!0),this[t]=r}),r,n,t[n].Ya),enumerable:!0})}}function dh(e,t,n,r){e[t]=fh(t,n,r)}function fh(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return th(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}hh(wl.prototype,{Xa:{name:"applyActionCode",j:[rh("code")]},Ka:{name:"checkActionCode",j:[rh("code")]},$a:{name:"confirmPasswordReset",j:[rh("code"),rh("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[rh("email"),rh("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[rh("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[rh("emailLink")]},wc:{name:"onAuthStateChanged",j:[lh(oh(),sh(),"nextOrObserver"),sh("opt_error",!0),sh("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[lh(oh(),sh(),"nextOrObserver"),sh("opt_error",!0),sh("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[rh("email"),lh(oh("opt_actionCodeSettings",!0),ah(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[rh("email"),oh("actionCodeSettings")]},mb:{name:"setPersistence",j:[rh("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[uh()]},ob:{name:"signInAnonymously",j:[]},Ra:{name:"signInWithCredential",j:[uh()]},Hc:{name:"signInWithCustomToken",j:[rh("token")]},Ic:{name:"signInWithEmailAndPassword",j:[rh("email"),rh("password")]},Jc:{name:"signInWithEmailLink",j:[rh("email"),rh("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[rh("phoneNumber"),ch()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[lh({name:"user",M:"an instance of Firebase User",optional:!1,N:function(e){return!!(e&&e instanceof Lc)}},ah(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[rh(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[rh("code")]}}),ph(wl.prototype,{lc:{name:"languageCode",Ya:lh(rh(),ah(),"languageCode")},ti:{name:"tenantId",Ya:lh(rh(),ah(),"tenantId")}}),wl.Persistence=ku,wl.Persistence.LOCAL="local",wl.Persistence.SESSION="session",wl.Persistence.NONE="none",hh(Lc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[ih("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[ih("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[uh()]},eb:{name:"linkWithCredential",j:[uh()]},sc:{name:"linkWithPhoneNumber",j:[rh("phoneNumber"),ch()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[uh()]},gb:{name:"reauthenticateWithCredential",j:[uh()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[rh("phoneNumber"),ch()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[lh(oh("opt_actionCodeSettings",!0),ah(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[rh(null,!0)]},Qc:{name:"unlink",j:[rh("provider")]},rb:{name:"updateEmail",j:[rh("email")]},sb:{name:"updatePassword",j:[rh("password")]},Sc:{name:"updatePhoneNumber",j:[uh("phone")]},tb:{name:"updateProfile",j:[oh("profile")]}}),hh(Ml.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),hh(Pl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),hh(Qe.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),ph(Ec.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Ya:ih("appVerificationDisabledForTesting")}}),hh(xc.prototype,{confirm:{name:"confirm",j:[rh("verificationCode")]}}),dh(Ki,"fromJSON",(function(e){e=c(e)?JSON.parse(e):e;for(var t,n=[eo,fo,bo,Xi],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[lh(rh(),oh(),"json")]),dh(vo,"credential",(function(e,t){return new po(e,t)}),[rh("email"),rh("password")]),hh(po.prototype,{A:{name:"toJSON",j:[rh(null,!0)]}}),hh(io.prototype,{wa:{name:"addScope",j:[rh("scope")]},Ea:{name:"setCustomParameters",j:[oh("customOAuthParameters")]}}),dh(io,"credential",oo,[lh(rh(),oh(),"token")]),dh(vo,"credentialWithLink",go,[rh("email"),rh("emailLink")]),hh(so.prototype,{wa:{name:"addScope",j:[rh("scope")]},Ea:{name:"setCustomParameters",j:[oh("customOAuthParameters")]}}),dh(so,"credential",ao,[lh(rh(),oh(),"token")]),hh(uo.prototype,{wa:{name:"addScope",j:[rh("scope")]},Ea:{name:"setCustomParameters",j:[oh("customOAuthParameters")]}}),dh(uo,"credential",co,[lh(rh(),lh(oh(),ah()),"idToken"),lh(rh(),ah(),"accessToken",!0)]),hh(lo.prototype,{Ea:{name:"setCustomParameters",j:[oh("customOAuthParameters")]}}),dh(lo,"credential",ho,[lh(rh(),oh(),"token"),rh("secret",!0)]),hh(ro.prototype,{wa:{name:"addScope",j:[rh("scope")]},credential:{name:"credential",j:[lh(rh(),lh(oh(),ah()),"optionsOrIdToken"),lh(rh(),ah(),"accessToken",!0)]},Ea:{name:"setCustomParameters",j:[oh("customOAuthParameters")]}}),hh(Ji.prototype,{A:{name:"toJSON",j:[rh(null,!0)]}}),hh(Yi.prototype,{A:{name:"toJSON",j:[rh(null,!0)]}}),dh(_o,"credential",Co,[rh("verificationId"),rh("verificationCode")]),hh(_o.prototype,{Va:{name:"verifyPhoneNumber",j:[rh("phoneNumber"),ch()]}}),hh(mo.prototype,{A:{name:"toJSON",j:[rh(null,!0)]}}),hh(ei.prototype,{toJSON:{name:"toJSON",j:[rh(null,!0)]}}),hh(No.prototype,{toJSON:{name:"toJSON",j:[rh(null,!0)]}}),hh(Ao.prototype,{toJSON:{name:"toJSON",j:[rh(null,!0)]}}),hh(eh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),dh(ii,"parseLink",pi,[rh("link")]),function(){if(void 0===n||!n.INTERNAL||!n.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Qr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:wl,AuthCredential:Ki,Error:ei};dh(e,"EmailAuthProvider",vo,[]),dh(e,"FacebookAuthProvider",io,[]),dh(e,"GithubAuthProvider",so,[]),dh(e,"GoogleAuthProvider",uo,[]),dh(e,"TwitterAuthProvider",lo,[]),dh(e,"OAuthProvider",ro,[rh("providerId")]),dh(e,"SAMLAuthProvider",no,[rh("providerId")]),dh(e,"PhoneAuthProvider",_o,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(e){return!!(e&&e instanceof wl)}}]),dh(e,"RecaptchaVerifier",eh,[lh(rh(),{name:"",M:"an HTML element",optional:!1,N:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),oh("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof n.app.App)}}]),dh(e,"ActionCodeURL",ii,[]),n.INTERNAL.registerService("auth",(function(e,t){return t({INTERNAL:{getUid:x((e=new wl(e)).getUid,e),getToken:x(e.cc,e),addAuthTokenListener:x(e.Wb,e),removeAuthTokenListener:x(e.Ec,e)}}),e}),e,(function(e,t){if("create"===e)try{t.auth()}catch(e){}})),n.INTERNAL.extendNamespace({User:Lc})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})})),e.entry="dist/auth.js"})),e.pkg("@firebase/database",{},(function(e){return e.file("dist/index.cjs.js",(function(e,t,n,r,i){var o=t("process");Object.defineProperty(e,"__esModule",{value:!0});var s,a,u=(s=t("@firebase/app"))&&"object"==typeof s&&"default"in s?s.default:s,c=t("tslib"),l=t("@firebase/util"),h=t("@firebase/logger"),p=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),l.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:l.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),d=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return l.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),f=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new p(t)}}catch(e){}return new d},v=f("localStorage"),g=f("sessionStorage"),y=new h.Logger("@firebase/database"),m="FIREBASE_DATABASE_EMULATOR_HOST",b=(a=1,function(){return a++}),w=function(e){var t=l.stringToByteArray(e),n=new l.Sha1;n.update(t);var r=n.digest();return l.base64.encodeByteArray(r)},_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++)Array.isArray(e[r])||e[r]&&"object"==typeof e[r]&&"number"==typeof e[r].length?n+=_.apply(null,e[r]):"object"==typeof e[r]?n+=l.stringify(e[r]):n+=e[r],n+=" ";return n},C=null,E=!0,x=function(e,t){l.assert(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(y.logLevel=h.LogLevel.VERBOSE,C=y.log.bind(y),t&&g.set("logging_enabled",!0)):"function"==typeof e?C=e:(C=null,g.remove("logging_enabled"))},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===E&&(E=!1,null===C&&!0===g.get("logging_enabled")&&x(!0)),C){var n=_.apply(null,e);C(n)}},k=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];S.apply(void 0,c.__spread([e],t))}},T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,c.__spread(e));y.error(n)},O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,c.__spread(e));throw y.error(n),new Error(n)},I=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+_.apply(void 0,c.__spread(e));y.warn(n)},A=function(e){return"number"==typeof e&&(e!=e||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY)},N="[MIN_NAME]",R="[MAX_NAME]",P=function(e,t){if(e===t)return 0;if(e===N||t===R)return-1;if(t===N||e===R)return 1;var n=q(e),r=q(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},M=function(e,t){return e===t?0:e<t?-1:1},L=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+l.stringify(t))},D=function(e){if("object"!=typeof e||null===e)return l.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=l.stringify(t[i]),r+=":",r+=D(e[t[i]]);return r+="}"},j=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function F(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var V=function(e){l.assert(!A(e),"Invalid JSON number");var t,n,r,i,o,s,a;for(0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074)))),s=[],o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse(),a=s.join("");var u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()},B=new RegExp("^-?(0*)\\d{1,10}$"),q=function(e){if(B.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},U=function(e){try{e()}catch(e){setTimeout((function(){var t=e.stack||"";throw I("Exception was thrown by user callback.",t),e}),Math.floor(0))}},H=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},W=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},z=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=P(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),Q=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=l.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=l.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=l.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0==this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),K="long_polling",G=function(){function e(e,t,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=v.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&v.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(l.assert("string"==typeof e,"typeof type must == string"),l.assert("object"==typeof t,"typeof params must == object"),"websocket"===e)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==K)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return F(t,(function(e,t){r.push(e+"="+t)})),n+r.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}();var Y,$,X,J,Z,ee=function(e){var t=te(e),n=t.namespace;"firebase"===t.domain&&O(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!=n||"localhost"===t.domain||O("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new G(t.host,t.secure,n,r,"",n!=t.subdomain),path:new z(t.pathString)}},te=function(e){var t="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof e){var l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));var h=e.indexOf("/");-1===h&&(h=e.length);var p=e.indexOf("?");-1===p&&(p=e.length),t=e.substring(0,Math.min(h,p)),h<p&&(i=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(h,p)));var d=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=c.__values(e.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):I("Invalid query segment '"+s+"' in query '"+e+"'")}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,p)));(l=t.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(t.substring(l+1),10)):l=e.length;var f=t.split(".");3===f.length?(n=f[1],o=r=f[0].toLowerCase()):2===f.length?n=f[0]:"localhost"===f[0].slice(0,l).toLowerCase()&&(n="localhost"),"ns"in d&&(o=d.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},ne=/[\[\].#$\/\u0000-\u001F\u007F]/,re=/[\[\].#$\u0000-\u001F\u007F]/,ie=function(e){return"string"==typeof e&&0!==e.length&&!ne.test(e)},oe=function(e){return"string"==typeof e&&0!==e.length&&!re.test(e)},se=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!A(e)||e&&"object"==typeof e&&l.contains(e,".sv")},ae=function(e,t,n,r,i){i&&void 0===n||ue(l.errorPrefix(e,t,i),n,r)},ue=function(e,t,n){var r=n instanceof z?new Q(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(e+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(A(t))throw new Error(e+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>10485760/3&&l.stringLength(t)>10485760)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(F(t,(function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!ie(t)))throw new Error(e+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),ue(e,n,r),r.pop()})),i&&o)throw new Error(e+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ce=function(e,t,n,r,i){if(!i||void 0!==n){var o=l.errorPrefix(e,t,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];F(n,(function(e,t){var n=new z(e);if(ue(o,t,r.child(n)),".priority"===n.getBack()&&!se(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ie(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(z.comparePaths);var s=null;for(n=0;n<t.length;n++){if(r=t[n],null!==s&&s.contains(r))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},le=function(e,t,n,r){if(!r||void 0!==n){if(A(n))throw new Error(l.errorPrefix(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!se(n))throw new Error(l.errorPrefix(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},he=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(l.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},pe=function(e,t,n,r){if(!(r&&void 0===n||ie(n)))throw new Error(l.errorPrefix(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},de=function(e,t,n,r){if(!(r&&void 0===n||oe(n)))throw new Error(l.errorPrefix(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fe=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),de(e,t,n,r)},ve=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},ge=function(e,t,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ie(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),oe(e)}(r))throw new Error(l.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ye=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(l.errorPrefix(e,t,r)+"must be a boolean.")},me=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){l.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),l.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new l.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){l.validateArgCount("OnDisconnect.remove",0,1,arguments.length),ve("OnDisconnect.remove",this.path_),l.validateCallback("OnDisconnect.remove",1,e,!0);var t=new l.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){l.validateArgCount("OnDisconnect.set",1,2,arguments.length),ve("OnDisconnect.set",this.path_),ae("OnDisconnect.set",1,e,this.path_,!1),l.validateCallback("OnDisconnect.set",2,t,!0);var n=new l.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){l.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),ve("OnDisconnect.setWithPriority",this.path_),ae("OnDisconnect.setWithPriority",1,e,this.path_,!1),le("OnDisconnect.setWithPriority",2,t,!1),l.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new l.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(l.validateArgCount("OnDisconnect.update",1,2,arguments.length),ve("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,I("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ce("OnDisconnect.update",1,e,this.path_,!1),l.validateCallback("OnDisconnect.update",2,t,!0);var i=new l.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},e}(),be=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return l.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),we=(Y="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$=0,X=[],function(e){var t,n=e===$;$=e;var r=new Array(8);for(t=7;t>=0;t--)r[t]=Y.charAt(e%64),e=Math.floor(e/64);l.assert(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;t>=0&&63===X[t];t--)X[t]=0;X[t]++}else for(t=0;t<12;t++)X[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=Y.charAt(X[t]);return l.assert(20===i.length,"nextPushId: Length should be 20."),i}),_e=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Ce=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new _e(N,e),r=new _e(N,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return _e.MIN},e}(),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.__extends(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return J},set:function(e){J=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return P(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw l.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return _e.MIN},t.prototype.maxPost=function(){return new _e(R,J)},t.prototype.makePost=function(e,t){return l.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new _e(e,J)},t.prototype.toString=function(){return".key"},t}(Ce),xe=new Ee;var Se,ke,Te,Oe=function(e){return"number"==typeof e?"number:"+V(e):"string:"+e},Ie=function(e){if(e.isLeafNode()){var t=e.val();l.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&l.contains(t,".sv"),"Priority must be a string or number.")}else l.assert(e===Z||e.isEmpty(),"priority of unexpected type.");l.assert(e===Z||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ae=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,l.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ie(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return Se},set:function(e){Se=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(l.assert(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Oe(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?V(this.value_):this.value_,this.lazyHash_=w(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(l.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return l.assert(i>=0,"Unknown leaf type: "+n),l.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();var Ne,Re,Pe=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?P(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return _e.MIN},t.prototype.maxPost=function(){return new _e(R,new Ae("[PRIORITY-POST]",Te))},t.prototype.makePost=function(e,t){var n=ke(e);return new _e(t,new Ae("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Ce)),Me=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Le=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:je.EMPTY_NODE,this.right=null!=o?o:je.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r,i;return(i=(r=n(e,(i=this).key))<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return je.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return je.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){var e;if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");if((e=this.left.check_())!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),De=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Le(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),je=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Le.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Le.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Me(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Me(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Me(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Me(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new De,e}(),Fe=Math.log(2),Ve=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Fe,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),Be=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,s,a=r-t;if(0==a)return null;if(1==a)return o=e[t],s=n?n(o):o,new Le(s,o.node,Le.BLACK,null,null);var u=parseInt(a/2,10)+t,c=i(t,u),l=i(u+1,r);return o=e[u],s=n?n(o):o,new Le(s,o.node,Le.BLACK,c,l)},o=function(t){for(var r=null,o=null,s=e.length,a=function(t,r){var o=s-t,a=s;s-=t;var c=i(o+1,a),l=e[o],h=n?n(l):l;u(new Le(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?a(h,Le.BLACK):(a(h,Le.BLACK),a(h,Le.RED))}return o}(new Ve(e.length));return new je(r||t,o)},qe={},Ue=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return l.assert(qe&&Pe,"ChildrenNode.ts has not been loaded"),Ne=Ne||new e({".priority":qe},{".priority":Pe})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=l.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof je?t:null},e.prototype.hasIndex=function(e){return l.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){l.assert(t!==xe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,s=n.getIterator(_e.Wrap),a=s.getNext();a;)o=o||t.isDefinedOn(a.node),i.push(a),a=s.getNext();r=o?Be(i,t.getCompare()):qe;var u=t.toString(),h=c.__assign({},this.indexSet_);h[u]=t;var p=c.__assign({},this.indexes_);return p[u]=r,new e(p,h)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(l.map(this.indexes_,(function(e,i){var o=l.safeGet(r.indexSet_,i);if(l.assert(o,"Missing index implementation for "+i),e===qe){if(o.isDefinedOn(t.node)){for(var s=[],a=n.getIterator(_e.Wrap),u=a.getNext();u;)u.name!=t.name&&s.push(u),u=a.getNext();return s.push(t),Be(s,o.getCompare())}return qe}var c=n.get(t.name),h=e;return c&&(h=h.remove(new _e(t.name,c))),h.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(l.map(this.indexes_,(function(e){if(e===qe)return e;var r=n.get(t.name);return r?e.remove(new _e(t.name,r)):e})),this.indexSet_)},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function He(e,t){return P(e.name,t.name)}function We(e,t){return P(e,t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ie(this.priorityNode_),this.children_.isEmpty()&&l.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Re||(Re=new e(new je(We),null,Ue.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Re},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Re:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(l.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i=new _e(t,n),o=void 0,s=void 0;return n.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(i,this.children_)),r=o.isEmpty()?Re:this.priorityNode_,new e(o,r,s)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;l.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Pe,(function(s,a){n[s]=a.val(t),r++,o&&e.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!t&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Oe(this.getPriority().val())+":"),this.forEachChild(Pe,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":w(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new _e(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new _e(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new _e(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,_e.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,_e.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Qe?-1:0},e.prototype.withIndex=function(t){if(t===xe||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===xe||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Pe),r=t.getIterator(Pe),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===xe?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),Qe=new(function(e){function t(){return e.call(this,new je(We),ze.EMPTY_NODE,Ue.Default)||this}return c.__extends(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return ze.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(ze));Object.defineProperties(_e,{MIN:{value:new _e(N,ze.EMPTY_NODE)},MAX:{value:new _e(R,Qe)}}),Ee.__EMPTY_NODE=ze.EMPTY_NODE,Ae.__childrenNodeConstructor=ze,Z=Qe,function(e){Te=e}(Qe);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ke=!0;function Ge(e,t){if(void 0===t&&(t=null),null===e)return ze.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),l.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Ae(e,Ge(t));if(e instanceof Array||!Ke){var n=ze.EMPTY_NODE;return F(e,(function(t,r){if(l.contains(e,t)&&"."!==t.substring(0,1)){var i=Ge(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(Ge(t))}var r=[],i=!1;if(F(e,(function(e,t){if("."!==e.substring(0,1)){var n=Ge(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new _e(e,n)))}})),0==r.length)return ze.EMPTY_NODE;var o=Be(r,He,(function(e){return e.name}),We);if(i){var s=Be(r,Pe.getCompare());return new ze(o,Ge(t),new Ue({".priority":s},{".priority":Pe}))}return new ze(o,Ge(t),Ue.Default)}!function(e){ke=e}(Ge);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ye,$e,Xe=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?P(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return _e.MIN},t.prototype.maxPost=function(){return _e.MAX},t.prototype.makePost=function(e,t){var n=Ge(e);return new _e(t,n)},t.prototype.toString=function(){return".value"},t}(Ce)),Je=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,l.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return c.__extends(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?P(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=Ge(e),r=ze.EMPTY_NODE.updateChild(this.indexPath_,n);return new _e(t,r)},t.prototype.maxPost=function(){var e=ze.EMPTY_NODE.updateChild(this.indexPath_,Qe);return new _e(R,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(Ce),Ze=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return l.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return l.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return l.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return l.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){l.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),de("DataSnapshot.child",1,t,!1);var n=new z(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,Pe)},e.prototype.hasChild=function(e){l.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),de("DataSnapshot.hasChild",1,e,!1);var t=new z(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return l.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(l.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),l.validateCallback("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return t(new e(i,n.ref_.child(r),Pe))}))},e.prototype.hasChildren=function(){return l.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return l.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return l.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),et=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+l.stringify(this.snapshot.exportVal())},e}(),tt=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),nt=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new et("value",this,new Ze(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){l.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new tt(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),rt=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,l.contains(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new tt(this,e,t):null},e.prototype.createEvent=function(e,t){l.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new et(e.type,this,new Ze(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){l.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||t.callbacks_[s]&&this.callbacks_[a]&&t.callbacks_[s]!==this.callbacks_[a])}return i.every((function(e){return t.callbacks_[e]===n.callbacks_[e]}))}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),it=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return l.assert(Ye,"Reference.ts has not been loaded"),Ye},set:function(e){Ye=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===xe){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!=N)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!=R)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===Pe){if(null!=t&&!se(t)||null!=n&&!se(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(l.assert(e.getIndex()instanceof Je||e.getIndex()===Xe,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return l.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){l.validateArgCount("Query.on",2,4,arguments.length),he("Query.on",1,t,!1),l.validateCallback("Query.on",2,n,!1);var o=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[t]=n,this.onChildEvent(s,o.cancel,o.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new nt(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new rt(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){l.validateArgCount("Query.off",0,3,arguments.length),he("Query.off",1,e,!0),l.validateCallback("Query.off",2,t,!0),l.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===e){var o=t||null;r=new nt(o,null,n||null)}else e&&(t&&((i={})[e]=t),r=new rt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,i){var o=this;l.validateArgCount("Query.once",1,4,arguments.length),he("Query.once",1,t,!1),l.validateCallback("Query.once",2,n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,i),a=!0,u=new l.Deferred;u.promise.catch((function(){}));var c=function(e){a&&(a=!1,o.off(t,c),n&&n.bind(s.context)(e),u.resolve(e))};return this.on(t,c,(function(e){o.off(t,c),s.cancel&&s.cancel.bind(s.context)(e),u.reject(e)})),u.promise},e.prototype.limitToFirst=function(t){if(l.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(l.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(l.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');de("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new z(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Je(n),i=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){l.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(xe);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){l.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Pe);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){l.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Xe);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),l.validateArgCount("Query.startAt",0,2,arguments.length),ae("Query.startAt",1,t,this.path,!0),pe("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),l.validateArgCount("Query.endAt",0,2,arguments.length),ae("Query.endAt",1,t,this.path,!0),pe("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(l.validateArgCount("Query.equalTo",1,2,arguments.length),ae("Query.equalTo",1,e,this.path,!1),pe("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return l.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return l.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=D(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(l.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=this.path.equals(t.path),o=this.queryIdentifier()===t.queryIdentifier();return r&&i&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,l.validateCallback(e,3,r.cancel,!0),r.context=n,l.validateContextObject(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(l.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),ot=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&this.children.size>0){var t=e.getFront();return e=e.popFront(),this.children.has(t)?this.children.get(t).find(e):null}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,n);else{var r=t.getFront();this.children.has(r)||this.children.set(r,new e);var i=this.children.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(Pe,(function(e,t){n.remember(new z(e),t)})),this.forget(e)}if(this.children.size>0){var r=e.getFront();if(e=e.popFront(),this.children.has(r))this.children.get(r).forget(e)&&this.children.delete(r);return 0===this.children.size}return!0},e.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild((function(n,r){var i=new z(e.toString()+"/"+n);r.forEachTree(i,t)}))},e.prototype.forEachChild=function(e){this.children.forEach((function(t,n){e(n,t)}))},e}(),st=function(e,t){return e&&"object"==typeof e?(l.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e},at=function(e,t){var n,r=e.getPriority().val(),i=st(r,t);if(e.isLeafNode()){var o=e,s=st(o.getValue(),t);return s!==o.getValue()||i!==o.getPriority().val()?new Ae(s,Ge(i)):e}var a=e;return n=a,i!==a.getPriority().val()&&(n=n.updatePriority(new Ae(i))),a.forEachChild(Pe,(function(e,r){var i=at(r,t);i!==r&&(n=n.updateImmediateChild(e,i))})),n};!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}($e||($e={}));var ut,ct,lt=function(){function e(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,l.assert(!r||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),ht=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=$e.ACK_USER_WRITE,this.source=lt.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return l.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new z(t));return new e(z.Empty,n,this.revert)}return l.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}(),pt=function(){return ut||(ut=new je(M)),ut},dt=function(){function e(e,t){void 0===t&&(t=pt()),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return F(t,(function(e,t){n=n.set(new z(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:z.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=i?{path:new z(n).child(i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=(this.children.get(r)||e.Empty).set(t.popFront(),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r=t.getFront(),i=(this.children.get(r)||e.Empty).setTree(t.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(z.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(e.child(r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,z.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,z.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(t.popFront(),n.child(i),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(z.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(e.child(n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e.Empty=new e(null),e}(),ft=function(){function e(e,t){this.source=e,this.path=t,this.type=$e.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,z.Empty):new e(this.source,this.path.popFront())},e}(),vt=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=$e.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,z.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),gt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=$e.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new z(t));return n.isEmpty()?null:n.value?new vt(this.source,z.Empty,n.value):new e(this.source,z.Empty,n)}return l.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),yt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),mt=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new yt(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new yt(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new yt(ze.EMPTY_NODE,!1,!1),new yt(ze.EMPTY_NODE,!1,!1)),e}(),bt=function(){function e(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}(),wt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,o){l.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()==n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(bt.childRemovedChange(t,s)):l.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(bt.childAddedChange(t,n)):o.trackChildChange(bt.childChangedChange(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Pe,(function(e,r){t.hasChild(e)||n.trackChildChange(bt.childRemovedChange(e,r))})),t.isLeafNode()||t.forEachChild(Pe,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(bt.childChangedChange(t,r,i))}else n.trackChildChange(bt.childAddedChange(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?ze.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),_t=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;l.assert(t==bt.CHILD_ADDED||t==bt.CHILD_CHANGED||t==bt.CHILD_REMOVED,"Only child changes supported for tracking"),l.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(t==bt.CHILD_ADDED&&i==bt.CHILD_REMOVED)this.changeMap.set(n,bt.childChangedChange(n,e.snapshotNode,r.snapshotNode));else if(t==bt.CHILD_REMOVED&&i==bt.CHILD_ADDED)this.changeMap.delete(n);else if(t==bt.CHILD_REMOVED&&i==bt.CHILD_CHANGED)this.changeMap.set(n,bt.childRemovedChange(n,r.oldSnap));else if(t==bt.CHILD_CHANGED&&i==bt.CHILD_ADDED)this.changeMap.set(n,bt.childAddedChange(n,e.snapshotNode));else{if(t!=bt.CHILD_CHANGED||i!=bt.CHILD_CHANGED)throw l.assertionError("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,bt.childChangedChange(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),Ct=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),Et=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new yt(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}(),xt=function(e,t){this.viewCache=e,this.changes=t},St=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){l.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),l.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,i){var o,s,a=new _t;if(n.type===$e.OVERWRITE){var u=n;u.source.fromUser?o=this.applyUserOverwrite_(t,u.path,u.snap,r,i,a):(l.assert(u.source.fromServer,"Unknown source."),s=u.source.tagged||t.getServerCache().isFiltered()&&!u.path.isEmpty(),o=this.applyServerOverwrite_(t,u.path,u.snap,r,i,s,a))}else if(n.type===$e.MERGE){var c=n;c.source.fromUser?o=this.applyUserMerge_(t,c.path,c.children,r,i,a):(l.assert(c.source.fromServer,"Unknown source."),s=c.source.tagged||t.getServerCache().isFiltered(),o=this.applyServerMerge_(t,c.path,c.children,r,i,s,a))}else if(n.type===$e.ACK_USER_WRITE){var h=n;o=h.revert?this.revertUserWrite_(t,h.path,r,i,a):this.ackUserWrite_(t,h.path,h.affectedTree,r,i,a)}else{if(n.type!==$e.LISTEN_COMPLETE)throw l.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(t,n.path,r,a)}var p=a.getChanges();return e.maybeAddValueEvent_(t,o,p),new xt(o,p)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(bt.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var s=void 0,a=void 0;if(t.isEmpty())if(l.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),c=u instanceof ze?u:ze.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var p=n.calcCompleteEventCache(e.getCompleteServerSnap());s=this.filter_.updateFullNode(e.getEventCache().getNode(),p,i)}else{var d=t.getFront();if(".priority"==d){l.assert(1==t.getLength(),"Can't have a priority with additional path components");var f=o.getNode();a=e.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(t,f,a);s=null!=v?this.filter_.updatePriority(f,v):o.getNode()}else{var g=t.popFront(),y=void 0;if(o.isCompleteForChild(d)){a=e.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),a);y=null!=m?o.getNode().getImmediateChild(d).updateChild(g,m):o.getNode().getImmediateChild(d)}else y=n.calcCompleteChild(d,e.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),d,y,g,r,i):o.getNode()}}return e.updateEventSnap(s,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,s){var a,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(t,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&t.getLength()>1)return e;var p=t.popFront(),d=u.getNode().getImmediateChild(h).updateChild(p,n);a=".priority"==h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,p,Ct,null)}var f=e.updateServerSnap(a,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),v=new Et(r,f,i);return this.generateEventCacheAfterServerEvent_(f,t,r,v,s)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var s,a,u=e.getEventCache(),c=new Et(r,e,i);if(t.isEmpty())a=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),s=e.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=t.getFront();if(".priority"===l)a=this.filter_.updatePriority(e.getEventCache().getNode(),n),s=e.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),p=u.getNode().getImmediateChild(l),d=void 0;if(h.isEmpty())d=n;else{var f=c.getCompleteChild(l);d=null!=f?".priority"===h.getBack()&&f.getChild(h.parent()).isEmpty()?f:f.updateChild(h,n):ze.EMPTY_NODE}if(p.equals(d))s=e;else{var v=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=e.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,s){var a=this,u=t;return r.foreach((function(r,c){var l=n.child(r);e.cacheHasChild_(t,l.getFront())&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=n.child(r);e.cacheHasChild_(t,l.getFront())||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},e.prototype.applyMerge_=function(e,t){return t.foreach((function(t,n){e=e.updateChild(t,n)})),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,s){var a=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var u,c=e;u=t.isEmpty()?n:dt.Empty.setTree(t,n);var l=e.getServerCache().getNode();return u.children.inorderTraversal((function(t,n){if(l.hasChild(t)){var u=e.getServerCache().getNode().getImmediateChild(t),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new z(t),h,r,i,o,s)}})),u.children.inorderTraversal((function(t,n){var u=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!l.hasChild(t)&&!u){var h=e.getServerCache().getNode().getImmediateChild(t),p=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new z(t),p,r,i,o,s)}})),c},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var s=e.getServerCache().isFiltered(),a=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,a.getNode().getChild(t),r,i,s,o);if(t.isEmpty()){var u=dt.Empty;return a.getNode().forEachChild(xe,(function(e,t){u=u.set(new z(e),t)})),this.applyServerMerge_(e,t,u,r,i,s,o)}return e}var c=dt.Empty;return n.foreach((function(e,n){var r=t.child(e);a.isCompleteForPath(r)&&(c=c.set(e,a.getNode().getChild(r)))})),this.applyServerMerge_(e,t,c,r,i,s,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,Ct,r)},e.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var s=new Et(n,e,r),a=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var c=void 0;if(e.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var h=e.getServerCache().getNode();l.assert(h instanceof ze,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var p=t.getFront(),d=n.calcCompleteChild(p,e.getServerCache());null==d&&e.getServerCache().isCompleteForChild(p)&&(d=a.getImmediateChild(p)),(u=null!=d?this.filter_.updateChild(a,p,d,t.popFront(),s,i):e.getEventCache().getNode().hasChild(p)?this.filter_.updateChild(a,p,ze.EMPTY_NODE,t.popFront(),s,i):a).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(z.Empty),e.updateEventSnap(u,o,this.filter_.filtersNodes())},e}(),kt=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach((function(e){e.type===bt.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(bt.childMovedChange(e.childName,e.snapshotNode))})),this.generateEventsForType_(i,bt.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,bt.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,bt.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,bt.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,bt.VALUE,e,n,t),i},e.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,s=n.filter((function(e){return e.type===t}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(t){var n=o.materializeSingleChange_(t,i);r.forEach((function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))}))}))},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw l.assertionError("Should only compare child_ events.");var n=new _e(e.childName,e.snapshotNode),r=new _e(t.childName,t.snapshotNode);return this.index_.compare(n,r)},e}(),Tt=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new wt(n.getIndex()),i=n.getNodeFilter();this.processor_=new St(i);var o=t.getServerCache(),s=t.getEventCache(),a=r.updateFullNode(ze.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(ze.EMPTY_NODE,s.getNode(),null),c=new yt(a,o.isFullyInitialized(),r.filtersNodes()),l=new yt(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new mt(l,c),this.eventGenerator_=new kt(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){l.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(e){t=t;var i=e.createCancelEvent(t,r);i&&n.push(i)}))}if(e){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(e)){if(e.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===$e.MERGE&&null!==e.source.queryId&&(l.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),l.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),l.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];t.getNode().isLeafNode()||t.getNode().forEachChild(Pe,(function(e,t){n.push(bt.childAddedChange(e,t))}));return t.isFullyInitialized()&&n.push(bt.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},e}(),Ot=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return l.assert(ct,"Reference.ts has not been loaded"),ct},set:function(e){l.assert(!ct,"__referenceConstructor has already been defined"),ct=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return 0===this.views.size},e.prototype.applyOperation=function(e,t,n){var r,i,o=e.source.queryId;if(null!==o){var s=this.views.get(o);return l.assert(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(e,t,n)}var a=[];try{for(var u=c.__values(this.views.values()),h=u.next();!h.done;h=u.next()){s=h.value;a=a.concat(s.applyOperation(e,t,n))}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},e.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof ze?(a=n.calcCompleteEventChildren(r),u=!1):(a=ze.EMPTY_NODE,u=!1);var c=new mt(new yt(a,u,!1),new yt(r,i,!1));s=new Tt(e,c),this.views.set(o,s)}return s.addEventRegistration(t),s.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,r){var i,o,s=t.queryIdentifier(),a=[],u=[],l=this.hasCompleteView();if("default"===s)try{for(var h=c.__values(this.views.entries()),p=h.next();!p.done;p=h.next()){var d=c.__read(p.value,2),f=d[0],v=d[1];u=u.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(f),v.getQuery().getQueryParams().loadsAllData()||a.push(v.getQuery()))}}catch(e){i={error:e}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(v=this.views.get(s))&&(u=u.concat(v.removeEventRegistration(n,r)),v.isEmpty()&&(this.views.delete(s),v.getQuery().getQueryParams().loadsAllData()||a.push(v.getQuery())));return l&&!this.hasCompleteView()&&a.push(new e.__referenceConstructor(t.repo,t.path)),{removed:a,events:u}},e.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=c.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},e.prototype.getCompleteServerCache=function(e){var t,n,r=null;try{for(var i=c.__values(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){var e,t;try{for(var n=c.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e}(),It=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new dt(n));var r=this.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,s=z.relativePath(i,t);return o=o.updateChild(s,n),new e(this.writeTree_.set(i,o))}var a=new dt(n);return new e(this.writeTree_.setTree(t,a))},e.prototype.addWrites=function(e,t){var n=this;return F(t,(function(t,r){n=n.addWrite(e.child(t),r)})),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,dt.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(z.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Pe,(function(t,n){e.push(new _e(t,n))})):this.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new _e(t,n.value))})),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new dt(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(e){return function e(t,n,r){if(null!=n.value)return r.updateChild(t,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(l.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=e(t.child(n),o,r)})),r.getChild(t).isEmpty()||null===i||(r=r.updateChild(t.child(".priority"),i)),r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(z.Empty,this.writeTree_,e)},e.Empty=new e(new dt(null)),e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var At=function(){function e(){this.visibleWrites_=It.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new Nt(e,this)},e.prototype.addOverwrite=function(e,t,n,r){l.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){l.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex((function(t){return t.writeId===e}));l.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var a=this.allWrites_[s];a.visible&&(s>=n&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}if(i){if(o)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):F(r.children,(function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(r.path.child(e))}));return!0}return!1},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(t);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(z.Empty)){var s=e.layerTree_(this.allWrites_,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))}),t);c=n||ze.EMPTY_NODE;return s.apply(c)}return null}var a=this.visibleWrites_.getCompleteNode(t);if(null!=a)return a;var u=this.visibleWrites_.childCompoundWrite(t);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(z.Empty)){var c=n||ze.EMPTY_NODE;return u.apply(c)}return null},e.prototype.calcCompleteEventChildren=function(e,t){var n=ze.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(Pe,(function(e,t){n=n.updateImmediateChild(e,t)})),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(Pe,(function(e,t){var r=i.childCompoundWrite(new z(e)).apply(t);n=n.updateImmediateChild(e,r)})),i.getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach((function(e){n=n.updateImmediateChild(e.name,e.node)})),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){l.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(e),u=a.getCompleteNode(z.Empty);if(null!=u)s=u;else{if(null==t)return[];s=a.apply(t)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),p=h.getNext();p&&c.length<r;)0!==l(p,n)&&c.push(p),p=h.getNext();return c},e.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,z.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var r=It.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=z.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=z.relativePath(s,n),r=r.addWrite(z.Empty,o.snap.getChild(a)));else{if(!o.children)throw l.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))a=z.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=z.relativePath(s,n)).isEmpty())r=r.addWrites(z.Empty,o.children);else{var u=l.safeGet(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(z.Empty,c)}}}}}return r},e}(),Nt=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),Rt=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=dt.Empty,this.pendingWriteTree_=new At,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new vt(lt.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=dt.fromObject(t);return this.applyOperationToSyncPoints_(new gt(lt.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=dt.Empty;return null!=n.snap?r=r.set(z.Empty,!0):F(n.children,(function(e,t){r=r.set(new z(e),t)})),this.applyOperationToSyncPoints_(new ht(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new vt(lt.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=dt.fromObject(t);return this.applyOperationToSyncPoints_(new gt(lt.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new ft(lt.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=e.parseQueryKey_(i),s=o.path,a=o.queryId,u=z.relativePath(s,t),c=new vt(lt.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var o=e.parseQueryKey_(i),s=o.path,a=o.queryId,u=z.relativePath(s,t),c=dt.fromObject(n),l=new gt(lt.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),o=i.path,s=i.queryId,a=z.relativePath(o,t),u=new ft(lt.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(e,t){var n=z.relativePath(e,r);i=i||t.getCompleteServerCache(n),o=o||t.hasCompleteView()}));var s,a=this.syncPointTree_.get(r);(a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(z.Empty)):(a=new Ot,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i)?s=!0:(s=!1,i=ze.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=t.getCompleteServerCache(z.Empty);n&&(i=i.updateImmediateChild(e,n))})));var u=a.viewExistsForQuery(t);if(!u&&!t.getQueryParams().loadsAllData()){var c=e.makeQueryKey_(t);l.assert(!this.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=e.getNextQueryTag_();this.queryToTagMap.set(c,h),this.tagToQueryMap.set(h,c)}var p=this.pendingWriteTree_.childWrites(r),d=a.addEventRegistration(t,n,p,i,s);if(!u&&!o){var f=a.viewForQuery(t);d=d.concat(this.setupListener_(t,f))}return d},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===t.queryIdentifier()||s.viewExistsForQuery(t))){var u=s.removeEventRegistration(t,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(e){return e.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(e,t){return t.hasCompleteView()}));if(l&&!h){var p=this.syncPointTree_.subtree(o);if(!p.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(p),f=0;f<d.length;++f){var v=d[f],g=v.getQuery(),y=this.createListenerForView_(v);this.listenProvider_.startListening(e.queryForListening_(g),this.tagForQuery_(g),y.hashFn,y.onComplete)}}if(!h&&c.length>0&&!r)if(l){this.listenProvider_.stopListening(e.queryForListening_(t),null)}else c.forEach((function(t){var n=i.queryToTagMap.get(e.makeQueryKey_(t));i.listenProvider_.stopListening(e.queryForListening_(t),n)}));this.removeTags_(c)}return a},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,(function(t,n){var r=z.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold((function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),F(n,(function(e,t){r=r.concat(t)})),r}))},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var r=t.path,i=this.tagForQuery_(t),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(e.queryForListening_(t),i,o.hashFn,o.onComplete),a=this.syncPointTree_.subtree(r);if(i)l.assert(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=a.fold((function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map((function(e){return e.getQuery()})))),F(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var h=u[c];this.listenProvider_.stopListening(e.queryForListening_(h),this.tagForQuery_(h))}return s},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||ze.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==e?n="Client doesn't have permission to access the desired data.":"unavailable"==e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(e,n);return t.removeEventRegistration(n,null,i)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return l.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new z(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);l.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(z.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(z.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(z.Empty));var o=[],s=e.path.getFront(),a=e.operationForChild(s),u=t.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(z.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(z.Empty));var s=[];return t.children.inorderTraversal((function(t,o){var a=n?n.getImmediateChild(t):null,u=r.child(t),c=e.operationForChild(t);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(e,r,n))),s},e.nextQueryTag_=1,e}(),Pt=function(){function e(){this.rootNode_=ze.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),Mt=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return this.app_.INTERNAL.getToken(e).then(null,(function(e){return e&&"auth/token-not-initialized"===e.code?(S("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}))},e.prototype.addTokenChangeListener=function(e){this.app_.INTERNAL.addAuthTokenListener(e)},e.prototype.removeTokenChangeListener=function(e){this.app_.INTERNAL.removeAuthTokenListener(e)},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',I(e)},e}(),Lt=function(e){this.accessToken=e},Dt=function(){function e(e){this.app_=e}return e.prototype.getToken=function(e){return Promise.resolve(new Lt("owner"))},e.prototype.addTokenChangeListener=function(e){},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){I('Database emulator unexpectedly rejected fake "owner" credentials.')},e}(),jt=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),l.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return l.deepCopy(this.counters_)},e}(),Ft=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new jt),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),Vt=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=c.__assign({},e);return this.last_&&F(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),Bt=1e4,qt=3e4,Ut=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Vt(e);var n=Bt+(qt-Bt)*Math.random();W(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;F(t,(function(t,i){i>0&&l.contains(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),W(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}(),Ht=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new Wt(i)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.equals(e)}))},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_((function(t){return t.contains(e)||e.contains(t)}))},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),Wt=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();C&&S("event: "+t.toString()),U(n)}}},e.prototype.getPath=function(){return this.path_},e}(),zt=function(){function e(e){this.allowedEvents_=e,this.listeners_={},l.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=c.__spread(this.listeners_[e]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){l.assert(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),Qt=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return c.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return l.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(zt),Kt=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||l.isMobileCordova()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return c.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return l.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(zt),Gt=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&U((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),Yt="pLPCommand",$t="pRTLPCB",Xt=function(){function e(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k(e),this.stats_=Ft.getCollection(t),this.urlFn=function(e){return t.connectionURL(K,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Gt(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(l.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Jt((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=c.__read(e,5),i=r[0],o=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"==i)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=c.__read(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!l.isNodeSdk()&&(!!e.forceAllow_||!(e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=l.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=l.base64Encode(t),r=j(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!l.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=l.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),Jt=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,l.isNodeSdk())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=b(),window[Yt+this.uniqueCallbackIdentifier]=t,window[$t+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))o='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(e){S("frame writing exception"),e.stack&&S(e.stack),S(e)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||S("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;l.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){S("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(e){}}),Math.floor(1))},e}(),Zt="";
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var en=null;"undefined"!=typeof MozWebSocket?en=MozWebSocket:"undefined"!=typeof WebSocket&&(en=WebSocket);var tn=function(){function e(t,n,r,i){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k(this.connId),this.stats_=Ft.getCollection(n),this.connURL=e.connectionURL_(n,r,i)}return e.connectionURL_=function(e,t,n){var r={v:"5"};return!l.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL("websocket",r)},e.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,v.set("previous_websocket_failure",!0);try{if(l.isNodeSdk()){var r=l.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+Zt+"/"+o.platform+"/"+r}},s=o.env,a=0==this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new en(this.connURL,[],i)}else this.mySock=new en(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var u=e.message||e.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==en&&!e.forceDisallow_},e.previouslyFailed=function(){return v.isInMemoryStorage||!0===v.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){v.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length==this.totalFrames){var t=this.frames.join("");this.frames=null;var n=l.jsonEval(t);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},e.prototype.extractFrameCount_=function(e){if(l.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},e.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(e){this.resetKeepAlive();var t=l.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=j(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),nn=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Xt,tn]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=tn&&tn.isAvailable(),o=i&&!tn.previouslyFailed();if(t.webSocketOnly&&(i||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[tn];else{var s=this.transports_=[];try{for(var a=c.__values(e.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var l=u.value;l&&l.isAvailable()&&s.push(l)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),rn=function(){function e(e,t,n,r,i,o,s){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k("c:"+this.id+":"),this.transportManager_=new nn(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=W((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!=t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=L("t",e),n=L("d",e);if("c"==t)this.onSecondaryControl_(n);else{if("d"!=t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=L("t",e),n=L("d",e);"c"==t?this.onControl_(n):"d"==t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=L("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?T("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):T("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0==this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),W((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):W((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(v.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),on=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),sn=1e3,an=3e5,un=function(e){function t(n,r,i,o,s,a){var u=e.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=i,u.onServerInfoUpdate_=o,u.authTokenProvider_=s,u.authOverride_=a,u.id=t.nextPersistentConnectionId_++,u.log_=k("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=sn,u.maxReconnectDelay_=an,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,a&&!l.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),Qt.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&Kt.getInstance().on("online",u.onOnline_,u),u}return c.__extends(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(l.stringify(i)),l.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),l.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),l.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};e.tag&&(s.q=r.queryObject(),s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;t.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,a))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&l.contains(e,"w")){var n=l.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();I("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||l.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=l.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),l.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+l.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):T("Unrecognized action received from server: "+l.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;l.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=sn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=sn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=sn),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(e){l.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then((function(t){a?S("getToken() completed but was canceled"):(S("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new rn(i,o.repoInfo_,e,n,r,(function(e){I(e+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),s))})).then(null,(function(e){o.log_("Failed to get token: "+e),a||(l.CONSTANTS.NODE_ADMIN&&I(e),c())}))}},t.prototype.interrupt=function(e){S("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){S("Resuming connection for reason: "+e),delete this.interruptReasons_[e],l.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=sn,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return D(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new z(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){S("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=c.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,c.__values(s.values())),u=a.next();!u.done;u=a.next()){var l=u.value;this.sendListen_(l)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var p=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(p.action,p.pathString,p.data,p.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";l.CONSTANTS.NODE_ADMIN?t="admin_node":l.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+Zt.replace(/\./g,"-")]=1,l.isMobileCordova()?e["framework.cordova"]=1:l.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=Kt.getInstance().currentlyOnline();return l.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(on),cn=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=k("p:rest:"),i.listens_={},i}return c.__extends(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(l.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var o=this,s=e.path.toString();this.log_("Listen called for "+s+" "+e.queryIdentifier());var a=t.getListenId_(e,r),u={};this.listens_[a]=u;var c=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&o.onDataUpdate_(s,n,!1,r),l.safeGet(o.listens_,a)===u)&&i(e?401==e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(t.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+l.querystring(t);r.log_("Sending REST request for "+s);var a=new XMLHttpRequest;a.onreadystatechange=function(){if(n&&4===a.readyState){r.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);var e=null;if(a.status>=200&&a.status<300){try{e=l.jsonEval(a.responseText)}catch(e){I("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&I("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))},t}(on),ln=function(){function e(e,t,n){var r,i=this;if(this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ht,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ot,this.persistentConnection_=null,r=void 0!==o&&o.env[m]?new Dt(n):new Mt(n),this.stats_=Ft.getCollection(e),t||H())this.server_=new cn(this.repoInfo_,this.onDataUpdate_.bind(this),r),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var s=n.options.databaseAuthVariableOverride;if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{l.stringify(s)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new un(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),r,s),this.server_=this.persistentConnection_}r.addTokenChangeListener((function(e){i.server_.refreshAuthToken(e)})),this.statsReporter_=Ft.getOrCreateReporter(e,(function(){return new Ut(i.stats_,i.server_)})),this.transactions_init_(),this.infoData_=new Pt,this.infoSyncTree_=new Rt({startListening:function(e,t,n,r){var o=[],s=i.infoData_.getNode(e.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Rt({startListening:function(e,t,n,r){return i.server_.listen(e,n,t,(function(t,n){var o=r(t,n);i.eventQueue_.raiseEventsForChangedPath(e.path,o)})),[]},stopListening:function(e,t){i.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new z(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return(e=(e={timestamp:this.serverTime()})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new z(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var s=l.map(t,(function(e){return Ge(e)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=Ge(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=l.map(t,(function(e){return Ge(e)}));o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=Ge(t);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;o.length>0&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;F(e,(function(e,n){t.updateInfo_(e,n)}))},e.prototype.updateInfo_=function(e,t){var n=new z("/.info/"+e),r=Ge(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,r){var i=this;this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),s=Ge(t,n),a=at(s,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(e,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(e.toString(),s.val(!0),(function(t,n){var o="ok"===t;o||I("set at "+e+" failed: "+t);var s=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(e,s),i.callOnCompleteCallback(r,t,n)}));var l=this.abortTransactions_(e);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},e.prototype.update=function(e,t,n){var r=this;this.log_("update",{path:e.toString(),value:t});var i=!0,o=this.generateServerValues(),s={};if(F(t,(function(e,t){i=!1;var n=Ge(t);s[e]=at(n,o)})),i)S("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(e,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(e.toString(),t,(function(t,i){var o="ok"===t;o||I("update at "+e+" failed: "+t);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(e):e;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,t,i)})),F(t,(function(t){var n=r.abortTransactions_(e.child(t));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=function(e,t){var n=new ot;return e.forEachTree(new z(""),(function(e,r){n.remember(e,at(r,t))})),n}(this.onDisconnect_,t),r=[];n.forEachTree(z.Empty,(function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)})),this.onDisconnect_=new ot,this.eventQueue_.raiseEventsForChangedPath(z.Empty,r)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)}))},e.prototype.onDisconnectSet=function(e,t,n){var r=this,i=Ge(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),(function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)}))},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,o=Ge(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),(function(t,n){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)}))},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(l.isEmpty(t))return S("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,(function(i,o){"ok"===i&&F(t,(function(t,n){var i=Ge(n);r.onDisconnect_.remember(e.child(t),i)})),r.callOnCompleteCallback(n,i,o)}))},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new Vt(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce((function(e,t){return Math.max(t.length,e)}),0);F(t,(function(e,t){for(var r=e,i=e.length;i<n+2;i++)r+=" ";console.log(r+t)}))}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),S.apply(void 0,c.__spread([n],e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&U((function(){if("ok"==t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}}))},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new wn(this))},enumerable:!0,configurable:!0}),e}(),hn=function(){function e(t){this.indexedFilter_=new wt(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new _e(t,n))||(n=ze.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=ze.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(ze.EMPTY_NODE);var i=this;return t.forEachChild(Pe,(function(e,t){i.matches(new _e(e,t))||(r=r.updateImmediateChild(e,ze.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),pn=function(){function e(e){this.rangedFilter_=new hn(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new _e(t,n))||(n=ze.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=ze.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=ze.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(ze.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){s=i.getNext();!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ze.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(e,t){return s(t,e)}}else o=this.index_.getCompare();var a=e;l.assert(a.numChildren()==this.limit_,"");var u=new _e(t,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(t)){for(var p=a.getImmediateChild(t),d=r.getChildAfterChild(this.index_,c,this.reverse_);null!=d&&(d.name==t||a.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var f=null==d?1:o(d,u);if(h&&!n.isEmpty()&&f>=0)return null!=i&&i.trackChildChange(bt.childChangedChange(t,n,p)),a.updateImmediateChild(t,n);null!=i&&i.trackChildChange(bt.childRemovedChange(t,p));var v=a.updateImmediateChild(t,ze.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(bt.childAddedChange(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?e:h&&o(c,u)>=0?(null!=i&&(i.trackChildChange(bt.childRemovedChange(c.name,c.node)),i.trackChildChange(bt.childAddedChange(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(c.name,ze.EMPTY_NODE)):e},e}(),dn=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Pe}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return l.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return l.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:N},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return l.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return l.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:R},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return l.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==Pe&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_==Pe},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new wt(this.getIndex()):this.hasLimit()?new pn(this):new hn(this)},e.prototype.toRestQueryStringParameters=function(){var t,n=e.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===Pe?t=n.PRIORITY_INDEX:this.index_===Xe?t=n.VALUE_INDEX:this.index_===xe?t=n.KEY_INDEX:(l.assert(this.index_ instanceof Je,"Unrecognized index type!"),t=this.index_.toString()),r[n.ORDER_BY]=l.stringify(t),this.startSet_&&(r[n.START_AT]=l.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+l.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=l.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+l.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}(),fn=function(e){function t(t,n){if(!(t instanceof ln))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,dn.DEFAULT,!1)||this}return c.__extends(t,e),t.prototype.getKey=function(){return l.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return l.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof z||(null===this.path.getFront()?fe("Reference.child",1,e,!1):de("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){l.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){l.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){l.validateArgCount("Reference.set",1,2,arguments.length),ve("Reference.set",this.path),ae("Reference.set",1,e,this.path,!1),l.validateCallback("Reference.set",2,t,!0);var n=new l.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(l.validateArgCount("Reference.update",1,2,arguments.length),ve("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,I("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ce("Reference.update",1,e,this.path,!1),l.validateCallback("Reference.update",2,t,!0);var i=new l.Deferred;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(l.validateArgCount("Reference.setWithPriority",2,3,arguments.length),ve("Reference.setWithPriority",this.path),ae("Reference.setWithPriority",1,e,this.path,!1),le("Reference.setWithPriority",2,t,!1),l.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new l.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return l.validateArgCount("Reference.remove",0,1,arguments.length),ve("Reference.remove",this.path),l.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(l.validateArgCount("Reference.transaction",1,3,arguments.length),ve("Reference.transaction",this.path),l.validateCallback("Reference.transaction",1,e,!1),l.validateCallback("Reference.transaction",2,t,!0),ye("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new l.Deferred;"function"==typeof t&&r.promise.catch((function(){}));var i=function(e,n,i){e?r.reject(e):r.resolve(new be(n,i)),"function"==typeof t&&t(e,n,i)};return this.repo.startTransaction(this.path,e,i,n),r.promise},t.prototype.setPriority=function(e,t){l.validateArgCount("Reference.setPriority",1,2,arguments.length),ve("Reference.setPriority",this.path),le("Reference.setPriority",1,e,!1),l.validateCallback("Reference.setPriority",2,t,!0);var n=new l.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){l.validateArgCount("Reference.push",0,2,arguments.length),ve("Reference.push",this.path),ae("Reference.push",1,e,this.path,!0),l.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=we(r),o=this.child(i),s=this.child(i);return n=null!=e?o.set(e,t).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch((function(){})),o},t.prototype.onDisconnect=function(){return ve("Reference.onDisconnect",this.path),new me(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(it);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */it.__referenceConstructor=fn,Ot.__referenceConstructor=fn;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vn,gn=function(){this.children={},this.childCount=0,this.value=null},yn=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new gn),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n,r=t instanceof z?t:new z(t),i=this;null!==(n=r.getFront());){i=new e(n,i,l.safeGet(i.node_.children,n)||new gn),r=r.popFront()}return i},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){l.assert(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;F(this.node_.children,(function(r,i){t(new e(r,n,i))}))},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild((function(t){t.forEachDescendant(e,!0,n)})),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild((function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)}))},e.prototype.path=function(){return new z(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=l.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}();!function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(vn||(vn={})),ln.MAX_TRANSACTION_RETRIES_=25,ln.prototype.transactions_init_=function(){this.transactionQueueTree_=new yn},ln.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);var i=function(){},o=new fn(this,e);o.on("value",i);var s={path:e,update:t,onComplete:n,status:null,order:b(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(e);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new Ze(s.currentInputSnapshot,new fn(this,s.path),Pe);s.onComplete(null,!1,c)}}else{ue("transaction failed: Data returned ",u,s.path),s.status=vn.RUN;var h=this.transactionQueueTree_.subTree(e),p=h.getValue()||[];p.push(s),h.setValue(p);var d=void 0;if("object"==typeof u&&null!==u&&l.contains(u,".priority"))d=l.safeGet(u,".priority"),l.assert(se(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else d=(this.serverSyncTree_.calcCompleteEventCache(e)||ze.EMPTY_NODE).getPriority().val();d=d;var f=this.generateServerValues(),v=Ge(u,d),g=at(v,f);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=g,s.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(e,g,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,y),this.sendReadyTransactions_()}},ln.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||ze.EMPTY_NODE},ln.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);l.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return e.status===vn.RUN}))&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild((function(e){t.sendReadyTransactions_(e)}))},ln.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map((function(e){return e.currentWriteId})),i=this.getLatestState_(e,r),o=i,s=i.hash(),a=0;a<t.length;a++){var u=t[a];l.assert(u.status===vn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=vn.SENT,u.retryCount++;var c=z.relativePath(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var h=o.val(!0),p=e;this.server_.put(p.toString(),h,(function(r){n.log_("transaction put response",{path:p.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<t.length;s++){if(t[s].status=vn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[s].currentWriteId)),t[s].onComplete){var a=t[s].currentOutputSnapshotResolved,u=new fn(n,t[s].path),c=new Ze(a,u,Pe);o.push(t[s].onComplete.bind(null,null,!0,c))}t[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,i);for(s=0;s<o.length;s++)U(o[s])}else{if("datastale"===r)for(s=0;s<t.length;s++)t[s].status===vn.SENT_NEEDS_ABORT?t[s].status=vn.NEEDS_ABORT:t[s].status=vn.RUN;else{I("transaction at "+p.toString()+" failed: "+r);for(s=0;s<t.length;s++)t[s].status=vn.NEEDS_ABORT,t[s].abortReason=r}n.rerunTransactions_(e)}}),s)},ln.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},ln.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n,r=[],i=[],o=e.filter((function(e){return e.status===vn.RUN})).map((function(e){return e.currentWriteId})),s=0;s<e.length;s++){var a=e[s],u=z.relativePath(t,a.path),c=!1,h=void 0;if(l.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===vn.NEEDS_ABORT)c=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===vn.RUN)if(a.retryCount>=ln.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var p=this.getLatestState_(a.path,o);a.currentInputSnapshot=p;var d=e[s].update(p.val());if(void 0!==d){ue("transaction failed: Data returned ",d,a.path);var f=Ge(d);"object"==typeof d&&null!=d&&l.contains(d,".priority")||(f=f.updatePriority(p.getPriority()));var v=a.currentWriteId,g=this.generateServerValues(),y=at(f,g);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(v),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(v,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,i),i=[],c&&(e[s].status=vn.COMPLETED,n=e[s].unwatcher,setTimeout(n,Math.floor(0)),e[s].onComplete))if("nodata"===h){var m=new fn(this,e[s].path),b=e[s].currentInputSnapshot,w=new Ze(b,m,Pe);r.push(e[s].onComplete.bind(null,null,!1,w))}else r.push(e[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)U(r[s]);this.sendReadyTransactions_()}},ln.prototype.getAncestorTransactionNode_=function(e){for(var t,n=this.transactionQueueTree_;null!==(t=e.getFront())&&null===n.getValue();)n=n.subTree(t),e=e.popFront();return n},ln.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort((function(e,t){return e.order-t.order})),t},ln.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild((function(e){n.aggregateTransactionQueuesForNode_(e,t)}))},ln.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==vn.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(n.length>0?n:null)}e.forEachChild((function(e){t.pruneCompletedTransactionsBelowNode_(e)}))},ln.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor((function(e){t.abortTransactionsOnNode_(e)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(e){t.abortTransactionsOnNode_(e)})),n},ln.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)if(t[o].status===vn.SENT_NEEDS_ABORT);else if(t[o].status===vn.SENT)l.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,t[o].status=vn.SENT_NEEDS_ABORT,t[o].abortReason="set";else if(l.assert(t[o].status===vn.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete){n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r);for(o=0;o<n.length;o++)U(n[o])}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mn,bn=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return mn||(mn=new e),mn},e.prototype.interrupt=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].interrupt()},e.prototype.resume=function(){for(var e in this.repos_)for(var t in this.repos_[e])this.repos_[e][t].resume()},e.prototype.databaseFromApp=function(e,t){var n=t||e.options.databaseURL;void 0===n&&O("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var r=ee(n),i=r.repoInfo,s=void 0;return void 0!==o&&(s=o.env[m]),s&&(n="http://"+s+"?ns="+i.namespace,i=(r=ee(n)).repoInfo),ge("Invalid Firebase Database URL",1,r),r.path.isEmpty()||O("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(i,e).database},e.prototype.deleteRepo=function(e){var t=l.safeGet(this.repos_,e.app.name);t&&l.safeGet(t,e.repoInfo_.toURLString())===e||O("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},e.prototype.createRepo=function(e,t){var n=l.safeGet(this.repos_,t.name);n||(n={},this.repos_[t.name]=n);var r=l.safeGet(n,e.toURLString());return r&&O("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new ln(e,this.useRestClient_,t),n[e.toURLString()]=r,r},e.prototype.forceRestClient=function(e){this.useRestClient_=e},e}(),wn=function(){function e(e){this.repo_=e,e instanceof ln||O("Don't call new Database() directly - please use firebase.database()."),this.root_=new fn(e,z.Empty),this.INTERNAL=new _n(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),l.validateArgCount("database.ref",0,1,arguments.length),e instanceof fn?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),l.validateArgCount(t,1,1,arguments.length);var n=ee(e);ge(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&O(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&O("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){l.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){l.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"}},e}(),_n=function(){function e(e){this.database=e}return e.prototype.delete=function(){return c.__awaiter(this,void 0,void 0,(function(){return c.__generator(this,(function(e){return this.database.checkDeleted_("delete"),bn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},e}(),Cn=Object.freeze({forceLongPolling:function(){tn.forceDisallow(),Xt.forceAllow()},forceWebSockets:function(){Xt.forceDisallow()},isWebSocketsAvailable:function(){return tn.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),En=un;un.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},un.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var xn=rn,Sn=G,kn=Object.freeze({DataConnection:En,RealTimeConnection:xn,hijackHash:function(e){var t=un.prototype.put;return un.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){un.prototype.put=t}},ConnectionTarget:Sn,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){bn.getInstance().forceRestClient(e)}}),Tn=wn.ServerValue;function On(e){var t;t=e.SDK_VERSION,Zt=t;var r=e.INTERNAL.registerService("database",(function(e,t,n){return bn.getInstance().databaseFromApp(e,n)}),{Reference:fn,Query:it,Database:wn,DataSnapshot:Ze,enableLogging:x,INTERNAL:Cn,ServerValue:Tn,TEST_ACCESS:kn},null,!0);l.isNodeSdk()&&(n.exports=r)}On(u),e.DataSnapshot=Ze,e.Database=wn,e.OnDisconnect=me,e.Query=it,e.Reference=fn,e.ServerValue=Tn,e.enableLogging=x,e.registerDatabase=On})),e.entry="dist/index.cjs.js"})),e.pkg("@firebase/logger",{},(function(e){return e.file("dist/index.cjs.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var o,s=[];(o=e.LogLevel||(e.LogLevel={}))[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT";var a=e.LogLevel.INFO,u=function(t,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!(n<t.logLevel)){var o=(new Date).toISOString();switch(n){case e.LogLevel.DEBUG:case e.LogLevel.VERBOSE:console.log.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.INFO:console.info.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.WARN:console.warn.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;case e.LogLevel.ERROR:console.error.apply(console,["["+o+"]  "+t.name+":"].concat(r));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+n+")")}}},c=function(){function t(e){this.name=e,this._logLevel=a,this._logHandler=u,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in e.LogLevel))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.DEBUG].concat(t))},t.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.VERBOSE].concat(t))},t.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.INFO].concat(t))},t.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.WARN].concat(t))},t.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._logHandler.apply(this,[this,e.LogLevel.ERROR].concat(t))},t}();e.Logger=c,e.setLogLevel=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){s.forEach((function(t){t.logLevel=e}))}})),e.entry="dist/index.cjs.js"})),e.pkg("@firebase/util",{},(function(e){return e.file("dist/index.cjs.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("tslib"),s={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(e,t){if(!e)throw u(t)},u=function(e){return new Error("Firebase Database ("+s.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},c=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],s=i+1<e.length,a=s?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,p=(15&a)<<2|c>>6,d=63&c;u||(d=64,s||(p=64)),r.push(n[l],n[h],n[p],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(c(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(a=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{o=e[n++];var a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0,a=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(e){try{return l.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=p(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var v="FirebaseError",g=function(e){function t(n,r){var i=e.call(this,r)||this;return i.code=n,i.name=v,Object.setPrototypeOf(i,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,y.prototype.create),i}return o.__extends(t,e),t}(Error),y=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],s=o?m(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new g(i,a),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},e}();function m(e,t){return e.replace(b,(function(e,n){var r=t[n];return null!=r?r.toString():"<"+n+"?>"}))}var b=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(e){return JSON.parse(e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=w(h(o[0])||""),n=w(h(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var C=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),s=1518500249):(o=u^c^l,s=1859775393):r<60?(o=u&c|l&(u|c),s=2400959708):(o=u^c^l,s=3395469782);i=(a<<5|a>>>27)+o+h+s+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();var E=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=x),void 0===r.error&&(r.error=x),void 0===r.complete&&(r.complete=x);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function x(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}e.CONSTANTS=s,e.Deferred=d,e.ErrorFactory=y,e.FirebaseError=g,e.Sha1=C,e.assert=a,e.assertionError=u,e.async=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}},e.base64=l,e.base64Decode=h,e.base64Encode=function(e){var t=c(e);return l.encodeByteArray(t,!0)},e.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e.createSubscribe=function(e,t){var n=new E(e,t);return n.subscribe.bind(n)},e.decode=_,e.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return p(void 0,e)},e.deepExtend=p,e.errorPrefix=S,e.getUA=f,e.isAdmin=function(e){var t=_(e).claims;return"object"==typeof t&&!0===t.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}},e.isNodeSdk=function(){return!0===s.NODE_CLIENT||!0===s.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(e){var t=_(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},e.isValidTimestamp=function(e){var t=_(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(e){var t=_(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},e.jsonEval=w,e.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.querystring=function(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""},e.querystringDecode=function(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("=");t[n[0]]=n[1]}})),t},e.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},e.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},e.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;a(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},e.stringify=function(e){return JSON.stringify(e)},e.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(e,t,r)+"must be a valid function.")},e.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(S(e,t,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(e,t,r)+"must be a valid firebase namespace.")}})),e.entry="dist/index.cjs.js"})),e.pkg("aurelia-binding",{},(function(e){return e.file("dist/commonjs/aurelia-binding.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSetObserver=e.BindingEngine=e.NameExpression=e.Listener=e.ListenerExpression=e.BindingBehaviorResource=e.ValueConverterResource=e.Call=e.CallExpression=e.Binding=e.BindingExpression=e.ObjectObservationAdapter=e.ObserverLocator=e.SVGAnalyzer=e.presentationAttributes=e.presentationElements=e.elements=e.ComputedExpression=e.ClassObserver=e.SelectValueObserver=e.CheckedObserver=e.ValueAttributeObserver=e.StyleObserver=e.DataAttributeObserver=e.dataAttributeAccessor=e.XLinkAttributeObserver=e.SetterObserver=e.PrimitiveObserver=e.propertyAccessor=e.DirtyCheckProperty=e.DirtyChecker=e.EventSubscriber=e.EventManager=e.delegationStrategy=e.getMapObserver=e.ParserImplementation=e.Parser=e.bindingMode=e.ExpressionCloner=e.Unparser=e.LiteralObject=e.LiteralArray=e.LiteralTemplate=e.LiteralString=e.LiteralPrimitive=e.Unary=e.Binary=e.CallFunction=e.CallMember=e.CallScope=e.AccessKeyed=e.AccessMember=e.AccessScope=e.AccessThis=e.Conditional=e.Assign=e.ValueConverter=e.BindingBehavior=e.Expression=e.getArrayObserver=e.CollectionLengthObserver=e.ModifyCollectionObserver=e.ExpressionObserver=e.sourceContext=e.targetContext=void 0;var o,s,a,u,c,l,h,p,d,f,v,g,y,m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.camelCase=I,e.createOverrideContext=A,e.getContextFor=N,e.createScopeForTest=function(e,t){if(t)return{bindingContext:e,overrideContext:A(e,A(t))};return{bindingContext:e,overrideContext:A(e)}},e.connectable=B,e.enqueueBindingConnect=Y,e.setConnectQueueThreshold=$,e.enableConnectQueue=function(){$(100)},e.disableConnectQueue=function(){$(Number.MAX_SAFE_INTEGER)},e.getConnectQueueSize=function(){return q.length},e.subscriberCollection=oe,e.calcSplices=he,e.mergeSplice=pe,e.projectArraySplices=de,e.getChangeRecords=fe,e.cloneExpression=function(e){var t=new Ye;return e.accept(t)},e.hasDeclaredDependencies=Zn,e.declarePropertyDependencies=function(e,t,n){Object.getOwnPropertyDescriptor(e.prototype,t).get.dependencies=n},e.computedFrom=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,r){return r.get.dependencies=t,r}},e.createComputedObserver=tr,e.valueConverter=function(e){if(void 0===e||"string"==typeof e)return function(t){E.metadata.define(E.metadata.resource,new vr(e),t)};E.metadata.define(E.metadata.resource,new vr,e)},e.bindingBehavior=function(e){if(void 0===e||"string"==typeof e)return function(t){E.metadata.define(E.metadata.resource,new gr(e),t)};E.metadata.define(E.metadata.resource,new gr,e)},e.observable=function(e,t,n){function r(e,t,n,r){var i=void 0===t;i&&(e=e.prototype,t="string"==typeof r?r:r.name);var o="_"+t,s={configurable:!0,enumerable:!1,writable:!0},a=r&&r.changeHandler||t+"Changed";if(n?"function"==typeof n.initializer&&(s.value=n.initializer()):n={},"enumerable"in n||(n.enumerable=!0),delete n.value,delete n.writable,delete n.initializer,Reflect.defineProperty(e,o,s),n.get=function(){return this[o]},n.set=function(e){var n=this[o];e!==n&&(this[o]=e,Reflect.defineProperty(this,o,{enumerable:!1}),this[a]&&this[a](e,n,t))},n.get.dependencies=[o],!i)return n;Reflect.defineProperty(e,t,n)}if(void 0===t)return function(t,n,i){return r(t,n,i,e)};return r(e,t,n)},e.connectBindingToSignal=Sr,e.signalBindings=function(e){xr.hasOwnProperty(e)&&xr[e]++};var w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(t("aurelia-logging")),_=t("aurelia-pal"),C=t("aurelia-task-queue"),E=t("aurelia-metadata");function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=e.targetContext="Binding:target",T=e.sourceContext="Binding:source",O=Object.create(null);function I(e){if(e in O)return O[e];var t=e.charAt(0).toLowerCase()+e.slice(1).replace(/[_.-](\w|$)/g,(function(e,t){return t.toUpperCase()}));return O[e]=t,t}function A(e,t){return{bindingContext:e,parentOverrideContext:t||null}}function N(e,t,n){var r=t.overrideContext;if(n){for(;n&&r;)n--,r=r.parentOverrideContext;if(n||!r)return;return e in r?r:r.bindingContext}for(;r&&!(e in r)&&!(r.bindingContext&&e in r.bindingContext);)r=r.parentOverrideContext;return r?e in r?r:r.bindingContext:t.bindingContext||t.overrideContext}var R=[],P=[],M=-1;function L(e){if(e===M){M+=5;for(var t=R.length=P.length=M+1,n=e+1;n<t;++n)R[n]="_observer"+n,P[n]="_observerVersion"+n}}function D(e){for(var t=void 0===this._observerSlots?0:this._observerSlots,n=t;n--&&this[R[n]]!==e;);if(-1===n){for(n=0;this[R[n]];)n++;this[R[n]]=e,e.subscribe(T,this),n===t&&(this._observerSlots=n+1)}void 0===this._version&&(this._version=0),this[P[n]]=this._version,L(n)}function j(e,t){var n=this.observerLocator.getObserver(e,t);D.call(this,n)}function F(e){var t=this.observerLocator.getArrayObserver(e);D.call(this,t)}function V(e){for(var t=this._observerSlots;t--;)if(e||this[P[t]]!==this._version){var n=this[R[t]];this[R[t]]=null,n&&n.unsubscribe(T,this)}}function B(){return function(e){e.prototype.observeProperty=j,e.prototype.observeArray=F,e.prototype.unobserve=V,e.prototype.addObserver=D}}L(-1);var q=[],U={},H=0,W=100,z=15,Q=!1,K=0;function G(e){for(var t=q.length,n=0;n<t;){var r=q[n];if(U[r.__connectQueueId]=!1,r.connect(!0),++n%100==0&&_.PLATFORM.performance.now()-e>z)break}q.splice(0,n),q.length?_.PLATFORM.requestAnimationFrame(G):(Q=!1,K=0)}function Y(e){if(K<W)K++,e.connect(!1);else{var t=e.__connectQueueId;void 0===t&&(t=H,H++,e.__connectQueueId=t),U[t]||(q.push(e),U[t]=!0)}Q||(Q=!0,_.PLATFORM.requestAnimationFrame(G))}function $(e){W=e}function X(e,t){return!this.hasSubscriber(e,t)&&(this._context0?this._context1?this._context2?this._contextsRest?(this._contextsRest.push(e),this._callablesRest.push(t),!0):(this._contextsRest=[e],this._callablesRest=[t],!0):(this._context2=e,this._callable2=t,!0):(this._context1=e,this._callable1=t,!0):(this._context0=e,this._callable0=t,!0))}function J(e,t){if(this._context0===e&&this._callable0===t)return this._context0=null,this._callable0=null,!0;if(this._context1===e&&this._callable1===t)return this._context1=null,this._callable1=null,!0;if(this._context2===e&&this._callable2===t)return this._context2=null,this._callable2=null,!0;var n=this._callablesRest;if(void 0===n||0===n.length)return!1;for(var r=this._contextsRest,i=0;(n[i]!==t||r[i]!==e)&&n.length>i;)i++;return!(i>=n.length)&&(r.splice(i,1),n.splice(i,1),!0)}var Z=[],ee=[],te=[];function ne(e,t){var n=this._context0,r=this._callable0,i=this._context1,o=this._callable1,s=this._context2,a=this._callable2,u=this._contextsRest?this._contextsRest.length:0,c=void 0,l=void 0,h=void 0,p=void 0;if(u){for(h=te.length;h--&&te[h];);for(h<0?(h=te.length,c=[],l=[],te.push(!0),Z.push(c),ee.push(l)):(te[h]=!0,c=Z[h],l=ee[h]),p=u;p--;)c[p]=this._contextsRest[p],l[p]=this._callablesRest[p]}if(n&&(r?r.call(n,e,t):n(e,t)),i&&(o?o.call(i,e,t):i(e,t)),s&&(a?a.call(s,e,t):s(e,t)),u){for(p=0;p<u;p++){var d=l[p],f=c[p];d?d.call(f,e,t):f(e,t),c[p]=null,l[p]=null}te[h]=!1}}function re(){return!!(this._context0||this._context1||this._context2||this._contextsRest&&this._contextsRest.length)}function ie(e,t){if(this._context0===e&&this._callable0===t||this._context1===e&&this._callable1===t||this._context2===e&&this._callable2===t)return!0;var n=void 0,r=this._contextsRest;if(!r||0===(n=r.length))return!1;for(var i=this._callablesRest;n--;)if(r[n]===e&&i[n]===t)return!0;return!1}function oe(){return function(e){e.prototype.addSubscriber=X,e.prototype.removeSubscriber=J,e.prototype.callSubscribers=ne,e.prototype.hasSubscribers=re,e.prototype.hasSubscriber=ie}}var se=e.ExpressionObserver=B()(o=oe()(o=function(){function e(e,t,n,r){this.scope=e,this.expression=t,this.observerLocator=n,this.lookupFunctions=r}return e.prototype.getValue=function(){return this.expression.evaluate(this.scope,this.lookupFunctions)},e.prototype.setValue=function(e){this.expression.assign(this.scope,e)},e.prototype.subscribe=function(e,t){var n=this;if(this.hasSubscribers()||(this.oldValue=this.expression.evaluate(this.scope,this.lookupFunctions),this.expression.connect(this,this.scope)),this.addSubscriber(e,t),1===arguments.length&&e instanceof Function)return{dispose:function(){n.unsubscribe(e,t)}}},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&(this.unobserve(!0),this.oldValue=void 0)},e.prototype.call=function(){var e=this.expression.evaluate(this.scope,this.lookupFunctions),t=this.oldValue;e!==t&&(this.oldValue=e,this.callSubscribers(e,t)),this._version++,this.expression.connect(this,this.scope),this.unobserve(!1)},e}())||o)||o;function ae(e){return+e}function ue(e,t,n){return{index:e,removed:t,addedCount:n}}function ce(){}ce.prototype={calcEditDistances:function(e,t,n,r,i,o){for(var s=o-i+1,a=n-t+1,u=new Array(s),c=void 0,l=void 0,h=0;h<s;++h)u[h]=new Array(a),u[h][0]=h;for(var p=0;p<a;++p)u[0][p]=p;for(var d=1;d<s;++d)for(var f=1;f<a;++f)this.equals(e[t+f-1],r[i+d-1])?u[d][f]=u[d-1][f-1]:(c=u[d-1][f]+1,l=u[d][f-1]+1,u[d][f]=c<l?c:l);return u},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,n=e[0].length-1,r=e[t][n],i=[];t>0||n>0;)if(0!==t)if(0!==n){var o=e[t-1][n-1],s=e[t-1][n],a=e[t][n-1],u=void 0;(u=s<a?s<o?s:o:a<o?a:o)===o?(o===r?i.push(0):(i.push(1),r=o),t--,n--):u===s?(i.push(3),t--,r=s):(i.push(2),n--,r=a)}else i.push(3),t--;else i.push(2),n--;return i.reverse(),i},calcSplices:function(e,t,n,r,i,o){var s=0,a=0,u=Math.min(n-t,o-i);if(0===t&&0===i&&(s=this.sharedPrefix(e,r,u)),n===e.length&&o===r.length&&(a=this.sharedSuffix(e,r,u-s)),i+=s,o-=a,(n-=a)-(t+=s)==0&&o-i==0)return[];if(t===n){for(var c=ue(t,[],0);i<o;)c.removed.push(r[i++]);return[c]}if(i===o)return[ue(t,[],n-t)];for(var l=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,n,r,i,o)),h=void 0,p=[],d=t,f=i,v=0;v<l.length;++v)switch(l[v]){case 0:h&&(p.push(h),h=void 0),d++,f++;break;case 1:h||(h=ue(d,[],0)),h.addedCount++,d++,h.removed.push(r[f]),f++;break;case 2:h||(h=ue(d,[],0)),h.addedCount++,d++;break;case 3:h||(h=ue(d,[],0)),h.removed.push(r[f]),f++}return h&&p.push(h),p},sharedPrefix:function(e,t,n){for(var r=0;r<n;++r)if(!this.equals(e[r],t[r]))return r;return n},sharedSuffix:function(e,t,n){for(var r=e.length,i=t.length,o=0;o<n&&this.equals(e[--r],t[--i]);)o++;return o},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}};var le=new ce;function he(e,t,n,r,i,o){return le.calcSplices(e,t,n,r,i,o)}function pe(e,t,n,r){for(var i,o,s,a,u=ue(t,n,r),c=!1,l=0,h=0;h<e.length;h++){var p=e[h];if(p.index+=l,!c){var d=(i=u.index,o=u.index+u.removed.length,s=p.index,a=p.index+p.addedCount,o<s||a<i?-1:o===s||a===i?0:i<s?o<a?o-s:a-s:a<o?a-i:o-i);if(d>=0){e.splice(h,1),h--,l-=p.addedCount-p.removed.length,u.addedCount+=p.addedCount-d;var f=u.removed.length+p.removed.length-d;if(u.addedCount||f){var v=p.removed;if(u.index<p.index){var g=u.removed.slice(0,p.index-u.index);Array.prototype.push.apply(g,v),v=g}if(u.index+u.removed.length>p.index+p.addedCount){var y=u.removed.slice(p.index+p.addedCount-u.index);Array.prototype.push.apply(v,y)}u.removed=v,p.index<u.index&&(u.index=p.index)}else c=!0}else if(u.index<p.index){c=!0,e.splice(h,0,u),h++;var m=u.addedCount-u.removed.length;p.index+=m,l+=m}}}c||e.push(u)}function de(e,t){var n=[];return function(e,t){for(var n,r=[],i=0;i<t.length;i++){var o=t[i];switch(o.type){case"splice":pe(r,o.index,o.removed.slice(),o.addedCount);break;case"add":case"update":case"delete":if(+(n=o.name)!=n>>>0)continue;var s=ae(o.name);if(s<0)continue;pe(r,s,[o.oldValue],"delete"===o.type?0:1);break;default:console.error("Unexpected record type: "+JSON.stringify(o))}}return r}(0,t).forEach((function(t){1!==t.addedCount||1!==t.removed.length?n=n.concat(he(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length)):t.removed[0]!==e[t.index]&&n.push(t)})),n}function fe(e){for(var t,n,r,i=new Array(e.size),o=e.keys(),s=0,a=void 0;(a=o.next())&&!a.done;)i[s]=(t="added",n=e,r=a.value,{type:t,object:n,key:r,oldValue:void 0}),s++;return i}var ve=e.ModifyCollectionObserver=oe()(s=function(){function e(e,t){this.taskQueue=e,this.queued=!1,this.changeRecords=null,this.oldCollection=null,this.collection=t,this.lengthPropertyName=t instanceof Map||t instanceof Set?"size":"length"}return e.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e.prototype.addChangeRecord=function(e){if(this.hasSubscribers()||this.lengthObserver){if("splice"===e.type){var t=e.index,n=e.object.length;t>n?t=n-e.addedCount:t<0&&(t=n+e.removed.length+t-e.addedCount),t<0&&(t=0),e.index=t}null===this.changeRecords?this.changeRecords=[e]:this.changeRecords.push(e),this.queued||(this.queued=!0,this.taskQueue.queueMicroTask(this))}},e.prototype.flushChangeRecords=function(){(this.changeRecords&&this.changeRecords.length||this.oldCollection)&&this.call()},e.prototype.reset=function(e){this.oldCollection=e,this.hasSubscribers()&&!this.queued&&(this.queued=!0,this.taskQueue.queueMicroTask(this))},e.prototype.getLengthObserver=function(){return this.lengthObserver||(this.lengthObserver=new ge(this.collection))},e.prototype.call=function(){var e=this.changeRecords,t=this.oldCollection,n=void 0;this.queued=!1,this.changeRecords=[],this.oldCollection=null,this.hasSubscribers()&&(n=t?this.collection instanceof Map||this.collection instanceof Set?fe(t):he(this.collection,0,this.collection.length,t,0,t.length):this.collection instanceof Map||this.collection instanceof Set?e:de(this.collection,e),this.callSubscribers(n)),this.lengthObserver&&this.lengthObserver.call(this.collection[this.lengthPropertyName])},e}())||s,ge=e.CollectionLengthObserver=oe()(a=function(){function e(e){this.collection=e,this.lengthPropertyName=e instanceof Map||e instanceof Set?"size":"length",this.currentValue=e[this.lengthPropertyName]}return e.prototype.getValue=function(){return this.collection[this.lengthPropertyName]},e.prototype.setValue=function(e){this.collection[this.lengthPropertyName]=e},e.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e.prototype.call=function(e){var t=this.currentValue;this.callSubscribers(e,t),this.currentValue=e},e}())||a,ye=Array.prototype,me=ye.pop,be=ye.push,we=ye.reverse,_e=ye.shift,Ce=ye.sort,Ee=ye.splice,xe=ye.unshift;function Se(e,t){return ke.for(e,t)}ye.__au_patched__?w.getLogger("array-observation").warn("Detected 2nd attempt of patching array from Aurelia binding. This is probably caused by dependency mismatch between core modules and a 3rd party plugin. Please see https://github.com/aurelia/cli/pull/906 if you are using webpack."):(Reflect.defineProperty(ye,"__au_patched__",{value:1}),ye.pop=function(){var e=this.length>0,t=me.apply(this,arguments);return e&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:this.length,oldValue:t}),t},ye.push=function(){var e=be.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:this.length-arguments.length,removed:[],addedCount:arguments.length}),e},ye.reverse=function(){var e=void 0;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),e=this.slice());var t=we.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(e),t},ye.shift=function(){var e=this.length>0,t=_e.apply(this,arguments);return e&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:0,oldValue:t}),t},ye.sort=function(){var e=void 0;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),e=this.slice());var t=Ce.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(e),t},ye.splice=function(){var e=Ee.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:+arguments[0],removed:e,addedCount:arguments.length>2?arguments.length-2:0}),e},ye.unshift=function(){var e=xe.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:0,removed:[],addedCount:arguments.length}),e}),e.getArrayObserver=Se;var ke=function(e){function t(t,n){return x(this,e.call(this,t,n))}return S(t,e),t.for=function(e,n){return"__array_observer__"in n||Reflect.defineProperty(n,"__array_observer__",{value:t.create(e,n),enumerable:!1,configurable:!1}),n.__array_observer__},t.create=function(e,n){return new t(e,n)},t}(ve),Te=e.Expression=function(){function e(){this.isAssignable=!1}return e.prototype.evaluate=function(e,t,n){throw new Error('Binding expression "'+this+'" cannot be evaluated.')},e.prototype.assign=function(e,t,n){throw new Error('Binding expression "'+this+'" cannot be assigned to.')},e.prototype.toString=function(){return"undefined"==typeof FEATURE_NO_UNPARSER?Ge.unparse(this):Function.prototype.toString.call(this)},e}(),Oe=e.BindingBehavior=function(e){function t(t,n,r){var i=x(this,e.call(this));return i.expression=t,i.name=n,i.args=r,i}return S(t,e),t.prototype.evaluate=function(e,t){return this.expression.evaluate(e,t)},t.prototype.assign=function(e,t,n){return this.expression.assign(e,t,n)},t.prototype.accept=function(e){return e.visitBindingBehavior(this)},t.prototype.connect=function(e,t){this.expression.connect(e,t)},t.prototype.bind=function(e,t,n){this.expression.expression&&this.expression.bind&&this.expression.bind(e,t,n);var r=n.bindingBehaviors(this.name);if(!r)throw new Error('No BindingBehavior named "'+this.name+'" was found!');var i="behavior-"+this.name;if(e[i])throw new Error('A binding behavior named "'+this.name+'" has already been applied to "'+this.expression+'"');e[i]=r,r.bind.apply(r,[e,t].concat(Qe(t,this.args,e.lookupFunctions)))},t.prototype.unbind=function(e,t){var n="behavior-"+this.name;e[n].unbind(e,t),e[n]=null,this.expression.expression&&this.expression.unbind&&this.expression.unbind(e,t)},t}(Te),Ie=e.ValueConverter=function(e){function t(t,n,r){var i=x(this,e.call(this));return i.expression=t,i.name=n,i.args=r,i.allArgs=[t].concat(r),i}return S(t,e),t.prototype.evaluate=function(e,t){var n=t.valueConverters(this.name);if(!n)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"toView"in n?n.toView.apply(n,Qe(e,this.allArgs,t)):this.allArgs[0].evaluate(e,t)},t.prototype.assign=function(e,t,n){var r=n.valueConverters(this.name);if(!r)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"fromView"in r&&(t=r.fromView.apply(r,[t].concat(Qe(e,this.args,n)))),this.allArgs[0].assign(e,t,n)},t.prototype.accept=function(e){return e.visitValueConverter(this)},t.prototype.connect=function(e,t){for(var n=this.allArgs,r=n.length;r--;)n[r].connect(e,t);var i=e.lookupFunctions.valueConverters(this.name);if(!i)throw new Error('No ValueConverter named "'+this.name+'" was found!');var o=i.signals;if(void 0!==o)for(r=o.length;r--;)Sr(e,o[r])},t}(Te),Ae=e.Assign=function(e){function t(t,n){var r=x(this,e.call(this));return r.target=t,r.value=n,r.isAssignable=!0,r}return S(t,e),t.prototype.evaluate=function(e,t){return this.target.assign(e,this.value.evaluate(e,t))},t.prototype.accept=function(e){e.visitAssign(this)},t.prototype.connect=function(e,t){},t.prototype.assign=function(e,t){this.value.assign(e,t),this.target.assign(e,t)},t}(Te),Ne=e.Conditional=function(e){function t(t,n,r){var i=x(this,e.call(this));return i.condition=t,i.yes=n,i.no=r,i}return S(t,e),t.prototype.evaluate=function(e,t){return this.condition.evaluate(e,t)?this.yes.evaluate(e,t):this.no.evaluate(e,t)},t.prototype.accept=function(e){return e.visitConditional(this)},t.prototype.connect=function(e,t){this.condition.connect(e,t),this.condition.evaluate(t)?this.yes.connect(e,t):this.no.connect(e,t)},t}(Te),Re=e.AccessThis=function(e){function t(t){var n=x(this,e.call(this));return n.ancestor=t,n}return S(t,e),t.prototype.evaluate=function(e,t){for(var n=e.overrideContext,r=this.ancestor;r--&&n;)n=n.parentOverrideContext;return r<1&&n?n.bindingContext:void 0},t.prototype.accept=function(e){return e.visitAccessThis(this)},t.prototype.connect=function(e,t){},t}(Te),Pe=e.AccessScope=function(e){function t(t,n){var r=x(this,e.call(this));return r.name=t,r.ancestor=n,r.isAssignable=!0,r}return S(t,e),t.prototype.evaluate=function(e,t){return N(this.name,e,this.ancestor)[this.name]},t.prototype.assign=function(e,t){var n=N(this.name,e,this.ancestor);return n?n[this.name]=t:void 0},t.prototype.accept=function(e){return e.visitAccessScope(this)},t.prototype.connect=function(e,t){var n=N(this.name,t,this.ancestor);e.observeProperty(n,this.name)},t}(Te),Me=e.AccessMember=function(e){function t(t,n){var r=x(this,e.call(this));return r.object=t,r.name=n,r.isAssignable=!0,r}return S(t,e),t.prototype.evaluate=function(e,t){var n=this.object.evaluate(e,t);return null==n?n:n[this.name]},t.prototype.assign=function(e,t){var n=this.object.evaluate(e);return null==n&&(n={},this.object.assign(e,n)),n[this.name]=t,t},t.prototype.accept=function(e){return e.visitAccessMember(this)},t.prototype.connect=function(e,t){this.object.connect(e,t);var n=this.object.evaluate(t);n&&e.observeProperty(n,this.name)},t}(Te),Le=e.AccessKeyed=function(e){function t(t,n){var r=x(this,e.call(this));return r.object=t,r.key=n,r.isAssignable=!0,r}return S(t,e),t.prototype.evaluate=function(e,t){return function(e,t){if(Array.isArray(e))return e[parseInt(t,10)];if(e)return e[t];if(null==e)return;return e[t]}(this.object.evaluate(e,t),this.key.evaluate(e,t))},t.prototype.assign=function(e,t){return function(e,t,n){if(Array.isArray(e)){var r=parseInt(t,10);e.length<=r&&(e.length=r+1),e[r]=n}else e[t]=n;return n}(this.object.evaluate(e),this.key.evaluate(e),t)},t.prototype.accept=function(e){return e.visitAccessKeyed(this)},t.prototype.connect=function(e,t){this.object.connect(e,t);var n=this.object.evaluate(t);if(n instanceof Object){this.key.connect(e,t);var r=this.key.evaluate(t);null==r||Array.isArray(n)&&"number"==typeof r||e.observeProperty(n,r)}},t}(Te),De=e.CallScope=function(e){function t(t,n,r){var i=x(this,e.call(this));return i.name=t,i.args=n,i.ancestor=r,i}return S(t,e),t.prototype.evaluate=function(e,t,n){var r=Qe(e,this.args,t),i=N(this.name,e,this.ancestor),o=Ke(i,this.name,n);if(o)return o.apply(i,r)},t.prototype.accept=function(e){return e.visitCallScope(this)},t.prototype.connect=function(e,t){for(var n=this.args,r=n.length;r--;)n[r].connect(e,t)},t}(Te),je=e.CallMember=function(e){function t(t,n,r){var i=x(this,e.call(this));return i.object=t,i.name=n,i.args=r,i}return S(t,e),t.prototype.evaluate=function(e,t,n){var r=this.object.evaluate(e,t),i=Qe(e,this.args,t),o=Ke(r,this.name,n);if(o)return o.apply(r,i)},t.prototype.accept=function(e){return e.visitCallMember(this)},t.prototype.connect=function(e,t){if(this.object.connect(e,t),Ke(this.object.evaluate(t),this.name,!1))for(var n=this.args,r=n.length;r--;)n[r].connect(e,t)},t}(Te),Fe=e.CallFunction=function(e){function t(t,n){var r=x(this,e.call(this));return r.func=t,r.args=n,r}return S(t,e),t.prototype.evaluate=function(e,t,n){var r=this.func.evaluate(e,t);if("function"==typeof r)return r.apply(null,Qe(e,this.args,t));if(n||null!=r)throw new Error(this.func+" is not a function")},t.prototype.accept=function(e){return e.visitCallFunction(this)},t.prototype.connect=function(e,t){if(this.func.connect(e,t),"function"==typeof this.func.evaluate(t))for(var n=this.args,r=n.length;r--;)n[r].connect(e,t)},t}(Te),Ve=e.Binary=function(e){function t(t,n,r){var i=x(this,e.call(this));return i.operation=t,i.left=n,i.right=r,i}return S(t,e),t.prototype.evaluate=function(e,t){var n=this.left.evaluate(e,t);switch(this.operation){case"&&":return n&&this.right.evaluate(e,t);case"||":return n||this.right.evaluate(e,t)}var r=this.right.evaluate(e,t);switch(this.operation){case"==":return n==r;case"===":return n===r;case"!=":return n!=r;case"!==":return n!==r;case"instanceof":return"function"==typeof r&&n instanceof r;case"in":return"object"===(void 0===r?"undefined":b(r))&&null!==r&&n in r}if(null===n||null===r||void 0===n||void 0===r){switch(this.operation){case"+":return null!=n?n:null!=r?r:0;case"-":return null!=n?n:null!=r?0-r:0}return null}switch(this.operation){case"+":return function(e,t){if(null!==e&&null!==t)return"string"==typeof e&&"string"!=typeof t?e+t.toString():"string"!=typeof e&&"string"==typeof t?e.toString()+t:e+t;if(null!==e)return e;if(null!==t)return t;return 0}(n,r);case"-":return n-r;case"*":return n*r;case"/":return n/r;case"%":return n%r;case"<":return n<r;case">":return n>r;case"<=":return n<=r;case">=":return n>=r;case"^":return n^r}throw new Error("Internal error ["+this.operation+"] not handled")},t.prototype.accept=function(e){return e.visitBinary(this)},t.prototype.connect=function(e,t){this.left.connect(e,t);var n=this.left.evaluate(t);"&&"===this.operation&&!n||"||"===this.operation&&n||this.right.connect(e,t)},t}(Te),Be=e.Unary=function(e){function t(t,n){var r=x(this,e.call(this));return r.operation=t,r.expression=n,r}return S(t,e),t.prototype.evaluate=function(e,t){switch(this.operation){case"!":return!this.expression.evaluate(e,t);case"typeof":return b(this.expression.evaluate(e,t));case"void":return void this.expression.evaluate(e,t)}throw new Error("Internal error ["+this.operation+"] not handled")},t.prototype.accept=function(e){return e.visitPrefix(this)},t.prototype.connect=function(e,t){this.expression.connect(e,t)},t}(Te),qe=e.LiteralPrimitive=function(e){function t(t){var n=x(this,e.call(this));return n.value=t,n}return S(t,e),t.prototype.evaluate=function(e,t){return this.value},t.prototype.accept=function(e){return e.visitLiteralPrimitive(this)},t.prototype.connect=function(e,t){},t}(Te),Ue=e.LiteralString=function(e){function t(t){var n=x(this,e.call(this));return n.value=t,n}return S(t,e),t.prototype.evaluate=function(e,t){return this.value},t.prototype.accept=function(e){return e.visitLiteralString(this)},t.prototype.connect=function(e,t){},t}(Te),He=e.LiteralTemplate=function(e){function t(t,n,r,i){var o=x(this,e.call(this));if(o.cooked=t,o.expressions=n||[],o.length=o.expressions.length,o.tagged=void 0!==i,o.tagged)if(o.cooked.raw=r,o.tag=i,i instanceof Pe)o.contextType="Scope";else{if(!(i instanceof Me||i instanceof Le))throw new Error(o.tag+" is not a valid template tag");o.contextType="Object"}return o}return S(t,e),t.prototype.getScopeContext=function(e,t){return N(this.tag.name,e,this.tag.ancestor)},t.prototype.getObjectContext=function(e,t){return this.tag.object.evaluate(e,t)},t.prototype.evaluate=function(e,t,n){for(var r=new Array(this.length),i=0;i<this.length;i++)r[i]=this.expressions[i].evaluate(e,t);if(this.tagged){var o=this.tag.evaluate(e,t);if("function"==typeof o){var s=this["get"+this.contextType+"Context"](e,t);return o.call.apply(o,[s,this.cooked].concat(r))}if(!n)return null;throw new Error(this.tag+" is not a function")}for(var a=this.cooked[0],u=0;u<this.length;u++)a=String.prototype.concat(a,r[u],this.cooked[u+1]);return a},t.prototype.accept=function(e){return e.visitLiteralTemplate(this)},t.prototype.connect=function(e,t){for(var n=0;n<this.length;n++)this.expressions[n].connect(e,t);this.tagged&&this.tag.connect(e,t)},t}(Te),We=e.LiteralArray=function(e){function t(t){var n=x(this,e.call(this));return n.elements=t,n}return S(t,e),t.prototype.evaluate=function(e,t){for(var n=this.elements,r=[],i=0,o=n.length;i<o;++i)r[i]=n[i].evaluate(e,t);return r},t.prototype.accept=function(e){return e.visitLiteralArray(this)},t.prototype.connect=function(e,t){for(var n=this.elements.length,r=0;r<n;r++)this.elements[r].connect(e,t)},t}(Te),ze=e.LiteralObject=function(e){function t(t,n){var r=x(this,e.call(this));return r.keys=t,r.values=n,r}return S(t,e),t.prototype.evaluate=function(e,t){for(var n={},r=this.keys,i=this.values,o=0,s=r.length;o<s;++o)n[r[o]]=i[o].evaluate(e,t);return n},t.prototype.accept=function(e){return e.visitLiteralObject(this)},t.prototype.connect=function(e,t){for(var n=this.keys.length,r=0;r<n;r++)this.values[r].connect(e,t)},t}(Te);function Qe(e,t,n){for(var r=t.length,i=[],o=0;o<r;o++)i[o]=t[o].evaluate(e,n);return i}function Ke(e,t,n){var r=null==e?null:e[t];if("function"==typeof r)return r;if(!n&&null==r)return null;throw new Error(t+" is not a function")}var Ge=null;e.Unparser=Ge,"undefined"==typeof FEATURE_NO_UNPARSER&&(e.Unparser=Ge=function(){function e(e){this.buffer=e}return e.unparse=function(e){var t=[],n=new Ge(t);return e.accept(n),t.join("")},e.prototype.write=function(e){this.buffer.push(e)},e.prototype.writeArgs=function(e){this.write("(");for(var t=0,n=e.length;t<n;++t)0!==t&&this.write(","),e[t].accept(this);this.write(")")},e.prototype.visitBindingBehavior=function(e){var t=e.args;e.expression.accept(this),this.write("&"+e.name);for(var n=0,r=t.length;n<r;++n)this.write(":"),t[n].accept(this)},e.prototype.visitValueConverter=function(e){var t=e.args;e.expression.accept(this),this.write("|"+e.name);for(var n=0,r=t.length;n<r;++n)this.write(":"),t[n].accept(this)},e.prototype.visitAssign=function(e){e.target.accept(this),this.write("="),e.value.accept(this)},e.prototype.visitConditional=function(e){e.condition.accept(this),this.write("?"),e.yes.accept(this),this.write(":"),e.no.accept(this)},e.prototype.visitAccessThis=function(e){if(0!==e.ancestor){this.write("$parent");for(var t=e.ancestor-1;t--;)this.write(".$parent")}else this.write("$this")},e.prototype.visitAccessScope=function(e){for(var t=e.ancestor;t--;)this.write("$parent.");this.write(e.name)},e.prototype.visitAccessMember=function(e){e.object.accept(this),this.write("."+e.name)},e.prototype.visitAccessKeyed=function(e){e.object.accept(this),this.write("["),e.key.accept(this),this.write("]")},e.prototype.visitCallScope=function(e){for(var t=e.ancestor;t--;)this.write("$parent.");this.write(e.name),this.writeArgs(e.args)},e.prototype.visitCallFunction=function(e){e.func.accept(this),this.writeArgs(e.args)},e.prototype.visitCallMember=function(e){e.object.accept(this),this.write("."+e.name),this.writeArgs(e.args)},e.prototype.visitPrefix=function(e){this.write("("+e.operation),e.operation.charCodeAt(0)>=97&&this.write(" "),e.expression.accept(this),this.write(")")},e.prototype.visitBinary=function(e){e.left.accept(this),105===e.operation.charCodeAt(0)?this.write(" "+e.operation+" "):this.write(e.operation),e.right.accept(this)},e.prototype.visitLiteralPrimitive=function(e){this.write(""+e.value)},e.prototype.visitLiteralArray=function(e){var t=e.elements;this.write("[");for(var n=0,r=t.length;n<r;++n)0!==n&&this.write(","),t[n].accept(this);this.write("]")},e.prototype.visitLiteralObject=function(e){var t=e.keys,n=e.values;this.write("{");for(var r=0,i=t.length;r<i;++r)0!==r&&this.write(","),this.write("'"+t[r]+"':"),n[r].accept(this);this.write("}")},e.prototype.visitLiteralString=function(e){var t=e.value.replace(/'/g,"'");this.write("'"+t+"'")},e.prototype.visitLiteralTemplate=function(e){var t=e.cooked,n=e.expressions,r=n.length;this.write("`"),this.write(t[0]);for(var i=0;i<r;i++)n[i].accept(this),this.write(t[i+1]);this.write("`")},e}());var Ye=e.ExpressionCloner=function(){function e(){}return e.prototype.cloneExpressionArray=function(e){for(var t=[],n=e.length;n--;)t[n]=e[n].accept(this);return t},e.prototype.visitBindingBehavior=function(e){return new Oe(e.expression.accept(this),e.name,this.cloneExpressionArray(e.args))},e.prototype.visitValueConverter=function(e){return new Ie(e.expression.accept(this),e.name,this.cloneExpressionArray(e.args))},e.prototype.visitAssign=function(e){return new Ae(e.target.accept(this),e.value.accept(this))},e.prototype.visitConditional=function(e){return new Ne(e.condition.accept(this),e.yes.accept(this),e.no.accept(this))},e.prototype.visitAccessThis=function(e){return new Re(e.ancestor)},e.prototype.visitAccessScope=function(e){return new Pe(e.name,e.ancestor)},e.prototype.visitAccessMember=function(e){return new Me(e.object.accept(this),e.name)},e.prototype.visitAccessKeyed=function(e){return new Le(e.object.accept(this),e.key.accept(this))},e.prototype.visitCallScope=function(e){return new De(e.name,this.cloneExpressionArray(e.args),e.ancestor)},e.prototype.visitCallFunction=function(e){return new Fe(e.func.accept(this),this.cloneExpressionArray(e.args))},e.prototype.visitCallMember=function(e){return new je(e.object.accept(this),e.name,this.cloneExpressionArray(e.args))},e.prototype.visitUnary=function(e){return new Be(prefix.operation,prefix.expression.accept(this))},e.prototype.visitBinary=function(e){return new Ve(e.operation,e.left.accept(this),e.right.accept(this))},e.prototype.visitLiteralPrimitive=function(e){return new qe(e)},e.prototype.visitLiteralArray=function(e){return new We(this.cloneExpressionArray(e.elements))},e.prototype.visitLiteralObject=function(e){return new ze(e.keys,this.cloneExpressionArray(e.values))},e.prototype.visitLiteralString=function(e){return new Ue(e.value)},e.prototype.visitLiteralTemplate=function(e){return new He(e.cooked,this.cloneExpressionArray(e.expressions),e.raw,e.tag&&e.tag.accept(this))},e}();var $e=e.bindingMode={oneTime:0,toView:1,oneWay:1,twoWay:2,fromView:3},Xe=e.Parser=function(){function e(){this.cache=Object.create(null)}return e.prototype.parse=function(e){return e=e||"",this.cache[e]||(this.cache[e]=new Ze(e).parseBindingBehavior())},e}(),Je=String.fromCharCode,Ze=e.ParserImplementation=function(){function e(e){this.idx=0,this.start=0,this.src=e,this.len=e.length,this.tkn=ft,this.val=void 0,this.ch=e.charCodeAt(0)}return m(e,[{key:"raw",get:function(){return this.src.slice(this.start,this.idx)}}]),e.prototype.parseBindingBehavior=function(){this.nextToken(),this.tkn&pt&&this.err("Invalid start of expression");for(var e=this.parseValueConverter();this.opt(Bt);)e=new Oe(e,this.val,this.parseVariadicArgs());return this.tkn!==ft&&this.err("Unconsumed token "+this.raw),e},e.prototype.parseValueConverter=function(){for(var e=this.parseExpression();this.opt(qt);)e=new Ie(e,this.val,this.parseVariadicArgs());return e},e.prototype.parseVariadicArgs=function(){this.nextToken();for(var e=[];this.opt(Ft);)e.push(this.parseExpression());return e},e.prototype.parseExpression=function(){for(var e=this.idx,t=this.parseConditional();this.tkn===cn;)t.isAssignable||this.err("Expression "+this.src.slice(e,this.start)+" is not assignable"),this.nextToken(),e=this.idx,t=new Ae(t,this.parseConditional());return t},e.prototype.parseConditional=function(){var e=this.parseBinary(0);if(this.opt(Vt)){var t=this.parseExpression();this.expect(Ft),e=new Ne(e,t,this.parseExpression())}return e},e.prototype.parseBinary=function(e){for(var t=this.parseLeftHandSide(0);this.tkn&wt;){var n=this.tkn;if((n&ht)<=e)break;this.nextToken(),t=new Ve(pn[n&lt],t,this.parseBinary(n&ht))}return t},e.prototype.parseLeftHandSide=function(e){var t=void 0;e:switch(this.tkn){case tn:return this.nextToken(),this.parseLeftHandSide(0);case nn:return this.nextToken(),new Ve("-",new qe(0),this.parseLeftHandSide(0));case ln:case rn:case on:var n=pn[this.tkn&lt];return this.nextToken(),new Be(n,this.parseLeftHandSide(0));case It:do{if(this.nextToken(),e++,this.opt(Rt))this.tkn===Rt&&this.err();else{if(this.tkn&dt){t=new Re(e&ct),e=e&at|tt;break e}this.err()}}while(this.tkn===It);case vt:t=new Pe(this.val,e&ct),this.nextToken(),e=e&at|nt;break;case Ot:this.nextToken(),t=new Re(0),e=e&at|tt;break;case At:this.nextToken(),t=this.parseExpression(),this.expect(Mt),e=st;break;case Dt:this.nextToken();var r=[];if(this.tkn!==jt)do{r.push(this.parseExpression())}while(this.opt(Lt));this.expect(jt),t=new We(r),e=st;break;case Nt:var i=[],o=[];for(this.nextToken();this.tkn!==Pt;){if(this.tkn&gt){var s=this.ch,a=this.tkn,u=this.idx;i.push(this.val),this.nextToken(),this.opt(Ft)?o.push(this.parseExpression()):(this.ch=s,this.tkn=a,this.idx=u,o.push(this.parseLeftHandSide(at)))}else this.tkn&yt?(i.push(this.val),this.nextToken(),this.expect(Ft),o.push(this.parseExpression())):this.err();this.tkn!==Pt&&this.expect(Lt)}this.expect(Pt),t=new ze(i,o),e=st;break;case bt:t=new Ue(this.val),this.nextToken(),e=st;break;case Ct:t=new He([this.val]),this.nextToken(),e=st;break;case Et:t=this.parseTemplate(0),e=st;break;case mt:t=new qe(this.val),this.nextToken();break;case kt:case Tt:case St:case xt:t=new qe(pn[this.tkn&lt]),this.nextToken(),e=st;break;default:this.idx>=this.len?this.err("Unexpected end of expression"):this.err()}if(e&at)return t;for(var c=this.val;this.tkn&_t;)switch(this.tkn){case Rt:if(this.nextToken(),this.tkn&gt||this.err(),c=this.val,this.nextToken(),e=e&st|(e&(tt|nt))<<1|e&rt|(e&it)>>1|(e&ot)>>2,this.tkn===At)continue;t=e&nt?new Pe(c,t.ancestor):new Me(t,c);continue;case Dt:this.nextToken(),e=it,t=new Le(t,this.parseExpression()),this.expect(jt);break;case At:this.nextToken();for(var l=[];this.tkn!==Mt&&(l.push(this.parseExpression()),this.opt(Lt)););this.expect(Mt),t=e&nt?new De(c,l,t.ancestor):e&(rt|st)?new je(t,c,l):new Fe(t,l),e=ot;break;case Ct:t=new He([this.val],[],[this.raw],t),this.nextToken();break;case Et:t=this.parseTemplate(e|ut,t)}return t},e.prototype.parseTemplate=function(e,t){var n=[this.val],r=e&ut?[this.raw]:void 0;this.expect(Et);for(var i=[this.parseExpression()];(this.tkn=this.scanTemplateTail())!==Ct;)n.push(this.val),e&ut&&r.push(this.raw),this.expect(Et),i.push(this.parseExpression());return n.push(this.val),e&ut&&r.push(this.raw),this.nextToken(),new He(n,i,r,t)},e.prototype.nextToken=function(){for(;this.idx<this.len;)if(this.ch<=32)this.next();else{if(this.start=this.idx,36===this.ch||this.ch>=97&&this.ch<=122)return void(this.tkn=this.scanIdentifier());if(null!==(this.tkn=Cn[this.ch](this)))return}this.tkn=ft},e.prototype.next=function(){return this.ch=this.src.charCodeAt(++this.idx)},e.prototype.scanIdentifier=function(){for(;wn.has(this.next())||this.ch>127&&_n[this.ch];);return hn[this.val=this.raw]||vt},e.prototype.scanNumber=function(e){if(e)this.val=0;else for(this.val=this.ch-48;this.next()<=57&&this.ch>=48;)this.val=10*this.val+this.ch-48;if(e||46===this.ch){e||this.next();for(var t=this.idx,n=this.ch-48;this.next()<=57&&this.ch>=48;)n=10*n+this.ch-48;this.val=this.val+n/Math.pow(10,this.idx-t)}if(101===this.ch||69===this.ch){var r=this.idx;for(this.next(),45!==this.ch&&43!==this.ch||this.next(),this.ch>=48&&this.ch<=57||(this.idx=r,this.err("Invalid exponent"));this.next()<=57&&this.ch>=48;);this.val=parseFloat(this.src.slice(this.start,this.idx))}return mt},e.prototype.scanString=function(){var e=this.ch;this.next();for(var t=void 0,n=this.idx;this.ch!==e;)if(92===this.ch){t||(t=[]),t.push(this.src.slice(n,this.idx)),this.next();var r=void 0;if(117===this.ch)if(this.next(),this.idx+4<this.len){var i=this.src.slice(this.idx,this.idx+4);/[A-Z0-9]{4}/i.test(i)||this.err("Invalid unicode escape [\\u"+i+"]"),r=parseInt(i,16),this.idx+=4,this.ch=this.src.charCodeAt(this.idx)}else this.err();else r=et(this.ch),this.next();t.push(Je(r)),n=this.idx}else 0===this.ch||this.idx>=this.len?this.err("Unterminated quote"):this.next();var o=this.src.slice(n,this.idx);this.next();var s=o;return null!=t&&(t.push(o),s=t.join("")),this.val=s,bt},e.prototype.scanTemplate=function(){for(var e=!0,t="";96!==this.next();)if(36===this.ch){if(this.idx+1<this.len&&123===this.src.charCodeAt(this.idx+1)){this.idx++,e=!1;break}t+="$"}else 92===this.ch?t+=Je(et(this.next())):0===this.ch||this.idx>=this.len?this.err("Unterminated template literal"):t+=Je(this.ch);return this.next(),this.val=t,e?Ct:Et},e.prototype.scanTemplateTail=function(){return this.idx>=this.len&&this.err("Unterminated template"),this.idx--,this.scanTemplate()},e.prototype.err=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected token "+this.raw,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.start;throw new Error("Parser Error: "+e+" at column "+t+" in expression ["+this.src+"]")},e.prototype.opt=function(e){return this.tkn===e&&(this.nextToken(),!0)},e.prototype.expect=function(e){this.tkn===e?this.nextToken():this.err("Missing expected token "+pn[e&lt],this.idx)},e}();function et(e){switch(e){case 102:return 12;case 110:return 10;case 114:return 13;case 116:return 9;case 118:return 11;default:return e}}var tt=1024,nt=2048,rt=4096,it=8192,ot=16384,st=32768,at=65536,ut=1<<17,ct=511,lt=63,ht=448,pt=2048,dt=16384,ft=65536|dt|pt,vt=1<<17,gt=32768|vt,yt=1<<18,mt=1<<19|yt,bt=1<<20|yt,wt=1<<21,_t=1<<24,Ct=1<<25|_t,Et=1<<26|_t,xt=32768|yt,St=32769|yt,kt=32770|yt,Tt=32771|yt,Ot=4|gt,It=5|gt,At=8198|dt|_t,Nt=8199,Rt=8388616|_t,Pt=4105|dt|pt,Mt=4106|dt|pt,Lt=11|dt,Dt=8204|dt|1<<23|_t,jt=4109|pt,Ft=14|dt,Vt=15,Bt=18|dt,qt=19|dt,Ut=84|wt,Ht=149|wt,Wt=214|wt,zt=279|wt,Qt=280|wt,Kt=281|wt,Gt=282|wt,Yt=347|wt,$t=348|wt,Xt=349|wt,Jt=350|wt,Zt=33119|wt,en=33120|wt,tn=417|wt|1<<22,nn=418|wt|1<<22,rn=4227107,on=4227108,sn=485|wt,an=486|wt,un=487|wt,cn=40,ln=4194345,hn=Object.create(null);hn.true=St,hn.null=kt,hn.false=xt,hn.undefined=Tt,hn.$this=Ot,hn.$parent=It,hn.in=Zt,hn.instanceof=en,hn.typeof=rn,hn.void=on;var pn=[!1,!0,null,void 0,"$this","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","^","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!"],dn=[36,0,48,58,65,91,95,0,97,123],fn=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],vn=[48,58],gn=[0,33,127,161];function yn(e,t,n,r){for(var i=n.length,o=0;o<i;o+=2){var s=n[o],a=n[o+1];if(a=a>0?a:s+1,e)for(var u=s;u<a;)e[u]=r,u++;if(t)for(var c=s;c<a;c++)t.add(c)}}function mn(e){return function(t){return t.next(),e}}function bn(e){return e.err("Unexpected character ["+Je(e.ch)+"]"),null}var wn=new Set;yn(null,wn,dn,!0);var _n=new Uint8Array(65535);yn(_n,null,fn,1),yn(_n,null,vn,1);for(var Cn=new Array(65535),En=0;En<65535;)Cn[En]=bn,En++;yn(Cn,null,gn,(function(e){return e.next(),null})),yn(Cn,null,fn,(function(e){return e.scanIdentifier()})),yn(Cn,null,vn,(function(e){return e.scanNumber(!1)})),Cn[34]=Cn[39]=function(e){return e.scanString()},Cn[96]=function(e){return e.scanTemplate()},Cn[33]=function(e){return 61!==e.next()?ln:61!==e.next()?Qt:(e.next(),Gt)},Cn[61]=function(e){return 61!==e.next()?cn:61!==e.next()?zt:(e.next(),Kt)},Cn[38]=function(e){return 38!==e.next()?Bt:(e.next(),Ht)},Cn[124]=function(e){return 124!==e.next()?qt:(e.next(),Ut)},Cn[46]=function(e){return e.next()<=57&&e.ch>=48?e.scanNumber(!0):Rt},Cn[60]=function(e){return 61!==e.next()?Yt:(e.next(),Xt)},Cn[62]=function(e){return 61!==e.next()?$t:(e.next(),Jt)},Cn[37]=mn(an),Cn[40]=mn(At),Cn[41]=mn(Mt),Cn[42]=mn(sn),Cn[43]=mn(tn),Cn[44]=mn(Lt),Cn[45]=mn(nn),Cn[47]=mn(un),Cn[58]=mn(Ft),Cn[63]=mn(Vt),Cn[91]=mn(Dt),Cn[93]=mn(jt),Cn[94]=mn(Wt),Cn[123]=mn(Nt),Cn[125]=mn(Pt);var xn=Map.prototype;function Sn(e,t){return kn.for(e,t)}e.getMapObserver=Sn;var kn=function(e){function t(t,n){return x(this,e.call(this,t,n))}return S(t,e),t.for=function(e,n){return"__map_observer__"in n||Reflect.defineProperty(n,"__map_observer__",{value:t.create(e,n),enumerable:!1,configurable:!1}),n.__map_observer__},t.create=function(e,n){var r=new t(e,n),i=xn;return i.set===n.set&&i.delete===n.delete&&i.clear===n.clear||(i={set:n.set,delete:n.delete,clear:n.clear}),n.set=function(){var e=n.has(arguments[0]),t=e?"update":"add",o=n.get(arguments[0]),s=i.set.apply(n,arguments);return e&&o===n.get(arguments[0])||r.addChangeRecord({type:t,object:n,key:arguments[0],oldValue:o}),s},n.delete=function(){var e=n.has(arguments[0]),t=n.get(arguments[0]),o=i.delete.apply(n,arguments);return e&&r.addChangeRecord({type:"delete",object:n,key:arguments[0],oldValue:t}),o},n.clear=function(){var e=i.clear.apply(n,arguments);return r.addChangeRecord({type:"clear",object:n}),e},r},t}(ve),Tn=w.getLogger("event-manager");function On(e){return e.path&&e.path[0]||e.deepPath&&e.deepPath[0]||e.target}function In(){this.standardStopPropagation(),this.propagationStopped=!0}function An(e){e.propagationStopped=!1;for(var t=On(e),n=[];t;){if(t.capturedCallbacks){var r=t.capturedCallbacks[e.type];r&&(e.stopPropagation!==In&&(e.standardStopPropagation=e.stopPropagation,e.stopPropagation=In),n.push(r))}t=t.parentNode}for(var i=n.length-1;i>=0&&!e.propagationStopped;i--){var o=n[i];"handleEvent"in o?o.handleEvent(e):o(e)}}var Nn=function(){function e(e){this.eventName=e,this.count=0}return e.prototype.increment=function(){this.count++,1===this.count&&_.DOM.addEventListener(this.eventName,An,!0)},e.prototype.decrement=function(){0===this.count?Tn.warn("The same EventListener was disposed multiple times."):0==--this.count&&_.DOM.removeEventListener(this.eventName,An,!0)},e}(),Rn=function(){function e(e,t){this.eventName=e,this.count=0,this.eventManager=t}return e.prototype.handleEvent=function(e){e.propagationStopped=!1;for(var t=On(e);t&&!e.propagationStopped;){if(t.delegatedCallbacks){var n=t.delegatedCallbacks[e.type];n&&(e.stopPropagation!==In&&(e.standardStopPropagation=e.stopPropagation,e.stopPropagation=In),"handleEvent"in n?n.handleEvent(e):n(e))}var r=t.parentNode;t=this.eventManager.escapeShadowRoot&&r instanceof ShadowRoot?r.host:r}},e.prototype.increment=function(){this.count++,1===this.count&&_.DOM.addEventListener(this.eventName,this,!1)},e.prototype.decrement=function(){0===this.count?Tn.warn("The same EventListener was disposed multiple times."):0==--this.count&&_.DOM.removeEventListener(this.eventName,this,!1)},e}(),Pn=function(){function e(e,t,n){this.entry=e,this.lookup=t,this.targetEvent=n}return e.prototype.dispose=function(){this.lookup[this.targetEvent]?(this.entry.decrement(),this.lookup[this.targetEvent]=null):Tn.warn("Calling .dispose() on already disposed eventListener")},e}(),Mn=function(){function e(e,t,n){this.target=e,this.targetEvent=t,this.callback=n}return e.prototype.dispose=function(){this.target.removeEventListener(this.targetEvent,this.callback)},e}(),Ln=function(){function e(e){this.delegatedHandlers={},this.capturedHandlers={},this.eventManager=e}return e.prototype.subscribe=function(e,t,n,r,i){var o=void 0,s=void 0,a=void 0;if(r===Dn.bubbling){o=this.delegatedHandlers,a=o[t]||(o[t]=new Rn(t,this.eventManager));var u=e.delegatedCallbacks||(e.delegatedCallbacks={});return u[t]?Tn.warn("Overriding previous callback for event listener",{event:t,callback:n,previousCallback:u[t]}):a.increment(),u[t]=n,!0===i?new Pn(a,u,t):function(){a.decrement(),u[t]=null}}if(r===Dn.capturing){s=this.capturedHandlers,a=s[t]||(s[t]=new Nn(t));var c=e.capturedCallbacks||(e.capturedCallbacks={});return c[t]?Tn.error("already have a callback for event",{event:t,callback:n}):a.increment(),c[t]=n,!0===i?new Pn(a,c,t):function(){a.decrement(),c[t]=null}}return e.addEventListener(t,n),!0===i?new Mn(e,t,n):function(){e.removeEventListener(t,n)}},e}(),Dn=e.delegationStrategy={none:0,capturing:1,bubbling:2},jn=e.EventManager=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.elementHandlerLookup={},this.eventStrategyLookup={},this.escapeShadowRoot=e,this.registerElementConfig({tagName:"input",properties:{value:["change","input"],checked:["change","input"],files:["change","input"]}}),this.registerElementConfig({tagName:"textarea",properties:{value:["change","input"]}}),this.registerElementConfig({tagName:"select",properties:{value:["change"]}}),this.registerElementConfig({tagName:"content editable",properties:{value:["change","input","blur","keyup","paste"]}}),this.registerElementConfig({tagName:"scrollable element",properties:{scrollTop:["scroll"],scrollLeft:["scroll"]}}),this.defaultEventStrategy=new Ln(this)}return e.prototype.registerElementConfig=function(e){var t=e.tagName.toLowerCase(),n=e.properties,r=void 0,i=this.elementHandlerLookup[t]={};for(r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},e.prototype.registerEventStrategy=function(e,t){this.eventStrategyLookup[e]=t},e.prototype.getElementHandler=function(e,t){var n=void 0,r=this.elementHandlerLookup;if(e.tagName){if(r[n=e.tagName.toLowerCase()]&&r[n][t])return new Fn(r[n][t]);if("textContent"===t||"innerHTML"===t)return new Fn(r["content editable"].value);if("scrollTop"===t||"scrollLeft"===t)return new Fn(r["scrollable element"][t])}return null},e.prototype.addEventListener=function(e,t,n,r,i){return(this.eventStrategyLookup[t]||this.defaultEventStrategy).subscribe(e,t,n,r,i)},e}(),Fn=e.EventSubscriber=function(){function e(e){this.events=e,this.element=null,this.handler=null}return e.prototype.subscribe=function(e,t){this.element=e,this.handler=t;for(var n=this.events,r=0,i=n.length;i>r;++r)e.addEventListener(n[r],t)},e.prototype.dispose=function(){if(null!==this.element){for(var e=this.element,t=this.handler,n=this.events,r=0,i=n.length;i>r;++r)e.removeEventListener(n[r],t);this.element=this.handler=null}},e}(),Vn=e.DirtyChecker=function(){function e(){this.tracked=[],this.checkDelay=120}return e.prototype.addProperty=function(e){var t=this.tracked;t.push(e),1===t.length&&this.scheduleDirtyCheck()},e.prototype.removeProperty=function(e){var t=this.tracked;t.splice(t.indexOf(e),1)},e.prototype.scheduleDirtyCheck=function(){var e=this;setTimeout((function(){return e.check()}),this.checkDelay)},e.prototype.check=function(){for(var e=this.tracked,t=e.length;t--;){var n=e[t];n.isDirty()&&n.call()}e.length&&this.scheduleDirtyCheck()},e}(),Bn=e.DirtyCheckProperty=oe()(u=function(){function e(e,t,n){this.dirtyChecker=e,this.obj=t,this.propertyName=n}return e.prototype.getValue=function(){return this.obj[this.propertyName]},e.prototype.setValue=function(e){this.obj[this.propertyName]=e},e.prototype.call=function(){var e=this.oldValue,t=this.getValue();this.callSubscribers(t,e),this.oldValue=t},e.prototype.isDirty=function(){return this.oldValue!==this.obj[this.propertyName]},e.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.oldValue=this.getValue(),this.dirtyChecker.addProperty(this)),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&this.dirtyChecker.removeProperty(this)},e}())||u,qn=w.getLogger("property-observation"),Un=e.propertyAccessor={getValue:function(e,t){return e[t]},setValue:function(e,t,n){t[n]=e}},Hn=e.PrimitiveObserver=function(){function e(e,t){this.doNotCache=!0,this.primitive=e,this.propertyName=t}return e.prototype.getValue=function(){return this.primitive[this.propertyName]},e.prototype.setValue=function(){var e=b(this.primitive);throw new Error("The "+this.propertyName+" property of a "+e+" ("+this.primitive+") cannot be assigned.")},e.prototype.subscribe=function(){},e.prototype.unsubscribe=function(){},e}(),Wn=e.SetterObserver=oe()(c=function(){function e(e,t,n){this.taskQueue=e,this.obj=t,this.propertyName=n,this.queued=!1,this.observing=!1}return e.prototype.getValue=function(){return this.obj[this.propertyName]},e.prototype.setValue=function(e){this.obj[this.propertyName]=e},e.prototype.getterValue=function(){return this.currentValue},e.prototype.setterValue=function(e){var t=this.currentValue;t!==e&&(this.queued||(this.oldValue=t,this.queued=!0,this.taskQueue.queueMicroTask(this)),this.currentValue=e)},e.prototype.call=function(){var e=this.oldValue,t=this.currentValue;this.queued=!1,this.callSubscribers(t,e)},e.prototype.subscribe=function(e,t){this.observing||this.convertProperty(),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e.prototype.convertProperty=function(){this.observing=!0,this.currentValue=this.obj[this.propertyName],this.setValue=this.setterValue,this.getValue=this.getterValue,Reflect.defineProperty(this.obj,this.propertyName,{configurable:!0,enumerable:!(this.propertyName in this.obj)||this.obj.propertyIsEnumerable(this.propertyName),get:this.getValue.bind(this),set:this.setValue.bind(this)})||qn.warn("Cannot observe property '"+this.propertyName+"' of object",this.obj)},e}())||c,zn=e.XLinkAttributeObserver=function(){function e(e,t,n){this.element=e,this.propertyName=t,this.attributeName=n}return e.prototype.getValue=function(){return this.element.getAttributeNS("http://www.w3.org/1999/xlink",this.attributeName)},e.prototype.setValue=function(e){return this.element.setAttributeNS("http://www.w3.org/1999/xlink",this.attributeName,e)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}(),Qn=e.dataAttributeAccessor={getValue:function(e,t){return e.getAttribute(t)},setValue:function(e,t,n){null==e?t.removeAttribute(n):t.setAttribute(n,e)}},Kn=e.DataAttributeObserver=function(){function e(e,t){this.element=e,this.propertyName=t}return e.prototype.getValue=function(){return this.element.getAttribute(this.propertyName)},e.prototype.setValue=function(e){return null==e?this.element.removeAttribute(this.propertyName):this.element.setAttribute(this.propertyName,e)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}(),Gn=e.StyleObserver=function(){function e(e,t){this.element=e,this.propertyName=t,this.styles=null,this.version=0}return e.prototype.getValue=function(){return this.element.style.cssText},e.prototype._setProperty=function(e,t){var n="";null!=t&&"function"==typeof t.indexOf&&-1!==t.indexOf("!important")&&(n="important",t=t.replace("!important","")),this.element.style.setProperty(e,t,n)},e.prototype.setValue=function(e){var t=this.styles||{},n=void 0,r=this.version;if(null!=e)if(e instanceof Object){var i=void 0;for(n in e)e.hasOwnProperty(n)&&(i=e[n],t[n=n.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()}))]=r,this._setProperty(n,i))}else if(e.length)for(var o=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:^"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g,s=void 0;null!==(s=o.exec(e));)(n=s[1])&&(t[n]=r,this._setProperty(n,s[2]));if(this.styles=t,this.version+=1,0!==r)for(n in r-=1,t)t.hasOwnProperty(n)&&t[n]===r&&this.element.style.removeProperty(n)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},e}(),Yn=e.ValueAttributeObserver=oe()(l=function(){function e(e,t,n){this.element=e,this.propertyName=t,this.handler=n,"files"===t&&(this.setValue=function(){})}return e.prototype.getValue=function(){return this.element[this.propertyName]},e.prototype.setValue=function(e){e=null==e?"":e,this.element[this.propertyName]!==e&&(this.element[this.propertyName]=e,this.notify())},e.prototype.notify=function(){var e=this.oldValue,t=this.getValue();this.callSubscribers(t,e),this.oldValue=t},e.prototype.handleEvent=function(){this.notify()},e.prototype.subscribe=function(e,t){this.hasSubscribers()||(this.oldValue=this.getValue(),this.handler.subscribe(this.element,this)),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&this.handler.dispose()},e}())||l,$n=e.CheckedObserver=oe()(h=function(){function e(e,t,n){this.element=e,this.handler=t,this.observerLocator=n}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){this.initialSync&&this.value===e||(this.arrayObserver&&(this.arrayObserver.unsubscribe("CheckedObserver:array",this),this.arrayObserver=null),"checkbox"===this.element.type&&Array.isArray(e)&&(this.arrayObserver=this.observerLocator.getArrayObserver(e),this.arrayObserver.subscribe("CheckedObserver:array",this)),this.oldValue=this.value,this.value=e,this.synchronizeElement(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},e.prototype.call=function(e,t){this.synchronizeElement(),this.valueObserver||(this.valueObserver=this.element.__observers__.model||this.element.__observers__.value,this.valueObserver&&this.valueObserver.subscribe("CheckedObserver:value",this))},e.prototype.synchronizeElement=function(){var e=this.value,t=this.element,n=t.hasOwnProperty("model")?t.model:t.value,r="radio"===t.type,i=t.matcher||function(e,t){return e===t};t.checked=r&&!!i(e,n)||!r&&!0===e||!r&&Array.isArray(e)&&-1!==e.findIndex((function(e){return!!i(e,n)}))},e.prototype.synchronizeValue=function(){var e=this.value,t=this.element,n=t.hasOwnProperty("model")?t.model:t.value,r=void 0,i=t.matcher||function(e,t){return e===t};if("checkbox"===t.type){if(Array.isArray(e))return r=e.findIndex((function(e){return!!i(e,n)})),void(t.checked&&-1===r?e.push(n):t.checked||-1===r||e.splice(r,1));e=t.checked}else{if(!t.checked)return;e=n}this.oldValue=this.value,this.value=e,this.notify()},e.prototype.notify=function(){var e=this.oldValue,t=this.value;t!==e&&this.callSubscribers(t,e)},e.prototype.handleEvent=function(){this.synchronizeValue()},e.prototype.subscribe=function(e,t){this.hasSubscribers()||this.handler.subscribe(this.element,this),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&this.handler.dispose()},e.prototype.unbind=function(){this.arrayObserver&&(this.arrayObserver.unsubscribe("CheckedObserver:array",this),this.arrayObserver=null),this.valueObserver&&this.valueObserver.unsubscribe("CheckedObserver:value",this)},e}())||h,Xn=e.SelectValueObserver=oe()(p=function(){function e(e,t,n){this.element=e,this.handler=t,this.observerLocator=n}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){if(null!=e&&this.element.multiple&&!Array.isArray(e))throw new Error("Only null or Array instances can be bound to a multi-select.");this.value!==e&&(this.arrayObserver&&(this.arrayObserver.unsubscribe("SelectValueObserver:array",this),this.arrayObserver=null),Array.isArray(e)&&(this.arrayObserver=this.observerLocator.getArrayObserver(e),this.arrayObserver.subscribe("SelectValueObserver:array",this)),this.oldValue=this.value,this.value=e,this.synchronizeOptions(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},e.prototype.call=function(e,t){this.synchronizeOptions()},e.prototype.synchronizeOptions=function(){var e=this.value,t=void 0;Array.isArray(e)&&(t=!0);for(var n=this.element.options,r=n.length,i=this.element.matcher||function(e,t){return e===t},o=function(){var o=n.item(r),s=o.hasOwnProperty("model")?o.model:o.value;if(t)return o.selected=-1!==e.findIndex((function(e){return!!i(s,e)})),"continue";o.selected=!!i(s,e)};r--;)o()},e.prototype.synchronizeValue=function(){for(var e=this,t=this.element.options,n=0,r=[],i=0,o=t.length;i<o;i++){var s=t.item(i);s.selected&&(r.push(s.hasOwnProperty("model")?s.model:s.value),n++)}if(this.element.multiple){if(Array.isArray(this.value)){var a=function(){for(var t=e.element.matcher||function(e,t){return e===t},n=0,i=function(){var i=e.value[n];-1===r.findIndex((function(e){return t(i,e)}))?e.value.splice(n,1):n++};n<e.value.length;)i();n=0;for(var o=function(){var i=r[n];-1===e.value.findIndex((function(e){return t(i,e)}))&&e.value.push(i),n++};n<r.length;)o();return{v:void 0}}();if("object"===(void 0===a?"undefined":b(a)))return a.v}}else r=0===n?null:r[0];r!==this.value&&(this.oldValue=this.value,this.value=r,this.notify())},e.prototype.notify=function(){var e=this.oldValue,t=this.value;this.callSubscribers(t,e)},e.prototype.handleEvent=function(){this.synchronizeValue()},e.prototype.subscribe=function(e,t){this.hasSubscribers()||this.handler.subscribe(this.element,this),this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)&&!this.hasSubscribers()&&this.handler.dispose()},e.prototype.bind=function(){var e=this;this.domObserver=_.DOM.createMutationObserver((function(){e.synchronizeOptions(),e.synchronizeValue()})),this.domObserver.observe(this.element,{childList:!0,subtree:!0,characterData:!0})},e.prototype.unbind=function(){this.domObserver.disconnect(),this.domObserver=null,this.arrayObserver&&(this.arrayObserver.unsubscribe("SelectValueObserver:array",this),this.arrayObserver=null)},e}())||p,Jn=e.ClassObserver=function(){function e(e){this.element=e,this.doNotCache=!0,this.value="",this.version=0}return e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(e){var t=this.nameIndex||{},n=this.version,r=void 0,i=void 0;if(null!=e&&e.length)for(var o=0,s=(r=e.split(/\s+/)).length;o<s;o++)""!==(i=r[o])&&(t[i]=n,this.element.classList.add(i));if(this.value=e,this.nameIndex=t,this.version+=1,0!==n)for(i in n-=1,t)t.hasOwnProperty(i)&&t[i]===n&&this.element.classList.remove(i)},e.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "class" property is not supported.')},e}();function Zn(e){return!!(e&&e.get&&e.get.dependencies)}var er=e.ComputedExpression=function(e){function t(t,n){var r=x(this,e.call(this));return r.name=t,r.dependencies=n,r.isAssignable=!0,r}return S(t,e),t.prototype.evaluate=function(e,t){return e.bindingContext[this.name]},t.prototype.assign=function(e,t){e.bindingContext[this.name]=t},t.prototype.accept=function(e){throw new Error("not implemented")},t.prototype.connect=function(e,t){for(var n=this.dependencies,r=n.length;r--;)n[r].connect(e,t)},t}(Te);function tr(e,t,n,r){var i=n.get.dependencies;if(!(i instanceof er)){for(var o=i.length;o--;)i[o]=r.parser.parse(i[o]);i=n.get.dependencies=new er(t,i)}var s={bindingContext:e,overrideContext:A(e)};return new se(s,i,r)}var nr=void 0,rr=void 0,ir=void 0,or=void 0;if("undefined"==typeof FEATURE_NO_SVG){nr={a:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","target","transform","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],altGlyph:["class","dx","dy","externalResourcesRequired","format","glyphRef","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],altGlyphDef:["id","xml:base","xml:lang","xml:space"],altGlyphItem:["id","xml:base","xml:lang","xml:space"],animate:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateColor:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateMotion:["accumulate","additive","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keyPoints","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","origin","path","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","rotate","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateTransform:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","type","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],circle:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","r","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],clipPath:["class","clipPathUnits","externalResourcesRequired","id","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],"color-profile":["id","local","name","rendering-intent","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],cursor:["externalResourcesRequired","id","requiredExtensions","requiredFeatures","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],defs:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],desc:["class","id","style","xml:base","xml:lang","xml:space"],ellipse:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],feBlend:["class","height","id","in","in2","mode","result","style","width","x","xml:base","xml:lang","xml:space","y"],feColorMatrix:["class","height","id","in","result","style","type","values","width","x","xml:base","xml:lang","xml:space","y"],feComponentTransfer:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feComposite:["class","height","id","in","in2","k1","k2","k3","k4","operator","result","style","width","x","xml:base","xml:lang","xml:space","y"],feConvolveMatrix:["bias","class","divisor","edgeMode","height","id","in","kernelMatrix","kernelUnitLength","order","preserveAlpha","result","style","targetX","targetY","width","x","xml:base","xml:lang","xml:space","y"],feDiffuseLighting:["class","diffuseConstant","height","id","in","kernelUnitLength","result","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feDisplacementMap:["class","height","id","in","in2","result","scale","style","width","x","xChannelSelector","xml:base","xml:lang","xml:space","y","yChannelSelector"],feDistantLight:["azimuth","elevation","id","xml:base","xml:lang","xml:space"],feFlood:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feFuncA:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncB:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncG:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncR:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feGaussianBlur:["class","height","id","in","result","stdDeviation","style","width","x","xml:base","xml:lang","xml:space","y"],feImage:["class","externalResourcesRequired","height","id","preserveAspectRatio","result","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],feMerge:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feMergeNode:["id","xml:base","xml:lang","xml:space"],feMorphology:["class","height","id","in","operator","radius","result","style","width","x","xml:base","xml:lang","xml:space","y"],feOffset:["class","dx","dy","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],fePointLight:["id","x","xml:base","xml:lang","xml:space","y","z"],feSpecularLighting:["class","height","id","in","kernelUnitLength","result","specularConstant","specularExponent","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feSpotLight:["id","limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","xml:base","xml:lang","xml:space","y","z"],feTile:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feTurbulence:["baseFrequency","class","height","id","numOctaves","result","seed","stitchTiles","style","type","width","x","xml:base","xml:lang","xml:space","y"],filter:["class","externalResourcesRequired","filterRes","filterUnits","height","id","primitiveUnits","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],font:["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],"font-face":["accent-height","alphabetic","ascent","bbox","cap-height","descent","font-family","font-size","font-stretch","font-style","font-variant","font-weight","hanging","id","ideographic","mathematical","overline-position","overline-thickness","panose-1","slope","stemh","stemv","strikethrough-position","strikethrough-thickness","underline-position","underline-thickness","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height","xml:base","xml:lang","xml:space"],"font-face-format":["id","string","xml:base","xml:lang","xml:space"],"font-face-name":["id","name","xml:base","xml:lang","xml:space"],"font-face-src":["id","xml:base","xml:lang","xml:space"],"font-face-uri":["id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],foreignObject:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],g:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],glyph:["arabic-form","class","d","glyph-name","horiz-adv-x","id","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],glyphRef:["class","dx","dy","format","glyphRef","id","style","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],hkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"],image:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],line:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","x1","x2","xml:base","xml:lang","xml:space","y1","y2"],linearGradient:["class","externalResourcesRequired","gradientTransform","gradientUnits","id","spreadMethod","style","x1","x2","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y1","y2"],marker:["class","externalResourcesRequired","id","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox","xml:base","xml:lang","xml:space"],mask:["class","externalResourcesRequired","height","id","maskContentUnits","maskUnits","requiredExtensions","requiredFeatures","style","systemLanguage","width","x","xml:base","xml:lang","xml:space","y"],metadata:["id","xml:base","xml:lang","xml:space"],"missing-glyph":["class","d","horiz-adv-x","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],mpath:["externalResourcesRequired","id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],path:["class","d","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","pathLength","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],pattern:["class","externalResourcesRequired","height","id","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],polygon:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],polyline:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],radialGradient:["class","cx","cy","externalResourcesRequired","fx","fy","gradientTransform","gradientUnits","id","r","spreadMethod","style","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],rect:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],script:["externalResourcesRequired","id","type","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],set:["attributeName","attributeType","begin","dur","end","externalResourcesRequired","fill","id","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],stop:["class","id","offset","style","xml:base","xml:lang","xml:space"],style:["id","media","title","type","xml:base","xml:lang","xml:space"],svg:["baseProfile","class","contentScriptType","contentStyleType","externalResourcesRequired","height","id","onabort","onactivate","onclick","onerror","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onresize","onscroll","onunload","onzoom","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","version","viewBox","width","x","xml:base","xml:lang","xml:space","y","zoomAndPan"],switch:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],symbol:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","style","viewBox","xml:base","xml:lang","xml:space"],text:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","transform","x","xml:base","xml:lang","xml:space","y"],textPath:["class","externalResourcesRequired","id","lengthAdjust","method","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","spacing","startOffset","style","systemLanguage","textLength","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],title:["class","id","style","xml:base","xml:lang","xml:space"],tref:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],tspan:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xml:base","xml:lang","xml:space","y"],use:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],view:["externalResourcesRequired","id","preserveAspectRatio","viewBox","viewTarget","xml:base","xml:lang","xml:space","zoomAndPan"],vkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"]},rr={a:!0,altGlyph:!0,animate:!0,animateColor:!0,circle:!0,clipPath:!0,defs:!0,ellipse:!0,feBlend:!0,feColorMatrix:!0,feComponentTransfer:!0,feComposite:!0,feConvolveMatrix:!0,feDiffuseLighting:!0,feDisplacementMap:!0,feFlood:!0,feGaussianBlur:!0,feImage:!0,feMerge:!0,feMorphology:!0,feOffset:!0,feSpecularLighting:!0,feTile:!0,feTurbulence:!0,filter:!0,font:!0,foreignObject:!0,g:!0,glyph:!0,glyphRef:!0,image:!0,line:!0,linearGradient:!0,marker:!0,mask:!0,"missing-glyph":!0,path:!0,pattern:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,svg:!0,switch:!0,symbol:!0,text:!0,textPath:!0,tref:!0,tspan:!0,use:!0},ir={"alignment-baseline":!0,"baseline-shift":!0,"clip-path":!0,"clip-rule":!0,clip:!0,"color-interpolation-filters":!0,"color-interpolation":!0,"color-profile":!0,"color-rendering":!0,color:!0,cursor:!0,direction:!0,display:!0,"dominant-baseline":!0,"enable-background":!0,"fill-opacity":!0,"fill-rule":!0,fill:!0,filter:!0,"flood-color":!0,"flood-opacity":!0,"font-family":!0,"font-size-adjust":!0,"font-size":!0,"font-stretch":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-horizontal":!0,"glyph-orientation-vertical":!0,"image-rendering":!0,kerning:!0,"letter-spacing":!0,"lighting-color":!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,mask:!0,opacity:!0,overflow:!0,"pointer-events":!0,"shape-rendering":!0,"stop-color":!0,"stop-opacity":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,stroke:!0,"text-anchor":!0,"text-decoration":!0,"text-rendering":!0,"unicode-bidi":!0,visibility:!0,"word-spacing":!0,"writing-mode":!0};var sr=function(e){var t=_.DOM.createElement("div");return t.innerHTML=e,t.firstChild};or=function(){function e(){"altglyph"===sr("<svg><altGlyph /></svg>").firstElementChild.nodeName&&ar.altGlyph&&(ar.altglyph=ar.altGlyph,delete ar.altGlyph,ar.altglyphdef=ar.altGlyphDef,delete ar.altGlyphDef,ar.altglyphitem=ar.altGlyphItem,delete ar.altGlyphItem,ar.glyphref=ar.glyphRef,delete ar.glyphRef)}return e.prototype.isStandardSvgAttribute=function(e,t){return ur[e]&&cr[t]||ar[e]&&-1!==ar[e].indexOf(t)},e}()}var ar=e.elements=nr,ur=e.presentationElements=rr,cr=e.presentationAttributes=ir,lr=e.SVGAnalyzer=or||function(){function e(){}return e.prototype.isStandardSvgAttribute=function(){return!1},e}(),hr=e.ObserverLocator=(f=d=function(){function e(e,t,n,r,i){this.taskQueue=e,this.eventManager=t,this.dirtyChecker=n,this.svgAnalyzer=r,this.parser=i,this.adapters=[],this.logger=w.getLogger("observer-locator")}return e.prototype.getObserver=function(e,t){var n,r=e.__observers__;return r&&t in r?r[t]:((n=this.createPropertyObserver(e,t)).doNotCache||(void 0===r&&(r=this.getOrCreateObserversLookup(e)),r[t]=n),n)},e.prototype.getOrCreateObserversLookup=function(e){return e.__observers__||this.createObserversLookup(e)},e.prototype.createObserversLookup=function(e){var t={};return Reflect.defineProperty(e,"__observers__",{enumerable:!1,configurable:!1,writable:!1,value:t})||this.logger.warn("Cannot add observers to object",e),t},e.prototype.addAdapter=function(e){this.adapters.push(e)},e.prototype.getAdapterObserver=function(e,t,n){for(var r=0,i=this.adapters.length;r<i;r++){var o=this.adapters[r].getObserver(e,t,n);if(o)return o}return null},e.prototype.createPropertyObserver=function(e,t){var n,r=void 0,i=void 0;if(!(e instanceof Object))return new Hn(e,t);if(e instanceof _.DOM.Element){if("class"===t)return new Jn(e);if("style"===t||"css"===t)return new Gn(e,t);if(r=this.eventManager.getElementHandler(e,t),"value"===t&&"select"===e.tagName.toLowerCase())return new Xn(e,r,this);if("checked"===t&&"input"===e.tagName.toLowerCase())return new $n(e,r,this);if(r)return new Yn(e,t,r);if(i=/^xlink:(.+)$/.exec(t))return new zn(e,t,i[1]);if("role"===t&&(e instanceof _.DOM.Element||e instanceof _.DOM.SVGElement)||/^\w+:|^data-|^aria-/.test(t)||e instanceof _.DOM.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(e.nodeName,t))return new Kn(e,t)}if(Zn(n=Object.getPropertyDescriptor(e,t)))return tr(e,t,n,this);if(n){var o=n.get||n.set;if(o){if(o.getObserver)return o.getObserver(e);var s=this.getAdapterObserver(e,t,n);return s||new Bn(this.dirtyChecker,e,t)}}return e instanceof Array?"length"===t?this.getArrayObserver(e).getLengthObserver():new Bn(this.dirtyChecker,e,t):e instanceof Map?"size"===t?this.getMapObserver(e).getLengthObserver():new Bn(this.dirtyChecker,e,t):e instanceof Set?"size"===t?this.getSetObserver(e).getLengthObserver():new Bn(this.dirtyChecker,e,t):new Wn(this.taskQueue,e,t)},e.prototype.getAccessor=function(e,t){if(e instanceof _.DOM.Element){if("class"===t||"style"===t||"css"===t||"value"===t&&("input"===e.tagName.toLowerCase()||"select"===e.tagName.toLowerCase())||"checked"===t&&"input"===e.tagName.toLowerCase()||"model"===t&&"input"===e.tagName.toLowerCase()||/^xlink:.+$/.exec(t))return this.getObserver(e,t);if(/^\w+:|^data-|^aria-/.test(t)||e instanceof _.DOM.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(e.nodeName,t)||"img"===e.tagName.toLowerCase()&&"src"===t||"a"===e.tagName.toLowerCase()&&"href"===t)return Qn}return Un},e.prototype.getArrayObserver=function(e){return Se(this.taskQueue,e)},e.prototype.getMapObserver=function(e){return Sn(this.taskQueue,e)},e.prototype.getSetObserver=function(e){return Cr(this.taskQueue,e)},e}(),d.inject=[C.TaskQueue,jn,Vn,lr,Xe],f),pr=(e.ObjectObservationAdapter=function(){function e(){}return e.prototype.getObserver=function(e,t,n){throw new Error("BindingAdapters must implement getObserver(object, propertyName).")},e}(),e.BindingExpression=function(){function e(e,t,n,r,i,o){this.observerLocator=e,this.targetProperty=t,this.sourceExpression=n,this.mode=r,this.lookupFunctions=i,this.attribute=o,this.discrete=!1}return e.prototype.createBinding=function(e){return new dr(this.observerLocator,this.sourceExpression,e,this.targetProperty,this.mode,this.lookupFunctions)},e}()),dr=e.Binding=B()(v=function(){function e(e,t,n,r,i,o){this.observerLocator=e,this.sourceExpression=t,this.target=n,this.targetProperty=r,this.mode=i,this.lookupFunctions=o}return e.prototype.updateTarget=function(e){this.targetObserver.setValue(e,this.target,this.targetProperty)},e.prototype.updateSource=function(e){this.sourceExpression.assign(this.source,e,this.lookupFunctions)},e.prototype.call=function(e,t,n){if(this.isBound){if(e===T)return n=this.targetObserver.getValue(this.target,this.targetProperty),(t=this.sourceExpression.evaluate(this.source,this.lookupFunctions))!==n&&this.updateTarget(t),void(this.mode!==$e.oneTime&&(this._version++,this.sourceExpression.connect(this,this.source),this.unobserve(!1)));if(e!==k)throw new Error("Unexpected call context "+e);t!==this.sourceExpression.evaluate(this.source,this.lookupFunctions)&&this.updateSource(t)}},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions);var t=this.mode;if(!this.targetObserver){var n=t===$e.twoWay||t===$e.fromView?"getObserver":"getAccessor";this.targetObserver=this.observerLocator[n](this.target,this.targetProperty)}if("bind"in this.targetObserver&&this.targetObserver.bind(),this.mode!==$e.fromView){var r=this.sourceExpression.evaluate(e,this.lookupFunctions);this.updateTarget(r)}t!==$e.oneTime&&(t===$e.toView?Y(this):t===$e.twoWay?(this.sourceExpression.connect(this,e),this.targetObserver.subscribe(k,this)):t===$e.fromView&&this.targetObserver.subscribe(k,this))},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,"unbind"in this.targetObserver&&this.targetObserver.unbind(),this.targetObserver.unsubscribe&&this.targetObserver.unsubscribe(k,this),this.unobserve(!0))},e.prototype.connect=function(e){if(this.isBound){if(e){var t=this.sourceExpression.evaluate(this.source,this.lookupFunctions);this.updateTarget(t)}this.sourceExpression.connect(this,this.source)}},e}())||v,fr=(e.CallExpression=function(){function e(e,t,n,r){this.observerLocator=e,this.targetProperty=t,this.sourceExpression=n,this.lookupFunctions=r}return e.prototype.createBinding=function(e){return new fr(this.observerLocator,this.sourceExpression,e,this.targetProperty,this.lookupFunctions)},e}(),e.Call=function(){function e(e,t,n,r,i){this.sourceExpression=t,this.target=n,this.targetProperty=e.getObserver(n,r),this.lookupFunctions=i}return e.prototype.callSource=function(e){var t=this.source.overrideContext;Object.assign(t,e),t.$event=e;var n=this.sourceExpression.evaluate(this.source,this.lookupFunctions,!0);for(var r in delete t.$event,e)delete t[r];return n},e.prototype.bind=function(e){var t=this;if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions),this.targetProperty.setValue((function(e){return t.callSource(e)}))},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this.targetProperty.setValue(null))},e}()),vr=e.ValueConverterResource=function(){function e(e){this.name=e}return e.convention=function(t){if(t.endsWith("ValueConverter"))return new e(I(t.substring(0,t.length-14)))},e.prototype.initialize=function(e,t){this.instance=e.get(t)},e.prototype.register=function(e,t){e.registerValueConverter(t||this.name,this.instance)},e.prototype.load=function(e,t){},e}();var gr=e.BindingBehaviorResource=function(){function e(e){this.name=e}return e.convention=function(t){if(t.endsWith("BindingBehavior"))return new e(I(t.substring(0,t.length-15)))},e.prototype.initialize=function(e,t){this.instance=e.get(t)},e.prototype.register=function(e,t){e.registerBindingBehavior(t||this.name,this.instance)},e.prototype.load=function(e,t){},e}();e.ListenerExpression=function(){function e(e,t,n,r,i,o){this.eventManager=e,this.targetEvent=t,this.sourceExpression=n,this.delegationStrategy=r,this.discrete=!0,this.preventDefault=i,this.lookupFunctions=o}return e.prototype.createBinding=function(e){return new yr(this.eventManager,this.targetEvent,this.delegationStrategy,this.sourceExpression,e,this.preventDefault,this.lookupFunctions)},e}();var yr=e.Listener=function(){function e(e,t,n,r,i,o,s){this.eventManager=e,this.targetEvent=t,this.delegationStrategy=n,this.sourceExpression=r,this.target=i,this.preventDefault=o,this.lookupFunctions=s}return e.prototype.callSource=function(e){var t=this.source.overrideContext;t.$event=e;var n=this.sourceExpression.evaluate(this.source,this.lookupFunctions,!0);return delete t.$event,!0!==n&&this.preventDefault&&e.preventDefault(),n},e.prototype.handleEvent=function(e){this.callSource(e)},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions),this._handler=this.eventManager.addEventListener(this.target,this.targetEvent,this,this.delegationStrategy,!0)},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this._handler.dispose(),this._handler=null)},e}();function mr(e){var t=e.au;if(void 0===t)throw new Error('No Aurelia APIs are defined for the element: "'+e.tagName+'".');return t}e.NameExpression=function(){function e(e,t,n){this.sourceExpression=e,this.apiName=t,this.lookupFunctions=n,this.discrete=!0}return e.prototype.createBinding=function(t){return new br(this.sourceExpression,e.locateAPI(t,this.apiName),this.lookupFunctions)},e.locateAPI=function(e,t){switch(t){case"element":return e;case"controller":return mr(e).controller;case"view-model":return mr(e).controller.viewModel;case"view":return mr(e).controller.view;default:var n=mr(e)[t];if(void 0===n)throw new Error('Attempted to reference "'+t+"\", but it was not found amongst the target's API.");return n.viewModel}},e}();var br=function(){function e(e,t,n){this.sourceExpression=e,this.target=t,this.lookupFunctions=n}return e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions),this.sourceExpression.assign(this.source,this.target,this.lookupFunctions)},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.evaluate(this.source,this.lookupFunctions)===this.target&&this.sourceExpression.assign(this.source,null,this.lookupFunctions),this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null)},e}(),wr={bindingBehaviors:function(e){return null},valueConverters:function(e){return null}},_r=(e.BindingEngine=(y=g=function(){function e(e,t){this.observerLocator=e,this.parser=t}return e.prototype.createBindingExpression=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$e.toView,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wr;return new pr(this.observerLocator,e,this.parser.parse(t),n,r)},e.prototype.propertyObserver=function(e,t){var n=this;return{subscribe:function(r){var i=n.observerLocator.getObserver(e,t);return i.subscribe(r),{dispose:function(){return i.unsubscribe(r)}}}}},e.prototype.collectionObserver=function(e){var t=this;return{subscribe:function(n){var r=void 0;if(e instanceof Array)r=t.observerLocator.getArrayObserver(e);else if(e instanceof Map)r=t.observerLocator.getMapObserver(e);else{if(!(e instanceof Set))throw new Error("collection must be an instance of Array, Map or Set.");r=t.observerLocator.getSetObserver(e)}return r.subscribe(n),{dispose:function(){return r.unsubscribe(n)}}}}},e.prototype.expressionObserver=function(e,t){var n={bindingContext:e,overrideContext:A(e)};return new se(n,this.parser.parse(t),this.observerLocator,wr)},e.prototype.parseExpression=function(e){return this.parser.parse(e)},e.prototype.registerAdapter=function(e){this.observerLocator.addAdapter(e)},e}(),g.inject=[hr,Xe],y),Set.prototype);function Cr(e,t){return Er.for(e,t)}e.getSetObserver=Cr;var Er=function(e){function t(t,n){return x(this,e.call(this,t,n))}return S(t,e),t.for=function(e,n){return"__set_observer__"in n||Reflect.defineProperty(n,"__set_observer__",{value:t.create(e,n),enumerable:!1,configurable:!1}),n.__set_observer__},t.create=function(e,n){var r=new t(e,n),i=_r;return i.add===n.add&&i.delete===n.delete&&i.clear===n.clear||(i={add:n.add,delete:n.delete,clear:n.clear}),n.add=function(){var e="add",t=n.size,o=i.add.apply(n,arguments),s=n.size===t;return s||r.addChangeRecord({type:e,object:n,value:Array.from(n).pop()}),o},n.delete=function(){var e=n.has(arguments[0]),t=i.delete.apply(n,arguments);return e&&r.addChangeRecord({type:"delete",object:n,value:arguments[0]}),t},n.clear=function(){var e=i.clear.apply(n,arguments);return r.addChangeRecord({type:"clear",object:n}),e},r},t}(ve);var xr={};function Sr(e,t){xr.hasOwnProperty(t)||(xr[t]=0),e.observeProperty(xr,t)}})),e.entry="dist/commonjs/aurelia-binding.js"})),e.pkg("aurelia-bootstrapper",{},(function(e){return e.file("dist/commonjs/aurelia-bootstrapper.js",(function(e,t,n,r,i){var o=t("process");Object.defineProperty(e,"__esModule",{value:!0}),e.starting=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.bootstrap=g,t("aurelia-polyfills");var a=t("aurelia-pal"),u=[],c=void 0,l=new Promise((function(e){return c=e})),h=a.PLATFORM.global,p=void 0!==o&&!o.browser;function d(){if(a.PLATFORM.Loader)return Promise.resolve(new a.PLATFORM.Loader);if("undefined"==typeof AURELIA_WEBPACK_2_0){if("undefined"!=typeof __webpack_require__){var e=__webpack_require__(t.resolve("aurelia-loader-webpack"));return Promise.resolve(new e.WebpackLoader)}if(h.System&&"function"==typeof h.System.config)return h.System.normalize("aurelia-bootstrapper").then((function(e){return h.System.normalize("aurelia-loader-default",e)})).then((function(e){return h.System.import(e).then((function(e){return new e.DefaultLoader}))}));if("function"==typeof h.require&&"function"==typeof h.define&&"object"===s(h.define.amd))return new Promise((function(e,t){return h.require(["aurelia-loader-default"],(function(t){return e(new t.DefaultLoader)}),t)}));if(p&&void 0!==n&&void 0!==n.require){var r=n.require("aurelia-loader-nodejs");return Promise.resolve(new r.NodeJsLoader)}}return Promise.reject("No PLATFORM.Loader is defined and there is neither a System API (ES6) or a Require API (AMD) globally available to load your app.")}function f(e){var t=function(t,n){return e.normalize(t,n).then((function(n){return e.map(t,n),n}))};return function(e){if(a.isInitialized)return Promise.resolve();var t=void 0,n=p&&("renderer"===o.type||o.versions["node-webkit"]);if(p&&!n)t="nodejs";else if("undefined"!=typeof window)t="browser";else{if("undefined"==typeof self)throw new Error("Could not determine platform implementation to load.");t="worker"}return e.loadModule("aurelia-pal-"+t).then((function(e){return"nodejs"===t&&!a.isInitialized&&e.globalize()||e.initialize()}))}(e).then((function(){return e.normalize("aurelia-bootstrapper")})).then((function(e){var n=t(a.PLATFORM.moduleName("aurelia-framework",{exports:["Aurelia"]}),e);return Promise.all([n,n.then((function(e){return t("aurelia-dependency-injection",e)})),t("aurelia-router",e),t("aurelia-logging-console",e)])})).then((function(t){var n=t[0];return e.loadModule(n)})).then((function(t){return c((function(){return new t.Aurelia(e)}))}))}function v(e,t,n){return n.host=e,n.configModuleId=t||null,t?n.loader.loadModule(t).then((function(e){if(!e.configure)throw new Error("Cannot initialize module '"+t+"' without a configure function.");return e.configure(n)})):(n.use.standardConfiguration().developmentLogging(),n.start().then((function(){return n.setRoot()})))}function g(e){var t=l.then((function(t){return e(t())}));return u&&u.push(t),t}e.starting=(h.document&&"complete"!==h.document.readyState?new Promise((function(e){function t(){h.document.removeEventListener("DOMContentLoaded",t),h.removeEventListener("load",t),e()}h.document.addEventListener("DOMContentLoaded",t),h.addEventListener("load",t)})):Promise.resolve()).then(d).then(f).then((function(){for(var e=h.document.querySelectorAll("[aurelia-app],[data-aurelia-app]"),t=0,n=e.length;t<n;++t){var r=e[t],i=r.getAttribute("aurelia-app")||r.getAttribute("data-aurelia-app");g(v.bind(null,r,i))}var o=console.error.bind(console),s=u.map((function(e){return e.catch(o)}));return u=null,Promise.all(s)}))})),e.entry="dist/commonjs/aurelia-bootstrapper.js"})),e.pkg("aurelia-dependency-injection",{},(function(e){return e.file("dist/commonjs/aurelia-dependency-injection.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("aurelia-metadata"),s=t("aurelia-pal");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function a(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e){var t=function(e){e.hasOwnProperty("inject")||(e.inject=(o.metadata.getOwn(o.metadata.paramTypes,e)||_).slice(),e.inject&&e.inject.length>0&&e.inject[e.inject.length-1]===Object&&e.inject.splice(-1,1))};return function(e){return!!e}(e)?t(e):t}var l=o.protocol.create("aurelia:resolver",(function(e){return"function"==typeof e.get||"Resolvers must implement: get(container: Container, key: any): any"}));function h(e,t,n){return e===t}var p=function(){function e(e,t){this.strategy=e,this.state=t}return e.prototype.get=function(e,t){if(h(this.strategy,0,this.state))return this.state;if(h(this.strategy,1,this.state)){var n=e.invoke(this.state);return this.state=n,this.strategy=0,n}if(h(this.strategy,2,this.state))return e.invoke(this.state);if(h(this.strategy,3,this.state))return this.state(e,t,this);if(h(this.strategy,4,this.state))return this.state[0].get(e,t);if(h(this.strategy,5,this.state))return e.get(this.state);throw new Error("Invalid strategy: "+this.strategy)},e=a([l(),u("design:paramtypes",[Number,Object])],e)}(),d=function(){function e(e){this._key=e}var t;return t=e,e.prototype.get=function(e){var t=this;return function(){return e.get(t._key)}},e.of=function(e){return new t(e)},e=t=a([l(),u("design:paramtypes",[Object])],e)}(),f=function(){function e(e){this._key=e}var t;return t=e,e.prototype.get=function(e){return e.getAll(this._key)},e.of=function(e){return new t(e)},e=t=a([l(),u("design:paramtypes",[Object])],e)}(),v=function(){function e(e,t){void 0===t&&(t=!0),this._key=e,this._checkParent=t}var t;return t=e,e.prototype.get=function(e){return e.hasResolver(this._key,this._checkParent)?e.get(this._key):null},e.of=function(e,n){return void 0===n&&(n=!0),new t(e,n)},e=t=a([l(),u("design:paramtypes",[Object,Boolean])],e)}(),g=function(){function e(e){this._key=e}var t;return t=e,e.prototype.get=function(e){return e.parent?e.parent.get(this._key):null},e.of=function(e){return new t(e)},e=t=a([l(),u("design:paramtypes",[Object])],e)}(),y=function(){function e(e){this._key=e}var t;return t=e,e.prototype.get=function(e){var t=this._key,n=e.getResolver(t);return n&&3===n.strategy&&(t=n.state),function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.invoke(t,n)}},e.of=function(e){return new t(e)},e=t=a([l(),u("design:paramtypes",[Object])],e)}(),m=function(){function e(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.key=e,this.asKey=e,this.dynamicDependencies=t}var t;return t=e,e.prototype.get=function(e){var t=this.dynamicDependencies.length>0?this.dynamicDependencies.map((function(t){return t["protocol:aurelia:resolver"]?t.get(e):e.get(t)})):void 0,n=this.key,r=e.getResolver(n);r&&3===r.strategy&&(n=r.state);var i=e.invoke(n,t);return e.registerInstance(this.asKey,i),i},e.prototype.as=function(e){return this.asKey=e,this},e.of=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new(t.bind.apply(t,[void 0,e].concat(n)))},e=t=a([l(),u("design:paramtypes",[Object,Object])],e)}();function b(e){return c(e),e.inject}function w(e){if(null==e)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}var _=Object.freeze([]);o.metadata.registration="aurelia:registration",o.metadata.invoker="aurelia:invoker";var C=l.decorates,E=function(){function e(e,t,n){this.fn=e,this.invoker=t,this.dependencies=n}return e.prototype.invoke=function(e,t){return void 0!==t?this.invoker.invokeWithDynamicDependencies(e,this.fn,this.dependencies,t):this.invoker.invoke(e,this.fn,this.dependencies)},e}();var x={invoke:function(e,t,n){var r=n.map((function(t){return e.get(t)}));return Reflect.construct(t,r)},invokeWithDynamicDependencies:function(e,t,n,r){for(var i,o=n.length,s=new Array(o);o--;){if(null==(i=n[o]))throw new Error("Constructor Parameter with index "+o+" cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?");s[o]=e.get(i)}return void 0!==r&&(s=s.concat(r)),Reflect.construct(t,s)}};var S=function(){function e(e){void 0===e&&(e={}),this._configuration=e,this._onHandlerCreated=e.onHandlerCreated,this._handlers=e.handlers||(e.handlers=new Map),this._resolvers=new Map,this.root=this,this.parent=null}return e.prototype.makeGlobal=function(){return e.instance=this,this},e.prototype.setHandlerCreatedCallback=function(e){this._onHandlerCreated=e,this._configuration.onHandlerCreated=e},e.prototype.registerInstance=function(e,t){return this.registerResolver(e,new p(0,void 0===t?e:t))},e.prototype.registerSingleton=function(e,t){return this.registerResolver(e,new p(1,void 0===t?e:t))},e.prototype.registerTransient=function(e,t){return this.registerResolver(e,new p(2,void 0===t?e:t))},e.prototype.registerHandler=function(e,t){return this.registerResolver(e,new p(3,t))},e.prototype.registerAlias=function(e,t){return this.registerResolver(t,new p(5,e))},e.prototype.registerResolver=function(e,t){w(e);var n=this._resolvers,r=n.get(e);return void 0===r?n.set(e,t):4===r.strategy?r.state.push(t):n.set(e,new p(4,[r,t])),t},e.prototype.autoRegister=function(e,t){if("function"==typeof(t=void 0===t?e:t)){var n=o.metadata.get(o.metadata.registration,t);return void 0===n?this.registerResolver(e,new p(1,t)):n.registerResolver(this,e,t)}return this.registerResolver(e,new p(0,t))},e.prototype.autoRegisterAll=function(e){for(var t=e.length;t--;)this.autoRegister(e[t])},e.prototype.unregister=function(e){this._resolvers.delete(e)},e.prototype.hasResolver=function(e,t){return void 0===t&&(t=!1),w(e),this._resolvers.has(e)||t&&null!==this.parent&&this.parent.hasResolver(e,t)},e.prototype.getResolver=function(e){return this._resolvers.get(e)},e.prototype.get=function(t){if(w(t),t===e)return this;if(C(t))return t.get(this,t);var n=this._resolvers.get(t);if(void 0===n){if(null===this.parent)return this.autoRegister(t).get(this,t);var r=o.metadata.get(o.metadata.registration,t);return void 0===r?this.parent._get(t):r.registerResolver(this,t,t).get(this,t)}return n.get(this,t)},e.prototype._get=function(e){var t=this._resolvers.get(e);return void 0===t?null===this.parent?this.autoRegister(e).get(this,e):this.parent._get(e):t.get(this,e)},e.prototype.getAll=function(e){w(e);var t=this._resolvers.get(e);if(void 0===t)return null===this.parent?_:this.parent.getAll(e);if(4===t.strategy){for(var n=t.state,r=n.length,i=new Array(r);r--;)i[r]=n[r].get(this,e);return i}return[t.get(this,e)]},e.prototype.createChild=function(){var t=new e(this._configuration);return t.root=this.root,t.parent=this,t},e.prototype.invoke=function(e,t){try{var n=this._handlers.get(e);return void 0===n&&(n=this._createInvocationHandler(e),this._handlers.set(e,n)),n.invoke(this,t)}catch(t){throw new s.AggregateError("Error invoking "+e.name+". Check the inner error for details.",t,!0)}},e.prototype._createInvocationHandler=function(e){var t,n;if(void 0===e.inject)t=o.metadata.getOwn(o.metadata.paramTypes,e)||_;else{t=[];for(var r=e;"function"==typeof r;)t.push.apply(t,(n=r).hasOwnProperty("inject")?"function"==typeof n.inject?n.inject():n.inject:[]),r=Object.getPrototypeOf(r)}var i=o.metadata.getOwn(o.metadata.invoker,e)||x,s=new E(e,i,t);return void 0!==this._onHandlerCreated?this._onHandlerCreated(s):s},e}();var k=function(){function e(){}return e.prototype.invoke=function(e,t,n){for(var r=n.length,i=new Array(r);r--;)i[r]=e.get(n[r]);return t.apply(void 0,i)},e.prototype.invokeWithDynamicDependencies=function(e,t,n,r){for(var i=n.length,o=new Array(i);i--;)o[i]=e.get(n[i]);return void 0!==r&&(o=o.concat(r)),t.apply(void 0,o)},e}();function T(e){return function(t){o.metadata.define(o.metadata.registration,e,t)}}k.instance=new k;var O=function(){function e(e){this._key=e}return e.prototype.registerResolver=function(e,t,n){var r=e.getResolver(this._key||t);return void 0===r?e.registerTransient(this._key||t,n):r},e}(),I=function(){function e(e,t){void 0===t&&(t=!1),"boolean"==typeof e?this._registerInChild=e:(this._key=e,this._registerInChild=t)}return e.prototype.registerResolver=function(e,t,n){var r=this._registerInChild?e:e.root,i=r.getResolver(this._key||t);return void 0===i?r.registerSingleton(this._key||t,n):i},e}();e._emptyParameters=_,e.InvocationHandler=E,e.Container=S,e.autoinject=c,e.inject=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t,n,r){if("number"==typeof r)return c(t),void(1===e.length&&(t.inject[r]=e[0]));r?r.value.inject=e:t.inject=e}},e.invoker=function(e){return function(t){o.metadata.define(o.metadata.invoker,e,t)}},e.invokeAsFactory=function(e){var t=function(e){o.metadata.define(o.metadata.invoker,k.instance,e)};return e?t(e):t},e.FactoryInvoker=k,e.registration=T,e.transient=function(e){return T(new O(e))},e.singleton=function(e,t){return void 0===t&&(t=!1),T(new I(e,t))},e.TransientRegistration=O,e.SingletonRegistration=I,e.resolver=l,e.StrategyResolver=p,e.Lazy=d,e.All=f,e.Optional=v,e.Parent=g,e.Factory=y,e.NewInstance=m,e.getDecoratorDependencies=b,e.lazy=function(e){return function(t,n,r){b(t)[r]=d.of(e)}},e.all=function(e){return function(t,n,r){b(t)[r]=f.of(e)}},e.optional=function(e){void 0===e&&(e=!0);var t=function(e){return function(t,n,r){var i=b(t);i[r]=v.of(i[r],e)}};return t("boolean"!=typeof e||e)},e.parent=function(e,t,n){var r=b(e);r[n]=g.of(r[n])},e.factory=function(e){return function(t,n,r){b(t)[r]=y.of(e)}},e.newInstance=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=function(e){return function(n,r,i){var o=b(n);o[i]=m.of.apply(m,[o[i]].concat(t)),e&&o[i].as(e)}};return arguments.length>=1?r(e):r()}})),e.entry="dist/commonjs/aurelia-dependency-injection.js"})),e.pkg("aurelia-event-aggregator",{},(function(e){return e.file("dist/commonjs/aurelia-event-aggregator.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EventAggregator=void 0,e.includeEventsIn=l,e.configure=function(e){e.instance(c,l(e.aurelia))};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(t("aurelia-logging")).getLogger("event-aggregator"),s=function(){function e(e,t){this.messageType=e,this.callback=t}return e.prototype.handle=function(e){e instanceof this.messageType&&this.callback.call(null,e)},e}();function a(e,t,n){try{e(t,n)}catch(e){o.error(e)}}function u(e,t){try{e.handle(t)}catch(e){o.error(e)}}var c=e.EventAggregator=function(){function e(){this.eventLookup={},this.messageHandlers=[]}return e.prototype.publish=function(e,t){var n=void 0,r=void 0;if(!e)throw new Error("Event was invalid.");if("string"==typeof e){if(n=this.eventLookup[e])for(r=(n=n.slice()).length;r--;)a(n[r],t,e)}else for(r=(n=this.messageHandlers.slice()).length;r--;)u(n[r],e)},e.prototype.subscribe=function(e,t){var n=void 0,r=void 0;if(!e)throw new Error("Event channel/type was invalid.");return"string"==typeof e?(n=t,r=this.eventLookup[e]||(this.eventLookup[e]=[])):(n=new s(e,t),r=this.messageHandlers),r.push(n),{dispose:function(){var e=r.indexOf(n);-1!==e&&r.splice(e,1)}}},e.prototype.subscribeOnce=function(e,t){var n=this.subscribe(e,(function(e,r){return n.dispose(),t(e,r)}));return n},e}();function l(e){var t=new c;return e.subscribeOnce=function(e,n){return t.subscribeOnce(e,n)},e.subscribe=function(e,n){return t.subscribe(e,n)},e.publish=function(e,n){t.publish(e,n)},t}})),e.entry="dist/commonjs/aurelia-event-aggregator.js"})),e.pkg("aurelia-fetch-client",{},(function(e){return e.file("dist/umd/aurelia-fetch-client.js",(function(e,t,n,r,i){!function(r,i){"object"==typeof e&&void 0!==n?i(e,t("aurelia-pal")):"function"==typeof define&&define.amd?define(["exports","aurelia-pal"],i):i(((r=r||self).au=r.au||{},r.au.fetchClient={}),r.au)}(this,(function(e,t){"use strict";var n={fixed:0,incremental:1,exponential:2,random:3},r={maxRetries:3,interval:1e3,strategy:n.fixed},i=function(){function e(e){if(this.retryConfig=Object.assign({},r,e||{}),this.retryConfig.strategy===n.exponential&&this.retryConfig.interval<=1e3)throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy")}return e.prototype.request=function(e){var t=e;return t.retryConfig||(t.retryConfig=Object.assign({},this.retryConfig),t.retryConfig.counter=0),t.retryConfig.requestClone=e.clone(),e},e.prototype.response=function(e,t){return delete t.retryConfig,e},e.prototype.responseError=function(e,r,i){var s=r.retryConfig,a=s.requestClone;return Promise.resolve().then((function(){if(s.counter<s.maxRetries){var u=!s.doRetry||s.doRetry(e,r);return Promise.resolve(u).then((function(u){if(u)return s.counter++,new Promise((function(e){return t.PLATFORM.global.setTimeout(e,function(e){var t=e.interval,r=e.strategy,i=e.minRandomInterval,s=e.maxRandomInterval,a=e.counter;if("function"==typeof r)return e.strategy(a);switch(r){case n.fixed:return o[n.fixed](t);case n.incremental:return o[n.incremental](a,t);case n.exponential:return o[n.exponential](a,t);case n.random:return o[n.random](a,t,i,s);default:throw new Error("Unrecognized retry strategy")}}(s)||0)})).then((function(){var e=a.clone();return"function"==typeof s.beforeRetry?s.beforeRetry(e,i):e})).then((function(e){return i.fetch(Object.assign(e,{retryConfig:s}))}));throw delete r.retryConfig,e}))}throw delete r.retryConfig,e}))},e}();var o=[function(e){return e},function(e,t){return t*e},function(e,t){return 1===e?t:Math.pow(t,e)/1e3},function(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=6e4),Math.random()*(r-n)+n}],s=function(){function e(){this.baseUrl="",this.defaults={},this.interceptors=[]}return e.prototype.withBaseUrl=function(e){return this.baseUrl=e,this},e.prototype.withDefaults=function(e){return this.defaults=e,this},e.prototype.withInterceptor=function(e){return this.interceptors.push(e),this},e.prototype.useStandardConfiguration=function(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()},e.prototype.rejectErrorResponses=function(){return this.withInterceptor({response:a})},e.prototype.withRetry=function(e){var t=new i(e);return this.withInterceptor(t)},e}();function a(e){if(!e.ok)throw e;return e}var u=function(){function e(){if(this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[],"undefined"==typeof fetch)throw new Error("HttpClient requires a Fetch API implementation, but the current environment doesn't support it. You may need to load a polyfill such as https://github.com/github/fetch")}return e.prototype.configure=function(e){var t;if("object"==typeof e)t={defaults:e};else{if("function"!=typeof e)throw new Error("invalid config");(t=new s).baseUrl=this.baseUrl,t.defaults=Object.assign({},this.defaults),t.interceptors=this.interceptors;var n=e(t);s.prototype.isPrototypeOf(n)&&(t=n)}var r=t.defaults;if(r&&Headers.prototype.isPrototypeOf(r.headers))throw new Error("Default headers must be a plain object.");var o=t.interceptors;if(o&&o.length){if(o.filter((function(e){return i.prototype.isPrototypeOf(e)})).length>1)throw new Error("Only one RetryInterceptor is allowed.");var a=o.findIndex((function(e){return i.prototype.isPrototypeOf(e)}));if(a>=0&&a!==o.length-1)throw new Error("The retry interceptor must be the last interceptor defined.")}return this.baseUrl=t.baseUrl,this.defaults=r,this.interceptors=t.interceptors||[],this.isConfigured=!0,this},e.prototype.fetch=function(e,n){var r=this;!function(e){if(e.isRequesting=!!++e.activeRequestCount,e.isRequesting){var n=t.DOM.createCustomEvent("aurelia-fetch-client-request-started",{bubbles:!0,cancelable:!0});setTimeout((function(){return t.DOM.dispatchEvent(n)}),1)}}(this);var i=this.buildRequest(e,n);return function(e,t,n){return h(e,t,"request","requestError",n)}(i,this.interceptors,this).then((function(e){var t=null;if(Response.prototype.isPrototypeOf(e))t=Promise.resolve(e);else{if(!Request.prototype.isPrototypeOf(e))throw new Error("An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got ["+e+"]");i=e,t=fetch(e)}return function(e,t,n,r){return h(e,t,"response","responseError",n,r)}(t,r.interceptors,i,r)})).then((function(e){return Request.prototype.isPrototypeOf(e)?r.fetch(e):e})).then((function(e){return l(r),e}),(function(e){throw l(r),e}))},e.prototype.buildRequest=function(e,t){var n,r,i,o=this.defaults||{},s=function(e){var t={};for(var n in e||{})e.hasOwnProperty(n)&&(t[n]="function"==typeof e[n]?e[n]():e[n]);return t}(o.headers);if(Request.prototype.isPrototypeOf(e))n=e,i=new Headers(n.headers).get("Content-Type");else{t||(t={});var a=(r=t.body)?{body:r}:null,u=Object.assign({},o,{headers:{}},t,a);i=new Headers(u.headers).get("Content-Type"),n=new Request(function(e,t){if(c.test(t))return t;return(e||"")+t}(this.baseUrl,e),u)}return i||(new Headers(s).has("content-type")?n.headers.set("Content-Type",new Headers(s).get("content-type")):r&&function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(r)&&n.headers.set("Content-Type","application/json")),function(e,t){for(var n in t||{})t.hasOwnProperty(n)&&!e.has(n)&&e.set(n,t[n])}(n.headers,s),r&&Blob.prototype.isPrototypeOf(r)&&r.type&&n.headers.set("Content-Type",r.type),n},e.prototype.get=function(e,t){return this.fetch(e,t)},e.prototype.post=function(e,t,n){return f(this,e,t,n,"POST")},e.prototype.put=function(e,t,n){return f(this,e,t,n,"PUT")},e.prototype.patch=function(e,t,n){return f(this,e,t,n,"PATCH")},e.prototype.delete=function(e,t,n){return f(this,e,t,n,"DELETE")},e}(),c=/^([a-z][a-z0-9+\-.]*:)?\/\//i;function l(e){if(e.isRequesting=!!--e.activeRequestCount,!e.isRequesting){var n=t.DOM.createCustomEvent("aurelia-fetch-client-requests-drained",{bubbles:!0,cancelable:!0});setTimeout((function(){return t.DOM.dispatchEvent(n)}),1)}}function h(e,t,n,r){for(var i=[],o=4;o<arguments.length;o++)i[o-4]=arguments[o];return(t||[]).reduce((function(e,t){var o=t[n],s=t[r];return e.then(o&&function(e){return o.call.apply(o,[t,e].concat(i))}||p,s&&function(e){return s.call.apply(s,[t,e].concat(i))}||d)}),Promise.resolve(e))}function p(e){return e}function d(e){throw e}function f(e,t,n,r,i){return r||(r={}),r.method=i,n&&(r.body=n),e.fetch(t,r)}e.json=function(e,t){return JSON.stringify(void 0!==e?e:{},t)},e.retryStrategy=n,e.RetryInterceptor=i,e.HttpClientConfiguration=s,e.HttpClient=u,Object.defineProperty(e,"__esModule",{value:!0})}))})),e.entry="dist/umd/aurelia-fetch-client.js"})),e.pkg("aurelia-framework",{},(function(e){return e.file("dist/commonjs/aurelia-framework.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogManager=e.FrameworkConfiguration=e.Aurelia=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=t("aurelia-dependency-injection");Object.keys(s).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})}));var a=t("aurelia-binding");Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}));var u=t("aurelia-metadata");Object.keys(u).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})}));var c=t("aurelia-templating");Object.keys(c).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})}));var l=t("aurelia-loader");Object.keys(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})}));var h=t("aurelia-task-queue");Object.keys(h).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})}));var p=t("aurelia-path");Object.keys(p).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})}));var d=t("aurelia-pal");Object.keys(d).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}})}));var f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(t("aurelia-logging"));e.Aurelia=function(){function e(t,n,r){this.loader=t||new d.PLATFORM.Loader,this.container=n||(new s.Container).makeGlobal(),this.resources=r||new c.ViewResources,this.use=new E(this),this.logger=f.getLogger("aurelia"),this.hostConfigured=!1,this.host=null,this.use.instance(e,this),this.use.instance(l.Loader,this.loader),this.use.instance(c.ViewResources,this.resources)}return e.prototype.start=function(){var e=this;return this._started?this._started:(this.logger.info("Aurelia Starting"),this._started=this.use.apply().then((function(){if(d.DOM.addEventListener("submit",(function(e){var t=e.target,n=t.action;"form"!==t.tagName.toLowerCase()||n||e.preventDefault()})),!e.container.hasResolver(c.BindingLanguage)){var t="You must configure Aurelia with a BindingLanguage implementation.";throw e.logger.error(t),new Error(t)}e.logger.info("Aurelia Started");var n=d.DOM.createCustomEvent("aurelia-started",{bubbles:!0,cancelable:!0});return d.DOM.dispatchEvent(n),e})))},e.prototype.enhance=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._configureHost(n||d.DOM.querySelectorAll("body")[0]),new Promise((function(n){var r=e.container.get(c.TemplatingEngine);e.root=r.enhance({container:e.container,element:e.host,resources:e.resources,bindingContext:t}),e.root.attached(),e._onAureliaComposed(),n(e)}))},e.prototype.setRoot=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={};this.root&&this.root.viewModel&&this.root.viewModel.router&&(this.root.viewModel.router.deactivate(),this.root.viewModel.router.reset()),this._configureHost(n);var i=this.container.get(c.TemplatingEngine),o=this.container.get(c.CompositionTransaction);return delete o.initialComposition,t||(t=this.configModuleId?(0,p.relativeToFile)("./app",this.configModuleId):"app"),r.viewModel=t,r.container=r.childContainer=this.container,r.viewSlot=this.hostSlot,r.host=this.host,i.compose(r).then((function(t){return e.root=t,r.viewSlot.attached(),e._onAureliaComposed(),e}))},e.prototype._configureHost=function(e){if(!this.hostConfigured){if(e=e||this.host,this.host=e&&"string"!=typeof e?e:d.DOM.getElementById(e||"applicationHost"),!this.host)throw new Error("No applicationHost was specified.");this.hostConfigured=!0,this.host.aurelia=this,this.hostSlot=new c.ViewSlot(this.host,!0),this.hostSlot.transformChildNodesIntoView(),this.container.registerInstance(d.DOM.boundary,this.host)}},e.prototype._onAureliaComposed=function(){var e=d.DOM.createCustomEvent("aurelia-composed",{bubbles:!0,cancelable:!0});setTimeout((function(){return d.DOM.dispatchEvent(e)}),1)},e}();var v=f.getLogger("aurelia"),g=/\.[^/.]+$/;function y(e,t){var n=void 0;return function r(){return(n=t.shift())?Promise.resolve(n(e)).then(r):Promise.resolve()}()}function m(e,t,n){if(0===Object.keys(t).length)return Promise.resolve();var r=e.container.get(c.ViewEngine);return Promise.all(Object.keys(t).map((function(n){return function(t){var n=t.moduleId,r=b(n);i(n)&&(n=o(n));return e.loader.normalize(n,t.relativeTo).then((function(e){return{name:t.moduleId,importId:i(t.moduleId)?s(e,r):e}}))}(t[n])}))).then((function(e){var t=[],i=[];return e.forEach((function(e){t.push(void 0),i.push(e.importId)})),r.importViewResources(i,t,n)}));function i(e){var t=b(e);return!!t&&(""!==t&&(".js"!==t&&".ts"!==t))}function o(e){return e.replace(g,"")}function s(e,t){return o(e)+"."+t}}function b(e){var t=e.match(g);if(t&&t.length>0)return t[0].split(".")[1]}function w(e){return Promise.all(e.behaviorsToLoad.map((function(t){return t.load(e.container,t.target)}))).then((function(){e.behaviorsToLoad=null}))}function _(e){if(e.processed)throw new Error("This config instance has already been applied. To load more plugins or global resources, create a new FrameworkConfiguration instance.")}function C(e,t){return"Invalid "+t+" ["+e+"], "+t+" must be specified as functions or relative module IDs."}var E=function(){function e(e){var t=this;this.aurelia=e,this.container=e.container,this.info=[],this.processed=!1,this.preTasks=[],this.postTasks=[],this.behaviorsToLoad=[],this.configuredPlugins=[],this.resourcesToLoad={},this.preTask((function(){return e.loader.normalize("aurelia-bootstrapper").then((function(e){return t.bootstrapperName=e}))})),this.postTask((function(){return m(e,t.resourcesToLoad,e.resources)}))}return e.prototype.instance=function(e,t){return this.container.registerInstance(e,t),this},e.prototype.singleton=function(e,t){return this.container.registerSingleton(e,t),this},e.prototype.transient=function(e,t){return this.container.registerTransient(e,t),this},e.prototype.preTask=function(e){return _(this),this.preTasks.push(e),this},e.prototype.postTask=function(e){return _(this),this.postTasks.push(e),this},e.prototype.feature=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(void 0===e?"undefined":o(e)){case"string":var n=/\/index$/i.test(e),r=n||b(e)?e:e+"/index",i=n?e.substr(0,e.length-6):e;this.info.push({moduleId:r,resourcesRelativeTo:[i,""],config:t});break;case"function":this.info.push({configure:e,config:t||{}});break;default:throw new Error(C(e,"feature"))}return this},e.prototype.globalResources=function(e){var t=this;_(this);for(var n=Array.isArray(e)?e:arguments,r=void 0,i=this.resourcesRelativeTo||["",""],s=0,a=n.length;s<a;++s)switch(void 0===(r=n[s])?"undefined":o(r)){case"string":var u=i[0],l=i[1],h=r;(r.startsWith("./")||r.startsWith("../"))&&""!==u&&(h=(0,p.join)(u,r)),this.resourcesToLoad[h]={moduleId:h,relativeTo:l};break;case"function":var d=this.aurelia.resources.autoRegister(this.container,r);d instanceof c.HtmlBehaviorResource&&null!==d.elementName&&1===this.behaviorsToLoad.push(d)&&this.postTask((function(){return w(t)}));break;default:throw new Error(C(r,"resource"))}return this},e.prototype.globalName=function(e,t){return _(this),this.resourcesToLoad[e]={moduleId:t,relativeTo:""},this},e.prototype.plugin=function(e,t){_(this);var n=void 0;switch(void 0===e?"undefined":o(e)){case"string":n={moduleId:e,resourcesRelativeTo:[e,""],config:t||{}};break;case"function":n={configure:e,config:t||{}};break;default:throw new Error(C(e,"plugin"))}return this.info.push(n),this},e.prototype._addNormalizedPlugin=function(e,t){var n=this,r={moduleId:e,resourcesRelativeTo:[e,""],config:t||{}};return this.info.push(r),this.preTask((function(){var t=[e,n.bootstrapperName];return r.moduleId=e,r.resourcesRelativeTo=t,Promise.resolve()})),this},e.prototype.defaultBindingLanguage=function(){return this._addNormalizedPlugin("aurelia-templating-binding")},e.prototype.router=function(){return this._addNormalizedPlugin("aurelia-templating-router")},e.prototype.history=function(){return this._addNormalizedPlugin("aurelia-history-browser")},e.prototype.defaultResources=function(){return this._addNormalizedPlugin("aurelia-templating-resources")},e.prototype.eventAggregator=function(){return this._addNormalizedPlugin("aurelia-event-aggregator")},e.prototype.basicConfiguration=function(){return this.defaultBindingLanguage().defaultResources().eventAggregator()},e.prototype.standardConfiguration=function(){return this.basicConfiguration().history().router()},e.prototype.developmentLogging=function(e){var t=this,n=e?f.logLevel[e]:void 0;return void 0===n&&(n=f.logLevel.debug),this.preTask((function(){return t.aurelia.loader.normalize("aurelia-logging-console",t.bootstrapperName).then((function(e){return t.aurelia.loader.loadModule(e).then((function(e){f.addAppender(new e.ConsoleAppender),f.setLevel(n)}))}))})),this},e.prototype.apply=function(){var e=this;return this.processed?Promise.resolve():y(this,this.preTasks).then((function(){var t=e.aurelia.loader,n=e.info,r=void 0;return function i(){return(r=n.shift())?function(e,t,n){if(v.debug("Loading plugin "+n.moduleId+"."),"string"==typeof n.moduleId){e.resourcesRelativeTo=n.resourcesRelativeTo;var r=n.moduleId;return n.resourcesRelativeTo.length>1?t.normalize(n.moduleId,n.resourcesRelativeTo[1]).then((function(e){return i(e)})):i(r)}if("function"==typeof n.configure)return-1!==e.configuredPlugins.indexOf(n.configure)?Promise.resolve():(e.configuredPlugins.push(n.configure),Promise.resolve(n.configure.call(null,e,n.config||{})));throw new Error(C(n.moduleId||n.configure,"plugin"));function i(r){return t.loadModule(r).then((function(t){if("configure"in t)return-1!==e.configuredPlugins.indexOf(t.configure)?Promise.resolve():Promise.resolve(t.configure(e,n.config||{})).then((function(){e.configuredPlugins.push(t.configure),e.resourcesRelativeTo=null,v.debug("Configured plugin "+n.moduleId+".")}));e.resourcesRelativeTo=null,v.debug("Loaded plugin "+n.moduleId+".")}))}}(e,t,r).then(i):(e.processed=!0,e.configuredPlugins=null,Promise.resolve())}().then((function(){return y(e,e.postTasks)}))}))},e}();e.FrameworkConfiguration=E;e.LogManager=f})),e.entry="dist/commonjs/aurelia-framework.js"})),e.pkg("aurelia-history-browser",{},(function(e){return e.file("dist/commonjs/aurelia-history-browser.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("aurelia-history"),s=t("aurelia-pal"),a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function u(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var c=function(){function e(){}return e.prototype.activate=function(e){},e.prototype.deactivate=function(){},e}(),l=function(e){function t(){var n=e.call(this)||this;return n.handler=function(e){var r=t.getEventInfo(e),i=r.shouldHandleEvent,o=r.href;i&&(e.preventDefault(),n.history.navigate(o))},n}return u(t,e),t.prototype.activate=function(e){e._hasPushState&&(this.history=e,s.DOM.addEventListener("click",this.handler,!0))},t.prototype.deactivate=function(){s.DOM.removeEventListener("click",this.handler,!0)},t.getEventInfo=function(e){var n=e,r={shouldHandleEvent:!1,href:null,anchor:null},i=t.findClosestAnchor(n.target);if(!i||!t.targetIsThisWindow(i))return r;if(h(i,"download")||h(i,"router-ignore")||h(i,"data-router-ignore"))return r;if(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)return r;var o=i.getAttribute("href");r.anchor=i,r.href=o;var s=1===n.which,a=o&&!("#"===o.charAt(0)||/^[a-z]+:/i.test(o));return r.shouldHandleEvent=s&&a,r},t.findClosestAnchor=function(e){for(;e;){if("A"===e.tagName)return e;e=e.parentNode}},t.targetIsThisWindow=function(e){var t=e.getAttribute("target"),n=s.PLATFORM.global;return!t||t===n.name||"_self"===t},t}(c),h=function(e,t){return e.hasAttribute(t)},p=function(e){function t(t){var n=e.call(this)||this;return n._isActive=!1,n._checkUrlCallback=n._checkUrl.bind(n),n.location=s.PLATFORM.location,n.history=s.PLATFORM.history,n.linkHandler=t,n}return u(t,e),t.prototype.activate=function(e){if(this._isActive)throw new Error("History has already been activated.");var t=this.history,n=!!e.pushState;this._isActive=!0;var r,i=this.options=Object.assign({},{root:"/"},this.options,e),o=this.root=("/"+i.root+"/").replace(f,"/"),a=this._wantsHashChange=!1!==i.hashChange,u=this._hasPushState=!!(i.pushState&&t&&t.pushState);if(u?r="popstate":a&&(r="hashchange"),s.PLATFORM.addEventListener(r,this._checkUrlCallback),a&&n){var c=this.location,l=c.pathname.replace(/[^\/]$/,"$&/")===o;if(!u&&!l){var h=this.fragment=this._getFragment(null,!0);return c.replace(o+c.search+"#"+h),!0}if(u&&l&&c.hash){h=this.fragment=this._getHash().replace(d,"");t.replaceState({},s.DOM.title,o+h+c.search)}}if(this.fragment||(this.fragment=this._getFragment("")),this.linkHandler.activate(this),!i.silent)return this._loadUrl("")},t.prototype.deactivate=function(){var e=this._checkUrlCallback;s.PLATFORM.removeEventListener("popstate",e),s.PLATFORM.removeEventListener("hashchange",e),this._isActive=!1,this.linkHandler.deactivate()},t.prototype.getAbsoluteRoot=function(){var e,t,n,r=this.location;return""+(e=r.protocol,t=r.hostname,n=r.port,e+"//"+t+(n?":"+n:""))+this.root},t.prototype.navigate=function(e,t){var n=void 0===t?{}:t,r=n.trigger,i=void 0===r||r,o=n.replace,a=void 0!==o&&o,u=this.location;if(e&&g.test(e))return u.href=e,!0;if(!this._isActive)return!1;if(e=this._getFragment(e||""),this.fragment===e&&!a)return!1;this.fragment=e;var c=this.root+e;return""===e&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState?(c=c.replace("//","/"),this.history[a?"replaceState":"pushState"]({},s.DOM.title,c)):this._wantsHashChange?function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}(u,e,a):u.assign(c),!i||this._loadUrl(e)},t.prototype.navigateBack=function(){this.history.back()},t.prototype.setTitle=function(e){s.DOM.title=e},t.prototype.setState=function(e,t){var n=this.history,r=Object.assign({},n.state),i=this.location,o=i.pathname,s=i.search,a=i.hash;r[e]=t,n.replaceState(r,null,""+o+s+a)},t.prototype.getState=function(e){return Object.assign({},this.history.state)[e]},t.prototype.getHistoryIndex=function(){var e=this.getState("HistoryIndex");return void 0===e&&(e=this.history.length-1,this.setState("HistoryIndex",e)),e},t.prototype.go=function(e){this.history.go(e)},t.prototype._getHash=function(){return this.location.hash.substr(1)},t.prototype._getFragment=function(e,t){var n;if(!e)if(this._hasPushState||!this._wantsHashChange||t){var r=this.location;e=r.pathname+r.search,n=this.root.replace(v,""),e.indexOf(n)||(e=e.substr(n.length))}else e=this._getHash();return"/"+e.replace(d,"")},t.prototype._checkUrl=function(){this._getFragment("")!==this.fragment&&this._loadUrl("")},t.prototype._loadUrl=function(e){var t=this.fragment=this._getFragment(e);return!!this.options.routeHandler&&this.options.routeHandler(t)},t.inject=[c],t}(o.History),d=/^#?\/*|\s+$/g,f=/^\/+|\/+$/g,v=/\/$/,g=/^([a-z][a-z0-9+\-.]*:)?\/\//i;e.BrowserHistory=p,e.DefaultLinkHandler=l,e.LinkHandler=c,e.configure=function(e){var t=e;t.singleton(o.History,p),t.transient(c,l)}})),e.entry="dist/commonjs/aurelia-history-browser.js"})),e.pkg("aurelia-history",{},(function(e){return e.file("dist/commonjs/aurelia-history.js",(function(e,t,n,r,i){"use strict";function o(e){throw new Error("History must implement "+e+"().")}Object.defineProperty(e,"__esModule",{value:!0});e.History=function(){function e(){}return e.prototype.activate=function(e){o("activate")},e.prototype.deactivate=function(){o("deactivate")},e.prototype.getAbsoluteRoot=function(){o("getAbsoluteRoot")},e.prototype.navigate=function(e,t){o("navigate")},e.prototype.navigateBack=function(){o("navigateBack")},e.prototype.setTitle=function(e){o("setTitle")},e.prototype.setState=function(e,t){o("setState")},e.prototype.getState=function(e){o("getState")},e.prototype.getHistoryIndex=function(){o("getHistoryIndex")},e.prototype.go=function(e){o("go")},e}()})),e.entry="dist/commonjs/aurelia-history.js"})),e.pkg("aurelia-loader",{},(function(e){return e.file("dist/commonjs/aurelia-loader.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Loader=e.TemplateRegistryEntry=e.TemplateDependency=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=t("aurelia-path"),a=t("aurelia-metadata"),u=e.TemplateDependency=function(e,t){this.src=e,this.name=t},c=e.TemplateRegistryEntry=function(){function e(e){this.templateIsLoaded=!1,this.factoryIsReady=!1,this.resources=null,this.dependencies=null,this.address=e,this.onReady=null,this._template=null,this._factory=null}return e.prototype.addDependency=function(e,t){var n="string"==typeof e?(0,s.relativeToFile)(e,this.address):a.Origin.get(e).moduleId;this.dependencies.push(new u(n,t))},o(e,[{key:"template",get:function(){return this._template},set:function(e){var t,n=this.address,r=void 0,i=void 0,o=void 0;this._template=e,this.templateIsLoaded=!0,t=e.content.querySelectorAll("require"),o=this.dependencies=new Array(t.length);for(var a=0,c=t.length;a<c;++a){if(!(i=(r=t[a]).getAttribute("from")))throw new Error("<require> element in "+n+' has no "from" attribute.');o[a]=new u((0,s.relativeToFile)(i,n),r.getAttribute("as")),r.parentNode&&r.parentNode.removeChild(r)}}},{key:"factory",get:function(){return this._factory},set:function(e){this._factory=e,this.factoryIsReady=!0}}]),e}();e.Loader=function(){function e(){this.templateRegistry={}}return e.prototype.map=function(e,t){throw new Error("Loaders must implement map(id, source).")},e.prototype.normalizeSync=function(e,t){throw new Error("Loaders must implement normalizeSync(moduleId, relativeTo).")},e.prototype.normalize=function(e,t){throw new Error("Loaders must implement normalize(moduleId: string, relativeTo: string): Promise<string>.")},e.prototype.loadModule=function(e){throw new Error("Loaders must implement loadModule(id).")},e.prototype.loadAllModules=function(e){throw new Error("Loader must implement loadAllModules(ids).")},e.prototype.loadTemplate=function(e){throw new Error("Loader must implement loadTemplate(url).")},e.prototype.loadText=function(e){throw new Error("Loader must implement loadText(url).")},e.prototype.applyPluginToUrl=function(e,t){throw new Error("Loader must implement applyPluginToUrl(url, pluginName).")},e.prototype.addPlugin=function(e,t){throw new Error("Loader must implement addPlugin(pluginName, implementation).")},e.prototype.getOrCreateTemplateRegistryEntry=function(e){return this.templateRegistry[e]||(this.templateRegistry[e]=new c(e))},e}()})),e.entry="dist/commonjs/aurelia-loader.js"})),e.pkg("aurelia-logging-console",{},(function(e){return e.file("dist/commonjs/aurelia-logging-console.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ConsoleAppender=function(){function e(){}return e.prototype.debug=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).debug.apply(t,["DEBUG ["+e.id+"]"].concat(r))},e.prototype.info=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).info.apply(t,["INFO ["+e.id+"]"].concat(r))},e.prototype.warn=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).warn.apply(t,["WARN ["+e.id+"]"].concat(r))},e.prototype.error=function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=console).error.apply(t,["ERROR ["+e.id+"]"].concat(r))},e}()})),e.entry="dist/commonjs/aurelia-logging-console.js"})),e.pkg("aurelia-logging",{},(function(e){return e.file("dist/commonjs/aurelia-logging.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLogger=function(e){return s[e]||new v(e)},e.addAppender=function(e){1===a.push(e)&&f()},e.removeAppender=function(e){a=a.filter((function(t){return t!==e}))},e.getAppenders=function(){return[].concat(a)},e.clearAppenders=function(){a=[],function(){var e=v.prototype;for(var t in o)"none"!==t&&(e[t]=function(){})}()},e.addCustomLevel=function(e,t){if(void 0!==o[e])throw Error('Log level "'+e+'" already exists.');if(isNaN(t))throw Error("Value must be a number.");o[e]=t,a.length>0?f():v.prototype[e]=function(){}},e.removeCustomLevel=function(e){if(void 0===o[e])return;if(l(e))throw Error('Built-in log level "'+e+'" cannot be removed.');delete o[e],delete v.prototype[e]},e.setLevel=function(e){for(var t in u=e,s)s[t].setLevel(e)},e.getLevel=function(){return u};var o=e.logLevel={none:0,error:10,warn:20,info:30,debug:40},s={},a=[],u=o.none,c=["none","error","warn","info","debug"];function l(e){return c.filter((function(t){return t===e})).length>0}function h(){return[this].concat(Array.prototype.slice.call(arguments))}function p(e){var t=o[e];return function(){if(!(this.level<t))for(var n=h.apply(this,arguments),r=a.length;r--;){var i;(i=a[r])[e].apply(i,n)}}}function d(e){var t=o[e];return function(){if(!(this.level<t))for(var n=h.apply(this,arguments),r=a.length;r--;){var i=a[r];void 0!==i[e]&&i[e].apply(i,n)}}}function f(){var e=v.prototype;for(var t in o)l(t)?"none"!==t&&(e[t]=p(t)):e[t]=d(t)}var v=e.Logger=function(){function e(e){var t=s[e];if(t)return t;s[e]=this,this.id=e,this.level=u}return e.prototype.debug=function(e){},e.prototype.info=function(e){},e.prototype.warn=function(e){},e.prototype.error=function(e){},e.prototype.setLevel=function(e){this.level=e},e.prototype.isDebugEnabled=function(){return this.level===o.debug},e}()})),e.entry="dist/commonjs/aurelia-logging.js"})),e.pkg("aurelia-metadata",{},(function(e){return e.file("dist/commonjs/aurelia-metadata.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Origin=e.metadata=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.decorators=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=function(e,n,r){var i=t.length;if(n){for(r=r||{value:e[n],writable:!0,configurable:!0,enumerable:!0};i--;)r=t[i](e,n,r)||r;Object.defineProperty(e,n,r)}else for(;i--;)e=t[i](e)||e;return e};return r.on=r,r},e.deprecated=function(e,t,n){function r(n,r,i){var s=n.constructor.name+"#"+r,a=t?{}:e||{},u="DEPRECATION - "+s;if("function"!=typeof i.value)throw new SyntaxError("Only methods can be marked as deprecated.");return a.message&&(u+=" - "+a.message),o({},i,{value:function(){if(a.error)throw new Error(u);return console.warn(u),i.value.apply(this,arguments)}})}return t?r(e,t,n):r},e.mixin=function(e){var t=Object.keys(e);return function(n){var r=function(n){for(var r="function"==typeof n?n.prototype:n,i=t.length;i--;){var o=t[i];Object.defineProperty(r,o,{value:e[o],writable:!0})}};return n?r(n):r}},e.protocol=y;var a=t("aurelia-pal");function u(e){return e&&("function"==typeof e||"object"===(void 0===e?"undefined":s(e)))}var c=e.metadata={resource:"aurelia:resource",paramTypes:"design:paramtypes",propertyType:"design:type",properties:"design:properties",get:function(e,t,n){if(u(t)){var r=c.getOwn(e,t,n);return void 0===r?c.get(e,Object.getPrototypeOf(t),n):r}},getOwn:function(e,t,n){if(u(t))return Reflect.getOwnMetadata(e,t,n)},define:function(e,t,n,r){Reflect.defineMetadata(e,t,n,r)},getOrCreateOwn:function(e,t,n,r){var i=c.getOwn(e,n,r);return void 0===i&&(i=new t,Reflect.defineMetadata(e,i,n,r)),i}},l=new Map,h=Object.freeze({moduleId:void 0,moduleMember:void 0});e.Origin=function(){function e(e,t){this.moduleId=e,this.moduleMember=t}return e.get=function(t){var n=l.get(t);return void 0===n&&a.PLATFORM.eachModule((function(r,i){if("object"===(void 0===i?"undefined":s(i)))for(var o in i)try{if(i[o]===t)return l.set(t,n=new e(r,o)),!0}catch(e){}return i===t&&(l.set(t,n=new e(r,"default")),!0)})),n||h},e.set=function(e,t){l.set(e,t)},e}();function p(){return!0}function d(){}function f(e){return void 0===e?e={}:"function"==typeof e&&(e={validate:e}),e.validate||(e.validate=p),e.compose||(e.compose=d),e}function v(e){return function(t){return!0===e(t)}}function g(e,t){return function(n){var r=t(n);if(!0!==r)throw new Error(r||e+" was not correctly implemented.")}}function y(e,t){t=f(t);var n=function n(r){var i="function"==typeof r?r.prototype:r;t.compose(i),n.assert(i),Object.defineProperty(i,"protocol:"+e,{enumerable:!1,configurable:!1,writable:!1,value:!0})};return n.validate=v(t.validate),n.assert=g(e,t.validate),n}y.create=function(e,t){t=f(t);var n="protocol:"+e,r=function(n){var r=y(e,t);return n?r(n):r};return r.decorates=function(e){return!0===e[n]},r.validate=v(t.validate),r.assert=g(e,t.validate),r}})),e.entry="dist/commonjs/aurelia-metadata.js"})),e.pkg("aurelia-pal-browser",{},(function(e){return e.file("dist/commonjs/aurelia-pal-browser.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e._DOM=e._FEATURE=e._PLATFORM=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.initialize=function(){if(s.isInitialized)return;(0,s.initializePAL)((function(e,t,n){Object.assign(e,a),Object.assign(t,O),Object.assign(n,R),Object.defineProperty(n,"title",{get:function(){return document.title},set:function(e){document.title=e}}),Object.defineProperty(n,"activeElement",{get:function(){return document.activeElement}}),Object.defineProperty(e,"XMLHttpRequest",{get:function(){return e.global.XMLHttpRequest}})}))};var s=t("aurelia-pal"),a=e._PLATFORM={location:window.location,history:window.history,addEventListener:function(e,t,n){this.global.addEventListener(e,t,n)},removeEventListener:function(e,t,n){this.global.removeEventListener(e,t,n)},performance:window.performance,requestAnimationFrame:function(e){return this.global.requestAnimationFrame(e)}};if("undefined"==typeof FEATURE_NO_IE){void 0===function(){}.name&&Object.defineProperty(Function.prototype,"name",{get:function(){var e=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:e}),e}})}if("undefined"==typeof FEATURE_NO_IE)if("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))){var u=document.createElement("_");if(u.classList.add("c1","c2"),!u.classList.contains("c2")){var c=function(e){var t=DOMTokenList.prototype[e];DOMTokenList.prototype[e]=function(e){for(var n=0,r=arguments.length;n<r;++n)e=arguments[n],t.call(this,e)}};c("add"),c("remove")}if(u.classList.toggle("c3",!1),u.classList.contains("c3")){var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:l.call(this,e)}}u=null}else{var h=String.prototype.trim,p=Array.prototype.indexOf,d=[],f=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},v=function(e,t){if(""===t)throw new f("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new f("INVALID_CHARACTER_ERR","String contains an invalid character");return p.call(e,t)},g=function(e){for(var t=h.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):d,r=0,i=n.length;r<i;++r)this.push(n[r]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},y=g.prototype=[];f.prototype=Error.prototype,y.item=function(e){return this[e]||null},y.contains=function(e){return-1!==v(this,e+="")},y.add=function(){var e=arguments,t=0,n=e.length,r=void 0,i=!1;do{r=e[t]+"",-1===v(this,r)&&(this.push(r),i=!0)}while(++t<n);i&&this._updateClassName()},y.remove=function(){var e=arguments,t=0,n=e.length,r=void 0,i=!1,o=void 0;do{for(r=e[t]+"",o=v(this,r);-1!==o;)this.splice(o,1),i=!0,o=v(this,r)}while(++t<n);i&&this._updateClassName()},y.toggle=function(e,t){e+="";var n=this.contains(e),r=n?!0!==t&&"remove":!1!==t&&"add";return r&&this[r](e),!0===t||!1===t?t:!n},y.toString=function(){return this.join(" ")},Object.defineProperty(Element.prototype,"classList",{get:function(){return new g(this)},enumerable:!0,configurable:!0})}if("undefined"==typeof FEATURE_NO_IE){var m=function(e,t){for(var n=0,r=_.length,i=[];n<r;n++)_[n][e]==t&&i.push(_[n]);return i},b=function(e,t){for(var n,r=_.length;r--;)(n=_[r]).entryType!=e||void 0!==t&&n.name!=t||_.splice(r,1)};if("performance"in window==!1&&(window.performance={}),"now"in window.performance==!1){var w=Date.now();performance.timing&&performance.timing.navigationStart&&(w=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-w}}Date.now?Date.now():new Date;var _=[],C={};window.performance.mark||(window.performance.mark=window.performance.webkitMark||function(e){var t={name:e,entryType:"mark",startTime:window.performance.now(),duration:0};_.push(t),C[e]=t}),window.performance.measure||(window.performance.measure=window.performance.webkitMeasure||function(e,t,n){t=C[t].startTime,n=C[n].startTime,_.push({name:e,entryType:"measure",startTime:t,duration:n-t})}),window.performance.getEntriesByType||(window.performance.getEntriesByType=window.performance.webkitGetEntriesByType||function(e){return m("entryType",e)}),window.performance.getEntriesByName||(window.performance.getEntriesByName=window.performance.webkitGetEntriesByName||function(e){return m("name",e)}),window.performance.clearMarks||(window.performance.clearMarks=window.performance.webkitClearMarks||function(e){b("mark",e)}),window.performance.clearMeasures||(window.performance.clearMeasures=window.performance.webkitClearMeasures||function(e){b("measure",e)}),a.performance=window.performance}if("undefined"==typeof FEATURE_NO_IE){var E=window.console=window.console||{},x=function(){};E.memory||(E.memory={}),"assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",").forEach((function(e){E[e]||(E[e]=x)})),"object"===o(E.log)&&"log,info,warn,error,assert,dir,clear,profile,profileEnd".split(",").forEach((function(e){console[e]=this.bind(console[e],console)}),Function.prototype.call)}if("undefined"==typeof FEATURE_NO_IE&&(!window.CustomEvent||"function"!=typeof window.CustomEvent)){var S=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n};S.prototype=window.Event.prototype,window.CustomEvent=S}if(Element&&!Element.prototype.matches){var k=Element.prototype;k.matches=k.matchesSelector||k.mozMatchesSelector||k.msMatchesSelector||k.oMatchesSelector||k.webkitMatchesSelector}var T,O=e._FEATURE={shadowDOM:!!HTMLElement.prototype.attachShadow,scopedCSS:"scoped"in document.createElement("style"),htmlTemplateElement:(T=document.createElement("div"),T.innerHTML="<template></template>","content"in T.children[0]),mutationObserver:!(!window.MutationObserver&&!window.WebKitMutationObserver),ensureHTMLTemplateElement:function(e){return e}};if("undefined"==typeof FEATURE_NO_IE){var I=function(e){var t=e.ownerDocument.createElement("template"),n=e.attributes,r=n.length,i=void 0;for(e.parentNode.insertBefore(t,e);r-- >0;)i=n[r],t.setAttribute(i.name,i.value),e.removeAttribute(i.name);return e.parentNode.removeChild(e),A(t)},A=function(e){for(var t=e.content=document.createDocumentFragment(),n=void 0;n=e.firstChild;)t.appendChild(n);return e};O.htmlTemplateElement||(O.ensureHTMLTemplateElement=function(e){for(var t,n=A(e).content.querySelectorAll("template"),r=0,i=n.length;r<i;++r){var o=n[r];"template"===(t=o).tagName&&"http://www.w3.org/2000/svg"===t.namespaceURI?I(o):A(o)}return e})}var N=window.ShadowDOMPolyfill||null,R=e._DOM={Element:Element,NodeList:NodeList,SVGElement:SVGElement,boundary:"aurelia-dom-boundary",addEventListener:function(e,t,n){document.addEventListener(e,t,n)},removeEventListener:function(e,t,n){document.removeEventListener(e,t,n)},adoptNode:function(e){return document.adoptNode(e)},createAttribute:function(e){return document.createAttribute(e)},createElement:function(e){return document.createElement(e)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},createDocumentFragment:function(){return document.createDocumentFragment()},createTemplateElement:function(){var e=document.createElement("template");return O.ensureHTMLTemplateElement(e)},createMutationObserver:function(e){return new(window.MutationObserver||window.WebKitMutationObserver)(e)},createCustomEvent:function(e,t){return new window.CustomEvent(e,t)},dispatchEvent:function(e){document.dispatchEvent(e)},getComputedStyle:function(e){return window.getComputedStyle(e)},getElementById:function(e){return document.getElementById(e)},querySelector:function(e){return document.querySelector(e)},querySelectorAll:function(e){return document.querySelectorAll(e)},nextElementSibling:function(e){if(e.nextElementSibling)return e.nextElementSibling;do{e=e.nextSibling}while(e&&1!==e.nodeType);return e},createTemplateFromMarkup:function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.firstElementChild;if(!n||"TEMPLATE"!==n.nodeName)throw new Error("Template markup must be wrapped in a <template> element e.g. <template> \x3c!-- markup here --\x3e </template>");return O.ensureHTMLTemplateElement(n)},appendNode:function(e,t){(t||document.body).appendChild(e)},replaceNode:function(e,t,n){t.parentNode?t.parentNode.replaceChild(e,t):null!==N?N.unwrap(n).replaceChild(N.unwrap(e),N.unwrap(t)):n.replaceChild(e,t)},removeNode:function(e,t){e.parentNode?e.parentNode.removeChild(e):t&&(null!==N?N.unwrap(t).removeChild(N.unwrap(e)):t.removeChild(e))},injectStyles:function(e,t,n,r){if(r){var i=document.getElementById(r);if(i){if("style"===i.tagName.toLowerCase())return void(i.innerHTML=e);throw new Error("The provided id does not indicate a style tag.")}}var o=document.createElement("style");return o.innerHTML=e,o.type="text/css",r&&(o.id=r),t=t||document.head,n&&t.childNodes.length>0?t.insertBefore(o,t.childNodes[0]):t.appendChild(o),o}}})),e.entry="dist/commonjs/aurelia-pal-browser.js"})),e.pkg("aurelia-pal",{},(function(e){return e.file("dist/commonjs/aurelia-pal.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AggregateError=function(e,t,n){if(t){if(t.innerError&&n)return t;var r="\n------------------------------------------------\n";e+=r+"Inner Error:\n","string"==typeof t?e+="Message: "+t:(t.message?e+="Message: "+t.message:e+="Unknown Inner Error Type. Displaying Inner Error as JSON:\n "+JSON.stringify(t,null,"  "),t.stack&&(e+="\nInner Error Stack:\n"+t.stack,e+="\nEnd Inner Error Stack")),e+=r}var i=new Error(e);t&&(i.innerError=t);return i},e.initializePAL=function(t){if(u)return;e.isInitialized=u=!0,"function"!=typeof Object.getPropertyDescriptor&&(Object.getPropertyDescriptor=function(e,t){for(var n=Object.getOwnPropertyDescriptor(e,t),r=Object.getPrototypeOf(e);void 0===n&&null!==r;)n=Object.getOwnPropertyDescriptor(r,t),r=Object.getPrototypeOf(r);return n});t(s,o,a)},e.reset=function(){e.isInitialized=u=!1};var o=e.FEATURE={},s=e.PLATFORM={noop:function(){},eachModule:function(){},moduleName:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return e}))};s.global="undefined"!=typeof self?self:"undefined"!=typeof global?global:new Function("return this")();var a=e.DOM={},u=e.isInitialized=!1})),e.entry="dist/commonjs/aurelia-pal.js"})),e.pkg("aurelia-path",{},(function(e){return e.file("dist/commonjs/aurelia-path.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.relativeToFile=function(e,t){var n=t&&t.split("/"),r=e.trim().split("/");if("."===r[0].charAt(0)&&n){var i=n.slice(0,n.length-1);r.unshift.apply(r,i)}return function(e){for(var t=0;t<e.length;++t){var n=e[t];if("."===n)e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}}(r),r.join("/")},e.join=function(e,t){if(!e)return t;if(!t)return e;var n=e.match(/^([^/]*?:)\//),r=n&&n.length>0?n[1]:"";e=e.substr(r.length);var i=void 0;i=0===e.indexOf("///")&&"file:"===r?"///":0===e.indexOf("//")?"//":0===e.indexOf("/")?"/":"";for(var o="/"===t.slice(-1)?"/":"",s=e.split("/"),a=t.split("/"),u=[],c=0,l=s.length;c<l;++c)if(".."===s[c])u.pop();else{if("."===s[c]||""===s[c])continue;u.push(s[c])}for(var h=0,p=a.length;h<p;++h)if(".."===a[h])u.pop();else{if("."===a[h]||""===a[h])continue;u.push(a[h])}return r+i+u.join("/")+o},e.buildQueryString=function(e,t){for(var n=[],r=Object.keys(e||{}).sort(),i=0,o=r.length;i<o;i++){var s=r[i];n=n.concat(u(s,e[s],t))}if(0===n.length)return"";return n.join("&")},e.parseQueryString=function(e){var t={};if(!e||"string"!=typeof e)return t;var n=e;"?"===n.charAt(0)&&(n=n.substr(1));for(var r=n.replace(/\+/g," ").split("&"),i=0;i<r.length;i++){var o=r[i].split("="),s=decodeURIComponent(o[0]);if(s){var a=s.split("]["),u=a.length-1;if(/\[/.test(a[0])&&/\]$/.test(a[u])?(a[u]=a[u].replace(/\]$/,""),a=a.shift().split("[").concat(a),u=a.length-1):u=0,o.length>=2){var h=o[1]?decodeURIComponent(o[1]):"";u?l(t,a,h):t[s]=c(t[s],h)}else t[s]=!0}}return t};var s=encodeURIComponent,a=function(e){return s(e).replace("%24","$")};function u(e,t,n){var r=[];if(null==t)return r;if(Array.isArray(t))for(var i=0,c=t.length;i<c;i++)if(n)r.push(a(e)+"="+s(t[i]));else{var l=e+"["+("object"===o(t[i])&&null!==t[i]?i:"")+"]";r=r.concat(u(l,t[i]))}else if("object"!==(void 0===t?"undefined":o(t))||n)r.push(a(e)+"="+s(t));else for(var h in t)r=r.concat(u(e+"["+h+"]",t[h]));return r}function c(e,t){return Array.isArray(e)?(e.push(t),e):void 0!==e?[e,t]:t}function l(e,t,n){for(var r=e,i=t.length-1,s=0;s<=i;s++){var a=""===t[s]?r.length:t[s];if(s<i){var u=r[a]&&"object"!==o(r[a])?[r[a]]:r[a];r=r[a]=u||(isNaN(t[s+1])?{}:[])}else r=r[a]=n}}})),e.entry="dist/commonjs/aurelia-path.js"})),e.pkg("aurelia-polyfills",{},(function(e){return e.file("dist/commonjs/aurelia-polyfills.js",(function(e,t,n,r,i){"use strict";var o,s,a,u,c,l,h,p,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=t("aurelia-pal");if("undefined"==typeof FEATURE_NO_ES2015&&(function(e,t){if(!(t in e)){var n,r=f.PLATFORM.global,i=0,o=""+Math.random(),s="__symbol:",a=s.length,u="__symbol@@"+o,c="defineProperty",l="defineProperties",h="getOwnPropertyNames",p="getOwnPropertyDescriptor",v="propertyIsEnumerable",g=e[h],y=e[p],m=e.create,b=e.keys,w=e[c],_=e[l],C=y(e,h),E=e.prototype,x=E.hasOwnProperty,S=E[v],k=E.toString,T=(Array.prototype.indexOf,function(e,t,n){x.call(e,u)||w(e,u,{enumerable:!1,configurable:!1,writable:!1,value:{}}),e[u]["@@"+t]=n}),O=function(e,t){var n=m(e);return null!==t&&"object"===(void 0===t?"undefined":d(t))&&g(t).forEach((function(e){R.call(t,e)&&F(n,e,t[e])})),n},I=function(){},A=function(e){return e!=u&&!x.call(L,e)},N=function(e){return e!=u&&x.call(L,e)},R=function(e){var t=""+e;return N(t)?x.call(this,t)&&this[u]&&this[u]["@@"+t]:S.call(this,e)},P=function(t){return w(E,t,{enumerable:!1,configurable:!0,get:I,set:function(e){n(this,t,{enumerable:!1,configurable:!0,writable:!0,value:e}),T(this,t,!0)}}),L[t]=w(e(t),"constructor",D)},M=function(e){if(this&&this!==r)throw new TypeError("Symbol is not a constructor");return P(s.concat(e||"",o,++i))},L=m(null),D={value:M},j=function(e){return L[e]},F=function(e,t,r){var i=""+t;return N(i)?(n(e,i,r.enumerable?function(e){var t=m(e);return t.enumerable=!1,t}(r):r),T(e,i,!!r.enumerable)):w(e,t,r),e},V=function(t){return t="[object String]"===k.call(t)?t.split(""):e(t),g(t).filter(N).map(j)};C.value=F,w(e,c,C),C.value=V,w(e,t,C);var B="object"===("undefined"==typeof window?"undefined":d(window))?e.getOwnPropertyNames(window):[],q=e.getOwnPropertyNames;C.value=function(e){if("[object Window]"===k.call(e))try{return q(e)}catch(e){return[].concat([],B)}return g(e).filter(A)},w(e,h,C),C.value=function(e,t){var n=V(t);return n.length?b(t).concat(n).forEach((function(n){R.call(t,n)&&F(e,n,t[n])})):_(e,t),e},w(e,l,C),C.value=R,w(E,v,C),C.value=M,w(r,"Symbol",C),C.value=function(e){var t=s.concat(s,e,o);return t in E?L[t]:P(t)},w(M,"for",C),C.value=function(e){return x.call(L,e)?e.slice(2*a,-o.length):void 0},w(M,"keyFor",C),C.value=function(e,t){var n=y(e,t);return n&&N(t)&&(n.enumerable=R.call(e,t)),n},w(e,p,C),C.value=function(e,t){return 1===arguments.length?m(e):O(e,t)},w(e,"create",C),C.value=function(){var e=k.call(this);return"[object String]"===e&&N(this)?"[object Symbol]":e},w(E,"toString",C);try{n=m(w({},s,{get:function(){return w(this,s,{value:!1})[s]}}))[s]||w}catch(e){n=function(e,t,n){var r=y(E,t);delete E[t],w(e,t,n),w(E,t,r)}}}}(Object,"getOwnPropertySymbols"),o=Object,Symbol,a=o.defineProperty,u=o.prototype,c=u.toString,["iterator","match","replace","search","split","hasInstance","isConcatSpreadable","unscopables","species","toPrimitive",l="toStringTag"].forEach((function(e){if(!(e in Symbol))switch(a(Symbol,e,{value:Symbol(e)}),e){case l:(s=o.getOwnPropertyDescriptor(u,"toString")).value=function(){var e=c.call(this),t=null==this?void 0:this[Symbol.toStringTag];return void 0===t?e:"[object "+t+"]"},a(u,"toString",s)}})),function(e,t,n){function r(){return this}t[e]||(t[e]=function(){var t=0,n=this,i={next:function(){var e=n.length<=t;return e?{done:e}:{done:e,value:n[t++]}}};return i[e]=r,i}),n[e]||(n[e]=function(){var t=String.fromCodePoint,n=this,i=0,o=n.length,s={next:function(){var e=o<=i,r=e?"":t(n.codePointAt(i));return i+=r.length,e?{done:e}:{done:e,value:r}}};return s[e]=r,s})}(Symbol.iterator,Array.prototype,String.prototype)),"undefined"==typeof FEATURE_NO_ES2015&&(Number.isNaN=Number.isNaN||function(e){return e!=e},Number.isFinite=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}),String.prototype.endsWith&&!function(){try{return!"ab".endsWith("a",1)}catch(e){return!0}}()||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),String.prototype.startsWith&&!function(){try{return!"ab".startsWith("b",1)}catch(e){return!0}}()||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),"undefined"==typeof FEATURE_NO_ES2015&&(Array.from||(Array.from=(h=function(e){return e>0?Math.min(function(e){return isNaN(e=+e)?0:(e>0?Math.floor:Math.ceil)(e)}(e),9007199254740991):0},p=function(e,t,n,r){try{return t(n,r)}catch(t){throw"function"==typeof e.return&&e.return(),t}},function(e){var t,n,r,i,o=Object(e),s="function"==typeof this?this:Array,a=arguments.length,u=a>1?arguments[1]:void 0,c=void 0!==u,l=0,d=o[Symbol.iterator];if(c&&(u=u.bind(a>2?arguments[2]:void 0)),null==d||Array.isArray(e))for(n=new s(t=h(o.length));t>l;l++)n[l]=c?u(o[l],l):o[l];else for(i=d.call(o),n=new s;!(r=i.next()).done;l++)n[l]=c?p(i,u,r.value,l):r.value;return n.length=l,n})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,enumerable:!1,value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(i,t,o,n))return t}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{configurable:!0,writable:!0,enumerable:!1,value:function(e){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(i,t,o,n))return o;return-1}})),"undefined"!=typeof FEATURE_NO_ES2016||Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,enumerable:!1,value:function(e){var t=Object(this),n=parseInt(t.length)||0;if(0===n)return!1;var r,i,o=parseInt(arguments[1])||0;for(o>=0?r=o:(r=n+o)<0&&(r=0);r<n;){if(e===(i=t[r])||e!=e&&i!=i)return!0;r++}return!1}}),"undefined"==typeof FEATURE_NO_ES2015&&(!function(){var e,t,n,r,i=!1;try{var o=Object.keys("a");i=1!==o.length||"0"!==o[0]}catch(e){i=!0}i&&(Object.keys=(e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=(n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(i){if(null==i)throw TypeError("Cannot convert undefined or null to object");i=Object(i);var o,s,a=[];for(o in i)e.call(i,o)&&a.push(o);if(t)for(s=0;s<r;s++)e.call(i,n[s])&&a.push(n[s]);return a}))}(),function(e){var t,n,r;"assign"in e||e.defineProperty(e,"assign",{configurable:!0,writable:!0,value:(t=e.getOwnPropertySymbols,n=e.propertyIsEnumerable,r=t?function(e){return t(e).filter(n,e)}:function(){return Array.prototype},function(n){function i(e){n[e]=a[e]}!t||n instanceof e||console.warn("problematic Symbols",n);for(var o=1,s=arguments.length;o<s;++o){var a=arguments[o];null!=a&&e.keys(a).concat(r(a)).forEach(i)}return n})})}(Object),Object.is||(Object.is=function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t})),"undefined"==typeof FEATURE_NO_ES2015&&function(e){var t,n,r,i=Object.defineProperty,o=function(e,t){return e===t||e!=e&&t!=t};("undefined"==typeof WeakMap&&(e.WeakMap=s({delete:u,clear:v,get:c,has:p,set:d},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next)||(e.Map=s(((n={delete:u,has:p,get:c,set:d,keys:function(){return m(this._itp,this._keys)},values:g,entries:y,forEach:w,clear:v})[Symbol.iterator]=y,n)));"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(e.Set=s(((r={has:h,add:f,delete:u,clear:v,keys:g,values:g,entries:function(){return m(this._itp,this._values,this._values)},forEach:w})[Symbol.iterator]=g,r)));function s(e,t){function n(e){if(!this||this.constructor!==n)return new n(e);this._keys=[],this._values=[],this._itp=[],this.objectOnly=t,e&&a.call(this,e)}return t||i(e,"size",{get:b}),e.constructor=n,n.prototype=e,n}function a(e){this.add?e.forEach(this.add,this):e.forEach((function(e){this.set(e[0],e[1])}),this)}function u(e){return this.has(e)&&(this._keys.splice(t,1),this._values.splice(t,1),this._itp.forEach((function(e){t<e[0]&&e[0]--}))),-1<t}function c(e){return this.has(e)?this._values[t]:void 0}function l(e,n){if(this.objectOnly&&n!==Object(n))throw new TypeError("Invalid value used as weak collection key");if(n!=n||0===n)for(t=e.length;t--&&!o(e[t],n););else t=e.indexOf(n);return-1<t}function h(e){return l.call(this,this._values,e)}function p(e){return l.call(this,this._keys,e)}function d(e,n){return this.has(e)?this._values[t]=n:this._values[this._keys.push(e)-1]=n,this}function f(e){return this.has(e)||this._values.push(e),this}function v(){(this._keys||0).length=this._values.length=0}function g(){return m(this._itp,this._values)}function y(){return m(this._itp,this._keys,this._values)}function m(e,t,n){var r,i=[0],o=!1;return e.push(i),(r={})[Symbol.iterator]=function(){return this},r.next=function(){var r,s=i[0];return!o&&s<t.length?(r=n?[t[s],n[s]]:t[s],i[0]++):(o=!0,e.splice(e.indexOf(i),1)),{done:o,value:r}},r}function b(){return this._values.length}function w(e,t){for(var n=this.entries();;){var r=n.next();if(r.done)break;e.call(t,r.value[1],r.value[0],this)}}"undefined"==typeof WeakSet&&(e.WeakSet=s({delete:u,add:f,clear:v,has:h},!0))}(f.PLATFORM.global),"undefined"==typeof FEATURE_NO_ES2015){var v=Function.prototype.bind;void 0===f.PLATFORM.global.Reflect&&(f.PLATFORM.global.Reflect={}),"function"!=typeof Reflect.defineProperty&&(Reflect.defineProperty=function(e,t,n){if("object"===(void 0===e?"undefined":d(e))?null===e:"function"!=typeof e)throw new TypeError("Reflect.defineProperty called on non-object");try{return Object.defineProperty(e,t,n),!0}catch(e){return!1}}),"function"!=typeof Reflect.construct&&(Reflect.construct=function(e,t){if(t)switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var n=[null];return n.push.apply(n,t),new(v.apply(e,n))}),"function"!=typeof Reflect.ownKeys&&(Reflect.ownKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))})}if("undefined"==typeof FEATURE_NO_ESNEXT){var g=Object.freeze({});"function"!=typeof Reflect.getOwnMetadata&&(Reflect.getOwnMetadata=function(e,t,n){if(t.hasOwnProperty("__metadata__"))return(t.__metadata__[n]||g)[e]}),"function"!=typeof Reflect.defineMetadata&&(Reflect.defineMetadata=function(e,t,n,r){var i=n.hasOwnProperty("__metadata__")?n.__metadata__:n.__metadata__={};(i[r]||(i[r]={}))[e]=t}),"function"!=typeof Reflect.metadata&&(Reflect.metadata=function(e,t){return function(n,r){Reflect.defineMetadata(e,t,n,r)}})}})),e.entry="dist/commonjs/aurelia-polyfills.js"})),e.pkg("aurelia-route-recognizer",{},(function(e){return e.file("dist/commonjs/aurelia-route-recognizer.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RouteRecognizer=e.EpsilonSegment=e.StarSegment=e.DynamicSegment=e.StaticSegment=e.State=void 0;var o=t("aurelia-path"),s=e.State=function(){function e(e){this.charSpec=e,this.nextStates=[]}return e.prototype.get=function(e){var t=this.nextStates,n=Array.isArray(t),r=0;for(t=n?t:t[Symbol.iterator]();;){var i;if(n){if(r>=t.length)break;i=t[r++]}else{if((r=t.next()).done)break;i=r.value}var o=i;if(o.charSpec.validChars===e.validChars&&o.charSpec.invalidChars===e.invalidChars)return o}},e.prototype.put=function(t){var n=this.get(t);return n||(n=new e(t),this.nextStates.push(n),t.repeat&&n.nextStates.push(n),n)},e.prototype.match=function(e){for(var t=this.nextStates,n=[],r=0,i=t.length;r<i;r++){var o=t[r],s=o.charSpec;void 0!==s.validChars?-1!==s.validChars.indexOf(e)&&n.push(o):void 0!==s.invalidChars&&-1===s.invalidChars.indexOf(e)&&n.push(o)}return n},e}(),a=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g"),u=e.StaticSegment=function(){function e(e,t){this.string=e,this.caseSensitive=t}return e.prototype.eachChar=function(e){for(var t=this.string,n=0,r=t.length;n<r;++n){var i=t[n];e({validChars:this.caseSensitive?i:i.toUpperCase()+i.toLowerCase()})}},e.prototype.regex=function(){return this.string.replace(a,"\\$1")},e.prototype.generate=function(){return this.string},e}(),c=e.DynamicSegment=function(){function e(e,t){this.name=e,this.optional=t}return e.prototype.eachChar=function(e){e({invalidChars:"/",repeat:!0})},e.prototype.regex=function(){return"([^/]+)"},e.prototype.generate=function(e,t){return t[this.name]=!0,e[this.name]},e}(),l=e.StarSegment=function(){function e(e){this.name=e}return e.prototype.eachChar=function(e){e({invalidChars:"",repeat:!0})},e.prototype.regex=function(){return"(.+)"},e.prototype.generate=function(e,t){return t[this.name]=!0,e[this.name]},e}(),h=e.EpsilonSegment=function(){function e(){}return e.prototype.eachChar=function(){},e.prototype.regex=function(){return""},e.prototype.generate=function(){return""},e}(),p=(e.RouteRecognizer=function(){function e(){this.rootState=new s,this.names={},this.routes=new Map}return e.prototype.add=function(e){var t=this;if(!Array.isArray(e)){for(var n=this.rootState,r=[],i="^",o={statics:0,dynamics:0,stars:0},s=[],a=e.handler.name,p=!0,d=function(e,t,n,r){var i=e;"/"===e.charAt(0)&&(i=e.substr(1));for(var o=[],s=i.split("/"),a=0,p=s.length;a<p;++a){var d=s[a],f=d.match(/^:([^?]+)(\?)?$/);if(f){var v=f,g=v[1],y=v[2];if(-1!==g.indexOf("="))throw new Error("Parameter "+g+" in route "+e+" has a default value, which is not supported.");o.push(new c(g,!!y)),t.push(g),n.dynamics++}else(f=d.match(/^\*(.+)$/))?(o.push(new l(f[1])),t.push(f[1]),n.stars++):""===d?o.push(new h):(o.push(new u(d,r)),n.statics++)}return o}(e.path,s,o,e.caseSensitive),v=0,g=d.length;v<g;v++){var y=d[v];if(!(y instanceof h)){for(var m=f(n,y),b=m[0],w=m[1],_=0,C=r.length;_<C;_++)r[_].nextStates.push(b);y.optional?(r.push(w),i+="(?:/"+y.regex()+")?"):(n=w,i+="/"+y.regex(),r.length=0,p=!1)}}p&&(n=n.put({validChars:"/"}),i+="/?");var E=[{handler:e.handler,names:s}];if(this.routes.set(e.handler,{segments:d,handlers:E}),a)for(var x=Array.isArray(a)?a:[a],S=0;S<x.length;S++)x[S]in this.names||(this.names[x[S]]={segments:d,handlers:E});for(var k=0;k<r.length;k++){var T=r[k];T.handlers=E,T.regex=new RegExp(i+"$",e.caseSensitive?"":"i"),T.types=o}return n.handlers=E,n.regex=new RegExp(i+"$",e.caseSensitive?"":"i"),n.types=o,n}e.forEach((function(e){return t.add(e)}))},e.prototype.getRoute=function(e){return"string"==typeof e?this.names[e]:this.routes.get(e)},e.prototype.handlersFor=function(e){var t=this.getRoute(e);if(!t)throw new Error("There is no route named "+e);return[].concat(t.handlers)},e.prototype.hasRoute=function(e){return!!this.getRoute(e)},e.prototype.generate=function(e,t){var n=this.getRoute(e);if(!n)throw new Error("There is no route named "+e);var r=n.handlers[0].handler;if(r.generationUsesHref)return r.href;for(var i=Object.assign({},t),s=n.segments,a={},u="",c=0,l=s.length;c<l;c++){var p=s[c];if(!(p instanceof h)){var d=p.generate(i,a);if(null==d){if(!p.optional)throw new Error("A value is required for route parameter '"+p.name+"' in route '"+e+"'.")}else u+="/",u+=d}}for(var f in"/"!==u.charAt(0)&&(u="/"+u),a)delete i[f];var v=(0,o.buildQueryString)(i);return u+=v?"?"+v:""},e.prototype.recognize=function(e){var t=[this.rootState],n={},r=!1,i=e,s=i.indexOf("?");if(-1!==s){var a=i.substr(s+1,i.length);i=i.substr(0,s),n=(0,o.parseQueryString)(a)}"/"!==(i=decodeURI(i)).charAt(0)&&(i="/"+i);var u=i.length;u>1&&"/"===i.charAt(u-1)&&(i=i.substr(0,u-1),r=!0);for(var c=0,l=i.length;c<l&&(t=d(t,i.charAt(c))).length;c++);for(var h=[],f=0,v=t.length;f<v;f++)t[f].handlers&&h.push(t[f]);t=function(e){return e.sort((function(e,t){if(e.types.stars!==t.types.stars)return e.types.stars-t.types.stars;if(e.types.stars){if(e.types.statics!==t.types.statics)return t.types.statics-e.types.statics;if(e.types.dynamics!==t.types.dynamics)return t.types.dynamics-e.types.dynamics}return e.types.dynamics!==t.types.dynamics?e.types.dynamics-t.types.dynamics:e.types.statics!==t.types.statics?t.types.statics-e.types.statics:0}))}(h);var g=h[0];if(g&&g.handlers)return r&&"(.+)$"===g.regex.source.slice(-5)&&(i+="/"),function(e,t,n){for(var r=e.handlers,i=e.regex,o=t.match(i),s=1,a=new p(n),u=0,c=r.length;u<c;u++){for(var l=r[u],h=l.names,d={},f=0,v=h.length;f<v;f++)d[h[f]]=o[s++];a.push({handler:l.handler,params:d,isDynamic:!!h.length})}return a}(g,i,n)},e}(),function(e){this.splice=Array.prototype.splice,this.slice=Array.prototype.slice,this.push=Array.prototype.push,this.length=0,this.queryParams=e||{}});function d(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];n.push.apply(n,o.match(t))}return n}function f(e,t){var n=e.put({validChars:"/"}),r=n;return t.eachChar((function(e){r=r.put(e)})),[n,r]}})),e.entry="dist/commonjs/aurelia-route-recognizer.js"})),e.pkg("aurelia-router",{},(function(e){return e.file("dist/commonjs/aurelia-router.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=t("aurelia-logging"),s=t("aurelia-dependency-injection"),a=t("aurelia-history"),u=t("aurelia-route-recognizer"),c=t("aurelia-event-aggregator"),l=function(e,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var h=function(){function e(e){this.plan=null,this.options={},Object.assign(this,e),this.params=this.params||{},this.viewPortInstructions={};var t=[],n=this;do{var r=Object.assign({},n.params);n.config&&n.config.hasChildRouter&&delete r[n.getWildCardName()],t.unshift(r),n=n.parentInstruction}while(n);var i=Object.assign.apply(Object,[{},this.queryParams].concat(t));this.lifecycleArgs=[i,this.config,this]}return e.prototype.getAllInstructions=function(){var e=[this],t=this.viewPortInstructions;for(var n in t){var r=t[n].childNavigationInstruction;r&&e.push.apply(e,r.getAllInstructions())}return e},e.prototype.getAllPreviousInstructions=function(){return this.getAllInstructions().map((function(e){return e.previousInstruction})).filter((function(e){return e}))},e.prototype.addViewPortInstruction=function(e,t,n,r){var i,o="string"==typeof e?e:e.name,s=this.lifecycleArgs,a=Object.assign({},s[1],{currentViewPort:o});return i="string"==typeof e?{name:e,strategy:t,moduleId:n,component:r,childRouter:r.childRouter,lifecycleArgs:[s[0],a,s[2]]}:{name:o,strategy:e.strategy,component:e.component,moduleId:e.moduleId,childRouter:e.component.childRouter,lifecycleArgs:[s[0],a,s[2]]},this.viewPortInstructions[o]=i},e.prototype.getWildCardName=function(){var e=this.config.route,t=e.lastIndexOf("*");return e.substr(t+1)},e.prototype.getWildcardPath=function(){var e=this.getWildCardName(),t=this.params[e]||"",n=this.queryString;return n&&(t+="?"+n),t},e.prototype.getBaseUrl=function(){var e=this,t=encodeURI,n=decodeURI(this.fragment);if(""===n){var r=this.router.routes.find((function(t){return t.name===e.config.name&&""!==t.route}));r&&(n=r.route)}if(!this.params)return t(n);var i=this.getWildCardName(),o=this.params[i]||"";return t(o?n.substr(0,n.lastIndexOf(o)):n)},e.prototype._commitChanges=function(e){var t=this,n=this.router;n.currentInstruction=this;var r=this.previousInstruction;r&&(r.config.navModel.isActive=!1),this.config.navModel.isActive=!0,n.refreshNavigation();var i=[],o=[],s=this.viewPortInstructions,a=function(t){var r=s[t],a=n.viewPorts[t];if(!a)throw new Error("There was no router-view found in the view for "+r.moduleId+".");var u=r.childNavigationInstruction;"replace"===r.strategy?u&&u.parentCatchHandler?i.push(u._commitChanges(e)):(e&&o.push({viewPort:a,viewPortInstruction:r}),i.push(a.process(r,e).then((function(){return u?u._commitChanges(e):Promise.resolve()})))):u&&i.push(u._commitChanges(e))};for(var u in s)a(u);return Promise.all(i).then((function(){return o.forEach((function(e){return e.viewPort.swap(e.viewPortInstruction)})),null})).then((function(){return p(t)}))},e.prototype._updateTitle=function(){var e=this.router,t=this._buildTitle(e.titleSeparator);t&&e.history.setTitle(t)},e.prototype._buildTitle=function(e){void 0===e&&(e=" | ");var t="",n=[],r=this.config.navModel.title,i=this.router,o=this.viewPortInstructions;for(var s in r&&(t=i.transformTitle(r)),o){var a=o[s].childNavigationInstruction;if(a){var u=a._buildTitle(e);u&&n.push(u)}}return n.length&&(t=n.join(e)+(t?e:"")+t),i.title&&(t+=(t?e:"")+i.transformTitle(i.title)),t},e}(),p=function(e){e.previousInstruction=null,e.plan=null},d=function(){function e(e,t){this.isActive=!1,this.title=null,this.href=null,this.relativeHref=null,this.settings={},this.config=null,this.router=e,this.relativeHref=t}return e.prototype.setTitle=function(e){this.title=e,this.isActive&&this.router.updateTitle()},e}();function f(e,t,n){return void 0===n&&(n=!1),t||"#"===e[0]||(e="#"+e),t&&n&&(e=e.substring(1,e.length)),e}function v(e,t,n,r){if(m.test(e))return e;var i="";return t.length&&"/"!==t[0]&&(i+="/"),(i+=t).length&&"/"===i[i.length-1]||"/"===e[0]||(i+="/"),i.length&&"/"===i[i.length-1]&&"/"===e[0]&&(i=i.substring(0,i.length-1)),f(i+e,n,r)}function g(e){var t=[];if(Array.isArray(e.route))for(var n=0,r=e.route.length;n<r;++n){var i=Object.assign({},e);i.route=e.route[n],t.push(i)}else t.push(Object.assign({},e));return t}var y=/^#?\//,m=/^([a-z][a-z0-9+\-.]*:)?\/\//i,b=function(){function e(){this.instructions=[],this.options={},this.pipelineSteps=[]}return e.prototype.addPipelineStep=function(e,t){if(null==t)throw new Error("Pipeline step cannot be null or undefined.");return this.pipelineSteps.push({name:e,step:t}),this},e.prototype.addAuthorizeStep=function(e){return this.addPipelineStep("authorize",e)},e.prototype.addPreActivateStep=function(e){return this.addPipelineStep("preActivate",e)},e.prototype.addPreRenderStep=function(e){return this.addPipelineStep("preRender",e)},e.prototype.addPostRenderStep=function(e){return this.addPipelineStep("postRender",e)},e.prototype.fallbackRoute=function(e){return this._fallbackRoute=e,this},e.prototype.map=function(e){var t=this;return Array.isArray(e)?(e.forEach((function(e){return t.map(e)})),this):this.mapRoute(e)},e.prototype.useViewPortDefaults=function(e){return this.viewPortDefaults=e,this},e.prototype.mapRoute=function(e){return this.instructions.push((function(t){for(var n,r=g(e),i=0,o=r.length;i<o;++i){var s=r[i];s.settings=s.settings||{},n||(n=t.createNavModel(s)),t.addRoute(s,n)}})),this},e.prototype.mapUnknownRoutes=function(e){return this.unknownRouteConfig=e,this},e.prototype.exportToRouter=function(e){for(var t=this.instructions,n=0,r=t.length;n<r;++n)t[n](e);var i=this,o=i.title,s=i.titleSeparator,a=i.unknownRouteConfig,u=i._fallbackRoute,c=i.viewPortDefaults;o&&(e.title=o),s&&(e.titleSeparator=s),a&&e.handleUnknownRoutes(a),u&&(e.fallbackRoute=u),c&&e.useViewPortDefaults(c),Object.assign(e.options,this.options);var l=this.pipelineSteps,h=l.length;if(h){if(!e.isRoot)throw new Error("Pipeline steps can only be added to the root router");var p=e.pipelineProvider;for(n=0,r=h;n<r;++n){var d=l[n],f=d.name,v=d.step;p.addStep(f,v)}}},e}(),w=function(){function e(e,t){var n=this;this.parent=null,this.options={},this.viewPortDefaults={},this.transformTitle=function(e){return n.parent?n.parent.transformTitle(e):e},this.container=e,this.history=t,this.reset()}return e.prototype.reset=function(){var e=this;this.viewPorts={},this.routes=[],this.baseUrl="",this.isConfigured=!1,this.isNavigating=!1,this.isExplicitNavigation=!1,this.isExplicitNavigationBack=!1,this.isNavigatingFirst=!1,this.isNavigatingNew=!1,this.isNavigatingRefresh=!1,this.isNavigatingForward=!1,this.isNavigatingBack=!1,this.couldDeactivate=!1,this.navigation=[],this.currentInstruction=null,this.viewPortDefaults={},this._fallbackOrder=100,this._recognizer=new u.RouteRecognizer,this._childRecognizer=new u.RouteRecognizer,this._configuredPromise=new Promise((function(t){e._resolveConfiguredPromise=t}))},Object.defineProperty(e.prototype,"isRoot",{get:function(){return!this.parent},enumerable:!0,configurable:!0}),e.prototype.registerViewPort=function(e,t){t=t||"default",this.viewPorts[t]=e},e.prototype.ensureConfigured=function(){return this._configuredPromise},e.prototype.configure=function(e){var t=this;this.isConfigured=!0;var n,r=e;return"function"==typeof e&&(r=e(n=new b)),Promise.resolve(r).then((function(e){e&&e.exportToRouter&&(n=e),n.exportToRouter(t),t.isConfigured=!0,t._resolveConfiguredPromise()}))},e.prototype.navigate=function(e,t){return!this.isConfigured&&this.parent?this.parent.navigate(e,t):(this.isExplicitNavigation=!0,this.history.navigate(function(e,t,n){return y.test(e)?f(e,n):v(e,t,n)}(e,this.baseUrl,this.history._hasPushState),t))},e.prototype.navigateToRoute=function(e,t,n){var r=this.generate(e,t);return this.navigate(r,n)},e.prototype.navigateBack=function(){this.isExplicitNavigationBack=!0,this.history.navigateBack()},e.prototype.createChild=function(t){var n=new e(t||this.container.createChild(),this.history);return n.parent=this,n},e.prototype.generate=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r="childRoute"in t?this._childRecognizer:this._recognizer;if(!r.hasRoute(e)){if(this.parent)return this.parent.generate(e,t,n);throw new Error("A route with name '"+e+"' could not be found. Check that `name: '"+e+"'` was specified in the route's config.")}var i=v(r.generate(e,t),this.baseUrl,this.history._hasPushState,n.absolute);return n.absolute?""+this.history.getAbsoluteRoot()+i:i},e.prototype.createNavModel=function(e){var t=new d(this,"href"in e?e.href:e.route);return t.title=e.title,t.order=e.nav,t.href=e.href,t.settings=e.settings,t.config=e,t},e.prototype.addRoute=function(e,t){if(Array.isArray(e.route)){g(e).forEach(this.addRoute.bind(this))}else{C(e),"viewPorts"in e||e.navigationStrategy||(e.viewPorts={default:{moduleId:e.moduleId,view:e.view}}),t||(t=this.createNavModel(e)),this.routes.push(e);var n=e.route;"/"===n.charAt(0)&&(n=n.substr(1));var r=!0===e.caseSensitive,i=this._recognizer.add({path:n,handler:e,caseSensitive:r});if(n){var o=e.settings;delete e.settings;var s=JSON.parse(JSON.stringify(e));e.settings=o,s.route=n+"/*childRoute",s.hasChildRouter=!0,this._childRecognizer.add({path:s.route,handler:s,caseSensitive:r}),s.navModel=t,s.settings=e.settings,s.navigationStrategy=e.navigationStrategy}e.navModel=t;var a=this.navigation;if((t.order||0===t.order)&&-1===a.indexOf(t)){if(!t.href&&""!==t.href&&(i.types.dynamics||i.types.stars))throw new Error('Invalid route config for "'+e.route+'" : dynamic routes must specify an "href:" to be included in the navigation model.');"number"!=typeof t.order&&(t.order=++this._fallbackOrder),a.push(t),a.sort((function(e,t){return e.order-t.order}))}}},e.prototype.hasRoute=function(e){return!!(this._recognizer.hasRoute(e)||this.parent&&this.parent.hasRoute(e))},e.prototype.hasOwnRoute=function(e){return this._recognizer.hasRoute(e)},e.prototype.handleUnknownRoutes=function(e){var t=this;if(!e)throw new Error("Invalid unknown route handler");this.catchAllHandler=function(n){return t._createRouteConfig(e,n).then((function(e){return n.config=e,n}))}},e.prototype.updateTitle=function(){var e=this.parent;if(e)return e.updateTitle();var t=this.currentInstruction;t&&t._updateTitle()},e.prototype.refreshNavigation=function(){for(var e=this.navigation,t=0,n=e.length;t<n;t++){var r=e[t];r.config.href?r.href=f(r.config.href,this.history._hasPushState):r.href=v(r.relativeHref,this.baseUrl,this.history._hasPushState)}},e.prototype.useViewPortDefaults=function(e){var t=e;for(var n in t){var r=t[n];this.viewPortDefaults[n]={moduleId:r.moduleId}}},e.prototype._refreshBaseUrl=function(){var e=this.parent;e&&(this.baseUrl=_(e,e.currentInstruction))},e.prototype._createNavigationInstruction=function(e,t){void 0===e&&(e=""),void 0===t&&(t=null);var n=e,r="",i=e.indexOf("?");-1!==i&&(n=e.substr(0,i),r=e.substr(i+1));var o=this._recognizer.recognize(e);o&&o.length||(o=this._childRecognizer.recognize(e));var s,a={fragment:n,queryString:r,config:null,parentInstruction:t,previousInstruction:this.currentInstruction,router:this,options:{compareQueryParams:this.options.compareQueryParams}};if(o&&o.length){var u=o[0],c=new h(Object.assign({},a,{params:u.params,queryParams:u.queryParams||o.queryParams,config:u.config||u.handler}));s="function"==typeof u.handler?E(c,u.handler,u):u.handler&&"function"==typeof u.handler.navigationStrategy?E(c,u.handler.navigationStrategy,u.handler):Promise.resolve(c)}else if(this.catchAllHandler){c=new h(Object.assign({},a,{params:{path:n},queryParams:o?o.queryParams:{},config:null}));s=E(c,this.catchAllHandler)}else if(this.parent){var l=this._parentCatchAllHandler(this.parent);if(l){var p=this._findParentInstructionFromRouter(l,t);c=new h(Object.assign({},a,{params:{path:n},queryParams:o?o.queryParams:{},router:l,parentInstruction:p,parentCatchHandler:!0,config:null}));s=E(c,l.catchAllHandler)}}return s&&t&&(this.baseUrl=_(this.parent,t)),s||Promise.reject(new Error("Route not found: "+e))},e.prototype._findParentInstructionFromRouter=function(e,t){return t.router===e?(t.fragment=e.baseUrl,t):t.parentInstruction?this._findParentInstructionFromRouter(e,t.parentInstruction):void 0},e.prototype._parentCatchAllHandler=function(e){return e.catchAllHandler?e:!!e.parent&&this._parentCatchAllHandler(e.parent)},e.prototype._createRouteConfig=function(e,t){var n=this;return Promise.resolve(e).then((function(e){return"string"==typeof e?{moduleId:e}:"function"==typeof e?e(t):e})).then((function(e){return"string"==typeof e?{moduleId:e}:e})).then((function(e){return e.route=t.params.path,C(e),e.navModel||(e.navModel=n.createNavModel(e)),e}))},e}(),_=function(e,t){return""+(e.baseUrl||"")+(t.getBaseUrl()||"")},C=function(e){if("object"!=typeof e)throw new Error("Invalid Route Config");if("string"!=typeof e.route){var t=e.name||"(no name)";throw new Error('Invalid Route Config for "'+t+'": You must specify a "route:" pattern.')}if(!("redirect"in e||e.moduleId||e.navigationStrategy||e.viewPorts))throw new Error('Invalid Route Config for "'+e.route+'": You must specify a "moduleId:", "redirect:", "navigationStrategy:", or "viewPorts:".')},E=function(e,t,n){return Promise.resolve(t.call(n,e)).then((function(){return"viewPorts"in e.config||(e.config.viewPorts={default:{moduleId:e.config.moduleId}}),e}))},x=function(e,t){return function(e){return Promise.resolve({status:t,output:e,completed:"completed"===t})}},S=function(){function e(){this.steps=[]}return e.prototype.addStep=function(e){var t;if("function"==typeof e)t=e;else{if("function"==typeof e.getSteps){for(var n=e.getSteps(),r=0,i=n.length;r<i;r++)this.addStep(n[r]);return this}t=e.run.bind(e)}return this.steps.push(t),this},e.prototype.run=function(e){return function(e,t){var n=-1,r=function(){if(!(++n<t.length))return r.complete();var i=t[n];try{return i(e,r)}catch(e){return r.reject(e)}};return r.complete=x(r,"completed"),r.cancel=x(r,"canceled"),r.reject=x(r,"rejected"),r}(e,this.steps)()},e}();function k(e){return e&&"function"==typeof e.navigate}var T=function(){function e(e,t){void 0===t&&(t={}),this.url=e,this.options=Object.assign({trigger:!0,replace:!0},t),this.shouldContinueProcessing=!1}return e.prototype.setRouter=function(e){this.router=e},e.prototype.navigate=function(e){(this.options.useAppRouter?e:this.router||e).navigate(this.url,this.options)},e}(),O=function(){function e(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),this.route=e,this.params=t,this.options=Object.assign({trigger:!0,replace:!0},n),this.shouldContinueProcessing=!1}return e.prototype.setRouter=function(e){this.router=e},e.prototype.navigate=function(e){(this.options.useAppRouter?e:this.router||e).navigateToRoute(this.route,this.params,this.options)},e}();function I(e,t){var n=e.config;if("redirect"in n)return N(e);var r=e.previousInstruction,i=e.router.viewPortDefaults;if(r)return R(e,r,i,t);var o={},s=n.viewPorts;for(var a in s){var u=s[a];null===u.moduleId&&a in i&&(u=i[a]),o[a]={name:a,strategy:"replace",config:u}}return Promise.resolve(o)}var A,N=function(e){var t=e.config,n=e.router;return n._createNavigationInstruction(t.redirect).then((function(t){var r={},i=e.params,o=t.params;for(var s in o){var a=o[s];"string"==typeof a&&":"===a[0]?(a=a.slice(1))in i&&(r[s]=i[a]):r[s]=o[s]}var u=n.generate(t.config,r,e.options);for(var s in i)u=u.replace(":"+s,i[s]);var c=e.queryString;return c&&(u+="?"+c),Promise.resolve(new T(u))}))},R=function(e,t,n,r){var i={},o=e.config,s=M(t,e),a=[],u=t.viewPortInstructions,c=function(t){var c=u[t],l=c.component,h=o.viewPorts,p=t in h?h[t]:c;null===p.moduleId&&t in n&&(p=n[t]);var d=P(e,c,p,s,r),f=i[t]={name:t,config:p,prevComponent:l,prevModuleId:c.moduleId,strategy:d};if("replace"!==d&&c.childRouter){var v=e.getWildcardPath(),g=c.childRouter._createNavigationInstruction(v,e).then((function(e){return f.childNavigationInstruction=e,I(e,"invoke-lifecycle"===f.strategy).then((function(t){return t instanceof T?Promise.reject(t):(e.plan=t,null)}))}));a.push(g)}};for(var l in u)c(l);return Promise.all(a).then((function(){return i}))},P=function(e,t,n,r,i){var o=e.config,s=t.component.viewModel;return t.moduleId!==n.moduleId?"replace":"determineActivationStrategy"in s?s.determineActivationStrategy.apply(s,e.lifecycleArgs):o.activationStrategy?o.activationStrategy:r||i?"invoke-lifecycle":"no-change"},M=function(e,t){var n=e.params,r=t.params,i=t.config.hasChildRouter?t.getWildCardName():null;for(var o in r)if(o!==i&&n[o]!==r[o])return!0;for(var o in n)if(o!==i&&n[o]!==r[o])return!0;if(!t.options.compareQueryParams)return!1;var s=e.queryParams,a=t.queryParams;for(var o in a)if(s[o]!==a[o])return!0;for(var o in s)if(s[o]!==a[o])return!0;return!1},L=function(){function e(){}return e.prototype.run=function(e,t){return I(e).then((function(n){return n instanceof T?t.cancel(n):(e.plan=n,t())})).catch(t.cancel)},e}(),D=function(e,t){var n=j(t).map((function(t){return F(e,t.navigationInstruction,t.viewPortPlan)}));return Promise.all(n)},j=function(e,t){void 0===t&&(t=[]);var n=e.plan;for(var r in n){var i=n[r],o=i.childNavigationInstruction;if("replace"===i.strategy)t.push({viewPortPlan:i,navigationInstruction:e}),o&&j(o,t);else{var s=e.addViewPortInstruction({name:r,strategy:i.strategy,moduleId:i.prevModuleId,component:i.prevComponent});o&&(s.childNavigationInstruction=o,j(o,t))}}return t},F=function(e,t,n){var r=n.config,i=r?r.moduleId:null;return V(e,t,r).then((function(r){var o=t.addViewPortInstruction({name:n.name,strategy:n.strategy,moduleId:i,component:r}),s=r.childRouter;if(s){var a=t.getWildcardPath();return s._createNavigationInstruction(a,t).then((function(t){return n.childNavigationInstruction=t,I(t).then((function(n){return n instanceof T?Promise.reject(n):(t.plan=n,o.childNavigationInstruction=t,D(e,t))}))}))}}))},V=function(e,t,n){var r=t.router,i=t.lifecycleArgs;return Promise.resolve().then((function(){return e.loadRoute(r,n,t)})).then((function(e){var t=e.viewModel,o=e.childContainer;if(e.router=r,e.config=n,"configureRouter"in t){var s=o.getChildRouter();return e.childRouter=s,s.configure((function(e){return t.configureRouter(e,s,i[0],i[1],i[2])})).then((function(){return e}))}return e}))},B=function(){function e(){}return e.prototype.loadRoute=function(e,t,n){throw new Error('Route loaders must implement "loadRoute(router, config, navigationInstruction)".')},e}(),q=function(){function e(e){this.routeLoader=e}return e.inject=function(){return[B]},e.prototype.run=function(e,t){return D(this.routeLoader,e).then(t,t.cancel)},e}(),U=function(){function e(){}return e.prototype.run=function(e,t){return e._commitChanges(!0).then((function(){return e._updateTitle(),t()}))},e}();!function(e){e.NoChange="no-change",e.InvokeLifecycle="invoke-lifecycle",e.Replace="replace"}(A||(A={}));var H,W,z,Q={noChange:"no-change",invokeLifecycle:"invoke-lifecycle",replace:"replace"},K=function(e,t,n,r){var i=e.plan,o=G(i,t),s=o.length;function a(e){return r||J(e)?u():n.cancel(e)}function u(){if(s--)try{var r=o[s][t](e);return ee(r,a,n.cancel)}catch(e){return n.cancel(e)}return e.router.couldDeactivate=!0,n()}return u()},G=function(e,t,n){for(var r in void 0===n&&(n=[]),e){var i=e[r],o=i.prevComponent;if((i.strategy===Q.invokeLifecycle||i.strategy===Q.replace)&&o){var s=o.viewModel;t in s&&n.push(s)}i.strategy===Q.replace&&o?Y(o,t,n):i.childNavigationInstruction&&G(i.childNavigationInstruction.plan,t,n)}return n},Y=function(e,t,n){var r=e.childRouter;if(r&&r.currentInstruction){var i=r.currentInstruction.viewPortInstructions;for(var o in i){var s=i[o].component,a=s.viewModel;t in a&&n.push(a),Y(s,t,n)}}},$=function(e,t,n,r){var i=X(e,t),o=i.length,s=-1;function a(){var e;if(++s<o)try{var u=i[s],c=(e=u.viewModel)[t].apply(e,u.lifecycleArgs);return ee(c,(function(e){return function(e,t){return r||J(e,t)?a():n.cancel(e)}(e,u.router)}),n.cancel)}catch(e){return n.cancel(e)}return n()}return a()},X=function(e,t,n,r){void 0===n&&(n=[]);var i=e.plan;return Object.keys(i).forEach((function(o){var s=i[o],a=e.viewPortInstructions[o],u=a.component,c=u.viewModel;(s.strategy===Q.invokeLifecycle||s.strategy===Q.replace)&&t in c&&n.push({viewModel:c,lifecycleArgs:a.lifecycleArgs,router:r});var l=s.childNavigationInstruction;l&&X(l,t,n,u.childRouter||r)})),n},J=function(e,t){return!(e instanceof Error)&&(k(e)?("function"==typeof e.setRouter&&e.setRouter(t),!!e.shouldContinueProcessing):void 0===e||e)},Z=function(){function e(e){this._subscribed=!0,this._subscription=e(this),this._subscribed||this.unsubscribe()}return Object.defineProperty(e.prototype,"subscribed",{get:function(){return this._subscribed},enumerable:!0,configurable:!0}),e.prototype.unsubscribe=function(){this._subscribed&&this._subscription&&this._subscription.unsubscribe(),this._subscribed=!1},e}(),ee=function(e,t,n){if(e&&"function"==typeof e.then)return Promise.resolve(e).then(t).catch(n);if(e&&"function"==typeof e.subscribe){var r=e;return new Z((function(i){return r.subscribe({next:function(){i.subscribed&&(i.unsubscribe(),t(e))},error:function(e){i.subscribed&&(i.unsubscribe(),n(e))},complete:function(){i.subscribed&&(i.unsubscribe(),t(e))}})}))}try{return t(e)}catch(e){return n(e)}},te=function(){function e(){}return e.prototype.run=function(e,t){return K(e,"canDeactivate",t)},e}(),ne=function(){function e(){}return e.prototype.run=function(e,t){return $(e,"canActivate",t)},e}(),re=function(){function e(){}return e.prototype.run=function(e,t){return K(e,"deactivate",t,!0)},e}(),ie=function(){function e(){}return e.prototype.run=function(e,t){return $(e,"activate",t,!0)},e}(),oe=function(){function e(e,t,n){this.steps=[],this.container=e,this.slotName=t,this.slotAlias=n}return e.prototype.getSteps=function(){var e=this;return this.steps.map((function(t){return e.container.get(t)}))},e}(),se=function(){function e(e){this.container=e,this.steps=[L,te,q,ae(e,"authorize"),ne,ae(e,"preActivate","modelbind"),re,ie,ae(e,"preRender","precommit"),U,ae(e,"postRender","postcomplete")]}return e.inject=function(){return[s.Container]},e.prototype.createPipeline=function(e){var t=this;void 0===e&&(e=!0);var n=new S;return this.steps.forEach((function(r){(e||r!==te)&&n.addStep(t.container.get(r))})),n},e.prototype._findStep=function(e){return this.steps.find((function(t){return t.slotName===e||t.slotAlias===e}))},e.prototype.addStep=function(e,t){var n=this._findStep(e);if(!n)throw new Error("Invalid pipeline slot name: "+e+".");var r=n.steps;r.includes(t)||r.push(t)},e.prototype.removeStep=function(e,t){var n=this._findStep(e);if(n){var r=n.steps;r.splice(r.indexOf(t),1)}},e.prototype._clearSteps=function(e){void 0===e&&(e="");var t=this._findStep(e);t&&(t.steps=[])},e.prototype.reset=function(){this._clearSteps("authorize"),this._clearSteps("preActivate"),this._clearSteps("preRender"),this._clearSteps("postRender")},e}(),ae=function(e,t,n){return new oe(e,t,n)},ue=o.getLogger("app-router"),ce=function(e){function t(t,n,r,i){var o=e.call(this,t,n)||this;return o.pipelineProvider=r,o.events=i,o}return function(e,t){function n(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.inject=function(){return[s.Container,a.History,se,c.EventAggregator]},t.prototype.reset=function(){e.prototype.reset.call(this),this.maxInstructionCount=10,this._queue?this._queue.length=0:this._queue=[]},t.prototype.loadUrl=function(e){var t=this;return this._createNavigationInstruction(e).then((function(e){return t._queueInstruction(e)})).catch((function(e){ue.error(e),pe(t)}))},t.prototype.registerViewPort=function(t,n){var r=this,i=t;if(e.prototype.registerViewPort.call(this,i,n),this.isActive)this._dequeueInstruction();else{var o=this._findViewModel(i);if("configureRouter"in o){if(!this.isConfigured){var s=this._resolveConfiguredPromise;return this._resolveConfiguredPromise=function(){},this.configure((function(e){return Promise.resolve(o.configureRouter(e,r)).then((function(){return e}))})).then((function(){r.activate(),s()}))}}else this.activate()}return Promise.resolve()},t.prototype.activate=function(e){this.isActive||(this.isActive=!0,this.options=Object.assign({routeHandler:this.loadUrl.bind(this)},this.options,e),this.history.activate(this.options),this._dequeueInstruction())},t.prototype.deactivate=function(){this.isActive=!1,this.history.deactivate()},t.prototype._queueInstruction=function(e){var t=this;return new Promise((function(n){e.resolve=n,t._queue.unshift(e),t._dequeueInstruction()}))},t.prototype._dequeueInstruction=function(e){var t=this;return void 0===e&&(e=0),Promise.resolve().then((function(){if(!t.isNavigating||e){var n=t._queue.shift();if(t._queue.length=0,n){t.isNavigating=!0;var r=t.history.getState("NavigationTracker"),i=t.currentNavigationTracker;r||i?r?i?i<r?t.isNavigatingForward=!0:i>r&&(t.isNavigatingBack=!0):t.isNavigatingRefresh=!0:t.isNavigatingNew=!0:(t.isNavigatingFirst=!0,t.isNavigatingNew=!0),r||(r=Date.now(),t.history.setState("NavigationTracker",r)),t.currentNavigationTracker=r,n.previousInstruction=t.currentInstruction;var o=t.maxInstructionCount;if(e){if(e===o-1)return ue.error(e+1+" navigation instructions have been attempted without success. Restoring last known good location."),pe(t),t._dequeueInstruction(e+1);if(e>o)throw new Error("Maximum navigation attempts exceeded. Giving up.")}else t.events.publish("router:navigation:processing",{instruction:n});return t.pipelineProvider.createPipeline(!t.couldDeactivate).run(n).then((function(r){return le(n,r,e,t)})).catch((function(e){return{output:e instanceof Error?e:new Error(e)}})).then((function(r){return he(n,r,!!e,t)}))}}}))},t.prototype._findViewModel=function(e){if(this.container.viewModel)return this.container.viewModel;if(e.container)for(var t=e.container;t;){if(t.viewModel)return this.container.viewModel=t.viewModel,t.viewModel;t=t.parent}},t}(w),le=function(e,t,n,r){t&&"completed"in t&&"output"in t||((t=t||{}).output=new Error("Expected router pipeline to return a navigation result, but got ["+JSON.stringify(t)+"] instead."));var i=null,o=null;return k(t.output)?o=t.output.navigate(r):(i=t,t.completed||(t.output instanceof Error&&ue.error(t.output.toString()),pe(r))),Promise.resolve(o).then((function(e){return r._dequeueInstruction(n+1)})).then((function(e){return i||e||t}))},he=function(e,t,n,r){e.resolve(t);var i=r.events,o={instruction:e,result:t};if(n)i.publish("router:navigation:child:complete",o);else{r.isNavigating=!1,r.isExplicitNavigation=!1,r.isExplicitNavigationBack=!1,r.isNavigatingFirst=!1,r.isNavigatingNew=!1,r.isNavigatingRefresh=!1,r.isNavigatingForward=!1,r.isNavigatingBack=!1,r.couldDeactivate=!1;var s=void 0;if(t.output instanceof Error)s="router:navigation:error";else if(t.completed){var a=e.queryString?"?"+e.queryString:"";r.history.previousLocation=e.fragment+a,s="router:navigation:success"}else s="router:navigation:canceled";i.publish(s,o),i.publish("router:navigation:complete",o)}return t},pe=function(e){var t=e.history.previousLocation;t?e.navigate(t,{trigger:!1,replace:!0}):e.fallbackRoute?e.navigate(e.fallbackRoute,{trigger:!0,replace:!0}):ue.error("Router navigation failed, and no previous location or fallbackRoute could be restored.")};(H=e.PipelineStatus||(e.PipelineStatus={})).Completed="completed",H.Canceled="canceled",H.Rejected="rejected",H.Running="running",(W=e.RouterEvent||(e.RouterEvent={})).Processing="router:navigation:processing",W.Error="router:navigation:error",W.Canceled="router:navigation:canceled",W.Complete="router:navigation:complete",W.Success="router:navigation:success",W.ChildComplete="router:navigation:child:complete",(z=e.PipelineSlotName||(e.PipelineSlotName={})).Authorize="authorize",z.PreActivate="preActivate",z.PreRender="preRender",z.PostRender="postRender",e.ActivateNextStep=ie,e.AppRouter=ce,e.BuildNavigationPlanStep=L,e.CanActivateNextStep=ne,e.CanDeactivatePreviousStep=te,e.CommitChangesStep=U,e.DeactivatePreviousStep=re,e.LoadRouteStep=q,e.NavModel=d,e.NavigationInstruction=h,e.Pipeline=S,e.PipelineProvider=se,e.Redirect=T,e.RedirectToRoute=O,e.RouteLoader=B,e.Router=w,e.RouterConfiguration=b,e.activationStrategy=Q,e.isNavigationCommand=k})),e.entry="dist/commonjs/aurelia-router.js"})),e.pkg("aurelia-task-queue",{},(function(e){return e.file("dist/commonjs/aurelia-task-queue.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TaskQueue=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=t("aurelia-pal");function a(e){return function(){var t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}e.TaskQueue=function(){function e(){var e,t,n,r,i,o=this;this.flushing=!1,this.longStacks=!1,this.microTaskQueue=[],this.microTaskQueueCapacity=1024,this.taskQueue=[],s.FEATURE.mutationObserver?this.requestFlushMicroTaskQueue=(e=function(){return o.flushMicroTaskQueue()},t=s.DOM.createMutationObserver(e),n="a",r=s.DOM.createTextNode("a"),(i=Object.create(null)).a="b",i.b="a",t.observe(r,{characterData:!0}),function(){r.data=n=i[n]}):this.requestFlushMicroTaskQueue=a((function(){return o.flushMicroTaskQueue()})),this.requestFlushTaskQueue=a((function(){return o.flushTaskQueue()}))}return e.prototype._flushQueue=function(e,t){var n=0,r=void 0;try{for(this.flushing=!0;n<e.length;)if(r=e[n],this.longStacks&&(this.stack="string"==typeof r.stack?r.stack:void 0),r.call(),++n>t){for(var i=0,s=e.length-n;i<s;i++)e[i]=e[i+n];e.length-=n,n=0}}catch(e){!function(e,t,n){n&&t.stack&&"object"===(void 0===e?"undefined":o(e))&&null!==e&&(e.stack=u(e.stack)+t.stack),"onError"in t?t.onError(e):setTimeout((function(){throw e}),0)}(e,r,this.longStacks)}finally{this.flushing=!1}},e.prototype.queueMicroTask=function(e){this.microTaskQueue.length<1&&this.requestFlushMicroTaskQueue(),this.longStacks&&(e.stack=this.prepareQueueStack("\nEnqueued in MicroTaskQueue by:\n")),this.microTaskQueue.push(e)},e.prototype.queueTask=function(e){this.taskQueue.length<1&&this.requestFlushTaskQueue(),this.longStacks&&(e.stack=this.prepareQueueStack("\nEnqueued in TaskQueue by:\n")),this.taskQueue.push(e)},e.prototype.flushTaskQueue=function(){var e=this.taskQueue;this.taskQueue=[],this._flushQueue(e,Number.MAX_VALUE)},e.prototype.flushMicroTaskQueue=function(){var e=this.microTaskQueue;this._flushQueue(e,this.microTaskQueueCapacity),e.length=0},e.prototype.prepareQueueStack=function(e){var t=e+function(e){return e.replace(/^[\s\S]*?\bqueue(Micro)?Task\b[^\n]*\n/,"")}(function(){var e=new Error;if(e.stack)return e.stack;try{throw e}catch(e){return e.stack}}());return"string"==typeof this.stack&&(t=u(t)+this.stack),t},e}();function u(e){var t=e.lastIndexOf("flushMicroTaskQueue");return t<0&&(t=e.lastIndexOf("flushTaskQueue"))<0?e:(t=e.lastIndexOf("\n",t))<0?e:e.substr(0,t)}})),e.entry="dist/commonjs/aurelia-task-queue.js"})),e.pkg("aurelia-templating-binding",{},(function(e){return e.file("dist/commonjs/aurelia-templating-binding.js",(function(e,t,n,r,i){"use strict";var o,s,a,u,c,l,h,p;Object.defineProperty(e,"__esModule",{value:!0}),e.TemplatingBindingLanguage=e.SyntaxInterpreter=e.LetInterpolationBinding=e.LetInterpolationBindingExpression=e.LetBinding=e.LetExpression=e.ChildInterpolationBinding=e.InterpolationBinding=e.InterpolationBindingExpression=e.AttributeMap=void 0,e.configure=function(e){e.container.registerSingleton(v.BindingLanguage,T),e.container.registerAlias(v.BindingLanguage,T)};var d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(t("aurelia-logging")),f=t("aurelia-binding"),v=t("aurelia-templating");var g=e.AttributeMap=(s=o=function(){function e(e){this.elements=Object.create(null),this.allElements=Object.create(null),this.svg=e,this.registerUniversal("accesskey","accessKey"),this.registerUniversal("contenteditable","contentEditable"),this.registerUniversal("tabindex","tabIndex"),this.registerUniversal("textcontent","textContent"),this.registerUniversal("innerhtml","innerHTML"),this.registerUniversal("scrolltop","scrollTop"),this.registerUniversal("scrollleft","scrollLeft"),this.registerUniversal("readonly","readOnly"),this.register("label","for","htmlFor"),this.register("img","usemap","useMap"),this.register("input","maxlength","maxLength"),this.register("input","minlength","minLength"),this.register("input","formaction","formAction"),this.register("input","formenctype","formEncType"),this.register("input","formmethod","formMethod"),this.register("input","formnovalidate","formNoValidate"),this.register("input","formtarget","formTarget"),this.register("textarea","maxlength","maxLength"),this.register("td","rowspan","rowSpan"),this.register("td","colspan","colSpan"),this.register("th","rowspan","rowSpan"),this.register("th","colspan","colSpan")}return e.prototype.register=function(e,t,n){e=e.toLowerCase(),t=t.toLowerCase(),(this.elements[e]=this.elements[e]||Object.create(null))[t]=n},e.prototype.registerUniversal=function(e,t){e=e.toLowerCase(),this.allElements[e]=t},e.prototype.map=function(e,t){if(this.svg.isStandardSvgAttribute(e,t))return t;e=e.toLowerCase(),t=t.toLowerCase();var n=this.elements[e];return void 0!==n&&t in n?n[t]:t in this.allElements?this.allElements[t]:/(?:^data-)|(?:^aria-)|:/.test(t)?t:(0,f.camelCase)(t)},e}(),o.inject=[f.SVGAnalyzer],s),y=e.InterpolationBindingExpression=function(){function e(e,t,n,r,i,o){this.observerLocator=e,this.targetProperty=t,this.parts=n,this.mode=r,this.lookupFunctions=i,this.attribute=this.attrToRemove=o,this.discrete=!1}return e.prototype.createBinding=function(e){return 3===this.parts.length?new w(e,this.observerLocator,this.parts[1],this.mode,this.lookupFunctions,this.targetProperty,this.parts[0],this.parts[2]):new b(this.observerLocator,this.parts,e,this.targetProperty,this.mode,this.lookupFunctions)},e}();function m(e,t){if("style"===t)d.getLogger("templating-binding").info('Internet Explorer does not support interpolation in "style" attributes.  Use the style attribute\'s alias, "css" instead.');else if(e.parentElement&&"TEXTAREA"===e.parentElement.nodeName&&"textContent"===t)throw new Error('Interpolation binding cannot be used in the content of a textarea element.  Use <textarea value.bind="expression"></textarea> instead.')}var b=e.InterpolationBinding=function(){function e(e,t,n,r,i,o){m(n,r),this.observerLocator=e,this.parts=t,this.target=n,this.targetProperty=r,this.targetAccessor=e.getAccessor(n,r),this.mode=i,this.lookupFunctions=o}return e.prototype.interpolate=function(){if(this.isBound){for(var e="",t=this.parts,n=0,r=t.length;n<r;n++)e+=n%2==0?t[n]:this["childBinding"+n].value;this.targetAccessor.setValue(e,this.target,this.targetProperty)}},e.prototype.updateOneTimeBindings=function(){for(var e=1,t=this.parts.length;e<t;e+=2){var n=this["childBinding"+e];n.mode===f.bindingMode.oneTime&&n.call()}},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.source=e;for(var t=this.parts,n=1,r=t.length;n<r;n+=2){var i=new w(this,this.observerLocator,t[n],this.mode,this.lookupFunctions);i.bind(e),this["childBinding"+n]=i}this.isBound=!0,this.interpolate()},e.prototype.unbind=function(){if(this.isBound){this.isBound=!1,this.source=null;for(var e=1,t=this.parts.length;e<t;e+=2){this["childBinding"+e].unbind()}}},e}(),w=e.ChildInterpolationBinding=(0,f.connectable)()(a=function(){function e(e,t,n,r,i,o,s,a){e instanceof b?this.parent=e:(m(e,o),this.target=e,this.targetProperty=o,this.targetAccessor=t.getAccessor(e,o)),this.observerLocator=t,this.sourceExpression=n,this.mode=r,this.lookupFunctions=i,this.left=s,this.right=a}return e.prototype.updateTarget=function(e){(e=null==e?"":e.toString())!==this.value&&(this.value=e,this.parent?this.parent.interpolate():this.targetAccessor.setValue(this.left+e+this.right,this.target,this.targetProperty))},e.prototype.call=function(){this.isBound&&(this.rawValue=this.sourceExpression.evaluate(this.source,this.lookupFunctions),this.updateTarget(this.rawValue),this.mode!==f.bindingMode.oneTime&&(this._version++,this.sourceExpression.connect(this,this.source),this.rawValue instanceof Array&&this.observeArray(this.rawValue),this.unobserve(!1)))},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e;var t=this.sourceExpression;t.bind&&t.bind(this,e,this.lookupFunctions),this.rawValue=t.evaluate(e,this.lookupFunctions),this.updateTarget(this.rawValue),this.mode===f.bindingMode.oneWay&&(0,f.enqueueBindingConnect)(this)},e.prototype.unbind=function(){if(this.isBound){this.isBound=!1;var e=this.sourceExpression;e.unbind&&e.unbind(this,this.source),this.source=null,this.value=null,this.rawValue=null,this.unobserve(!0)}},e.prototype.connect=function(e){this.isBound&&(e&&(this.rawValue=this.sourceExpression.evaluate(this.source,this.lookupFunctions),this.updateTarget(this.rawValue)),this.sourceExpression.connect(this,this.source),this.rawValue instanceof Array&&this.observeArray(this.rawValue))},e}())||a,_=e.LetExpression=function(){function e(e,t,n,r,i){this.observerLocator=e,this.sourceExpression=n,this.targetProperty=t,this.lookupFunctions=r,this.toBindingContext=i}return e.prototype.createBinding=function(){return new C(this.observerLocator,this.sourceExpression,this.targetProperty,this.lookupFunctions,this.toBindingContext)},e}(),C=e.LetBinding=(0,f.connectable)()(u=function(){function e(e,t,n,r,i){this.observerLocator=e,this.sourceExpression=t,this.targetProperty=n,this.lookupFunctions=r,this.source=null,this.target=null,this.toBindingContext=i}return e.prototype.updateTarget=function(){var e=this.sourceExpression.evaluate(this.source,this.lookupFunctions);this.target[this.targetProperty]=e},e.prototype.call=function(e){if(this.isBound){if(e!==f.sourceContext)throw new Error("Unexpected call context "+e);this.updateTarget()}},e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.target=this.toBindingContext?e.bindingContext:e.overrideContext,this.sourceExpression.bind&&this.sourceExpression.bind(this,e,this.lookupFunctions),(0,f.enqueueBindingConnect)(this)},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this.target=null,this.unobserve(!0))},e.prototype.connect=function(){this.isBound&&(this.updateTarget(),this.sourceExpression.connect(this,this.source))},e}())||u,E=e.LetInterpolationBindingExpression=function(){function e(e,t,n,r,i){this.observerLocator=e,this.targetProperty=t,this.parts=n,this.lookupFunctions=r,this.toBindingContext=i}return e.prototype.createBinding=function(){return new x(this.observerLocator,this.targetProperty,this.parts,this.lookupFunctions,this.toBindingContext)},e}(),x=e.LetInterpolationBinding=function(){function e(e,t,n,r,i){this.observerLocator=e,this.parts=n,this.targetProperty=t,this.lookupFunctions=r,this.toBindingContext=i,this.target=null}return e.prototype.bind=function(e){if(this.isBound){if(this.source===e)return;this.unbind()}this.isBound=!0,this.source=e,this.target=this.toBindingContext?e.bindingContext:e.overrideContext,this.interpolationBinding=this.createInterpolationBinding(),this.interpolationBinding.bind(e)},e.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.source=null,this.target=null,this.interpolationBinding.unbind(),this.interpolationBinding=null)},e.prototype.createInterpolationBinding=function(){return 3===this.parts.length?new w(this.target,this.observerLocator,this.parts[1],f.bindingMode.oneWay,this.lookupFunctions,this.targetProperty,this.parts[0],this.parts[2]):new b(this.observerLocator,this.parts,this.target,this.targetProperty,f.bindingMode.oneWay,this.lookupFunctions)},e}(),S=e.SyntaxInterpreter=(l=c=function(){function e(e,t,n,r){this.parser=e,this.observerLocator=t,this.eventManager=n,this.attributeMap=r}return e.prototype.interpret=function(e,t,n,r,i){return n.command in this?this[n.command](e,t,n,r,i):this.handleUnknownCommand(e,t,n,r,i)},e.prototype.handleUnknownCommand=function(e,t,n,r,i){return d.getLogger("templating-binding").warn("Unknown binding command.",n),r},e.prototype.determineDefaultBindingMode=function(e,t,n){var r=e.tagName.toLowerCase();return"input"===r&&("value"===t||"files"===t)&&"checkbox"!==e.type&&"radio"!==e.type||"input"===r&&"checked"===t&&("checkbox"===e.type||"radio"===e.type)||("textarea"===r||"select"===r)&&"value"===t||("textcontent"===t||"innerhtml"===t)&&"true"===e.contentEditable||"scrolltop"===t||"scrollleft"===t?f.bindingMode.twoWay:n&&t in n.attributes&&n.attributes[t]&&n.attributes[t].defaultBindingMode>=f.bindingMode.oneTime?n.attributes[t].defaultBindingMode:f.bindingMode.oneWay},e.prototype.bind=function(e,t,n,r,i){var o=r||v.BehaviorInstruction.attribute(n.attrName);return o.attributes[n.attrName]=new f.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),void 0===n.defaultBindingMode||null===n.defaultBindingMode?this.determineDefaultBindingMode(t,n.attrName,i):n.defaultBindingMode,e.lookupFunctions),o},e.prototype.trigger=function(e,t,n){return new f.ListenerExpression(this.eventManager,n.attrName,this.parser.parse(n.attrValue),f.delegationStrategy.none,!0,e.lookupFunctions)},e.prototype.capture=function(e,t,n){return new f.ListenerExpression(this.eventManager,n.attrName,this.parser.parse(n.attrValue),f.delegationStrategy.capturing,!0,e.lookupFunctions)},e.prototype.delegate=function(e,t,n){return new f.ListenerExpression(this.eventManager,n.attrName,this.parser.parse(n.attrValue),f.delegationStrategy.bubbling,!0,e.lookupFunctions)},e.prototype.call=function(e,t,n,r){var i=r||v.BehaviorInstruction.attribute(n.attrName);return i.attributes[n.attrName]=new f.CallExpression(this.observerLocator,n.attrName,this.parser.parse(n.attrValue),e.lookupFunctions),i},e.prototype.options=function(e,t,n,r,i){var o,s=r||v.BehaviorInstruction.attribute(n.attrName),a=n.attrValue,u=this.language,c=null,l="",h=void 0,p=void 0,d=!1,f=!1,g=!1;for(p=0,o=a.length;p<o;++p){if(";"!==(h=a[p])||d)if(":"===h&&null===c)g=!0,c=l.trim(),l="";else{if("\\"===h){l+=h,f=!0;continue}l+=h,null!==c&&!1===f&&"'"===h&&(d=!d)}else g||(c=this._getPrimaryPropertyName(e,i)),n=u.inspectAttribute(e,"?",c,l.trim()),u.createAttributeInstruction(e,t,n,s,i),s.attributes[n.attrName]||(s.attributes[n.attrName]=n.attrValue),l="",c=null;f=!1}return g||(c=this._getPrimaryPropertyName(e,i)),null!==c&&(n=u.inspectAttribute(e,"?",c,l.trim()),u.createAttributeInstruction(e,t,n,s,i),s.attributes[n.attrName]||(s.attributes[n.attrName]=n.attrValue)),s},e.prototype._getPrimaryPropertyName=function(e,t){var n=e.getAttribute(t.attributeName);return n&&n.primaryProperty?n.primaryProperty.attribute:null},e.prototype.for=function(e,t,n,r){var i,o=void 0,s=void 0,a=void 0,u=void 0;if(2!==(o=(i=(u=n.attrValue).match(/^ *[[].+[\]]/))?u.split("of "):u.split(" of ")).length)throw new Error('Incorrect syntax for "for". The form is: "$local of $items" or "[$key, $value] of $items".');return a=r||v.BehaviorInstruction.attribute(n.attrName),i?(s=o[0].replace(/[[\]]/g,"").replace(/,/g," ").replace(/\s+/g," ").trim().split(" "),a.attributes.key=s[0],a.attributes.value=s[1]):a.attributes.local=o[0],a.attributes.items=new f.BindingExpression(this.observerLocator,"items",this.parser.parse(o[1]),f.bindingMode.oneWay,e.lookupFunctions),a},e.prototype["two-way"]=function(e,t,n,r){var i=r||v.BehaviorInstruction.attribute(n.attrName);return i.attributes[n.attrName]=new f.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),f.bindingMode.twoWay,e.lookupFunctions),i},e.prototype["to-view"]=function(e,t,n,r){var i=r||v.BehaviorInstruction.attribute(n.attrName);return i.attributes[n.attrName]=new f.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),f.bindingMode.toView,e.lookupFunctions),i},e.prototype["from-view"]=function(e,t,n,r){var i=r||v.BehaviorInstruction.attribute(n.attrName);return i.attributes[n.attrName]=new f.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),f.bindingMode.fromView,e.lookupFunctions),i},e.prototype["one-time"]=function(e,t,n,r){var i=r||v.BehaviorInstruction.attribute(n.attrName);return i.attributes[n.attrName]=new f.BindingExpression(this.observerLocator,this.attributeMap.map(t.tagName,n.attrName),this.parser.parse(n.attrValue),f.bindingMode.oneTime,e.lookupFunctions),i},e}(),c.inject=[f.Parser,f.ObserverLocator,f.EventManager,g],l);S.prototype["one-way"]=S.prototype["to-view"];var k={},T=e.TemplatingBindingLanguage=(p=h=function(e){function t(t,n,r,i){var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return o.parser=t,o.observerLocator=n,o.syntaxInterpreter=r,o.emptyStringExpression=o.parser.parse("''"),r.language=o,o.attributeMap=i,o.toBindingContextAttr="to-binding-context",o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.inspectAttribute=function(e,t,n,r){var i=n.split(".");if(k.defaultBindingMode=null,2===i.length)k.attrName=i[0].trim(),k.attrValue=r,k.command=i[1].trim(),"ref"===k.command?(k.expression=new f.NameExpression(this.parser.parse(r),k.attrName,e.lookupFunctions),k.command=null,k.attrName="ref"):k.expression=null;else if("ref"===n)k.attrName=n,k.attrValue=r,k.command=null,k.expression=new f.NameExpression(this.parser.parse(r),"element",e.lookupFunctions);else{k.attrName=n,k.attrValue=r,k.command=null;var o=this.parseInterpolation(e,r);k.expression=null===o?null:new y(this.observerLocator,this.attributeMap.map(t,n),o,f.bindingMode.oneWay,e.lookupFunctions,n)}return k},t.prototype.createAttributeInstruction=function(e,t,n,r,i){var o=void 0;if(n.expression){if("ref"===n.attrName)return n.expression;(o=r||v.BehaviorInstruction.attribute(n.attrName)).attributes[n.attrName]=n.expression}else n.command&&(o=this.syntaxInterpreter.interpret(e,t,n,r,i));return o},t.prototype.createLetExpressions=function(e,t){for(var n=[],r=t.attributes,i=void 0,o=void 0,s=void 0,a=void 0,u=this.toBindingContextAttr,c=t.hasAttribute(u),l=0,h=r.length;h>l;++l)if(s=(i=r[l]).name,a=i.nodeValue,o=s.split("."),s!==u)if(2===o.length){if("bind"!==o[1]){d.getLogger("templating-binding-language").warn('Detected invalid let command. Expected "'+o[0]+'.bind", given "'+s+'"');continue}n.push(new _(this.observerLocator,(0,f.camelCase)(o[0]),this.parser.parse(a),e.lookupFunctions,c))}else s=(0,f.camelCase)(s),null===(o=this.parseInterpolation(e,a))&&d.getLogger("templating-binding-language").warn('Detected string literal in let bindings. Did you mean "'+s+".bind="+a+'" or "'+s+"=${"+a+'}" ?'),o?n.push(new E(this.observerLocator,s,o,e.lookupFunctions,c)):n.push(new _(this.observerLocator,s,new f.LiteralString(a),e.lookupFunctions,c));return n},t.prototype.inspectTextContent=function(e,t){var n=this.parseInterpolation(e,t);return null===n?null:new y(this.observerLocator,"textContent",n,f.bindingMode.oneWay,e.lookupFunctions,"textContent")},t.prototype.parseInterpolation=function(e,t){for(var n=t.indexOf("${",0),r=t.length,i=void 0,o=0,s=0,a=null,u=void 0,c=void 0,l=0;n>=0&&n<r-2;){s=1,u=n,n+=2;do{i=t[n],n++,"'"!==i&&'"'!==i?"\\"!==i?null===a&&("{"===i?s++:"}"===i&&s--):n++:null===a?a=i:a===i&&(a=null)}while(s>0&&n<r);if(0!==s)break;c=c||[],"\\"===t[u-1]&&"\\"!==t[u-2]?(c[l]=t.substring(o,u-1)+t.substring(u,n),c[++l]=this.emptyStringExpression,l++):(c[l]=t.substring(o,u),c[++l]=this.parser.parse(t.substring(u+2,n-1)),l++),o=n,n=t.indexOf("${",n)}return 0===l?null:(c[l]=t.substr(o),c)},t}(v.BindingLanguage),h.inject=[f.Parser,f.ObserverLocator,S,g],p)})),e.entry="dist/commonjs/aurelia-templating-binding.js"})),e.pkg("aurelia-templating-resources",{},(function(e){return e.file("dist/commonjs/aurelia-templating-resources.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s=t("aurelia-dependency-injection"),a=t("aurelia-pal"),u=t("aurelia-task-queue"),c=t("aurelia-templating"),l=t("aurelia-binding"),h=t("aurelia-logging"),p=t("aurelia-loader"),d=t("aurelia-path"),f=t("aurelia-metadata"),v=function(e,t){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function g(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function y(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}!function(e){e.InvokeLifecycle="invoke-lifecycle",e.Replace="replace"}(o||(o={}));var m=function(){function e(e,t,n,r,i,s){this.activationStrategy=o.InvokeLifecycle,this.element=e,this.container=t,this.compositionEngine=n,this.viewSlot=r,this.viewResources=i,this.taskQueue=s,this.currentController=null,this.currentViewModel=null,this.changes=Object.create(null)}return e.inject=function(){return[a.DOM.Element,s.Container,c.CompositionEngine,c.ViewSlot,c.ViewResources,u.TaskQueue]},e.prototype.created=function(e){this.owningView=e},e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t;var n=this.changes;n.view=this.view,n.viewModel=this.viewModel,n.model=this.model,this.pendingTask||b(this)},e.prototype.unbind=function(){this.changes=Object.create(null),this.bindingContext=null,this.overrideContext=null;this.viewSlot.removeAll(!0,!0)},e.prototype.modelChanged=function(e,t){this.changes.model=e,_(this)},e.prototype.viewChanged=function(e,t){this.changes.view=e,_(this)},e.prototype.viewModelChanged=function(e,t){this.changes.viewModel=e,_(this)},y([c.bindable],e.prototype,"model",void 0),y([c.bindable],e.prototype,"view",void 0),y([c.bindable],e.prototype,"viewModel",void 0),y([c.bindable],e.prototype,"activationStrategy",void 0),y([c.bindable],e.prototype,"swapOrder",void 0),e=y([c.noView,c.customElement("compose")],e)}();function b(e){var t=e.changes;if(e.changes=Object.create(null),function(e,t){var n=e.activationStrategy,r=e.currentViewModel;r&&"function"==typeof r.determineActivationStrategy&&(n=r.determineActivationStrategy());return"view"in t||"viewModel"in t||n===o.Replace}(e,t)){var n={view:e.view,viewModel:e.currentViewModel||e.viewModel,model:e.model};n=Object.assign(n,t),n=function(e,t){return Object.assign(t,{bindingContext:e.bindingContext,overrideContext:e.overrideContext,owningView:e.owningView,container:e.container,viewSlot:e.viewSlot,viewResources:e.viewResources,currentController:e.currentController,host:e.element,swapOrder:e.swapOrder})}(e,n),e.pendingTask=e.compositionEngine.compose(n).then((function(t){e.currentController=t,e.currentViewModel=t?t.viewModel:null}))}else if(e.pendingTask=function(e,t){if(e&&"function"==typeof e.activate)return Promise.resolve(e.activate(t))}(e.currentViewModel,t.model),!e.pendingTask)return;e.pendingTask=e.pendingTask.then((function(){w(e)}),(function(t){throw w(e),t}))}function w(e){e.pendingTask=null,function(e){for(var t in e)return!1;return!0}(e.changes)||b(e)}function _(e){e.pendingTask||e.updateRequested||(e.updateRequested=!0,e.taskQueue.queueMicroTask((function(){e.updateRequested=!1,b(e)})))}var C=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.view=null,this.bindingContext=null,this.overrideContext=null,this.showing=!1,this.cache=!0}return e.prototype.bind=function(e,t){this.bindingContext=e,this.overrideContext=t},e.prototype.unbind=function(){null!==this.view&&(this.view.unbind(),this.viewFactory.isCaching&&(this.showing?(this.showing=!1,this.viewSlot.remove(this.view,!0,!0)):this.view.returnToCache(),this.view=null))},e.prototype._show=function(){if(!this.showing)return null===this.view&&(this.view=this.viewFactory.create()),this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext),this.showing=!0,this.viewSlot.add(this.view);this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext)},e.prototype._hide=function(){var e=this;if(this.showing){this.showing=!1;var t=this.viewSlot.remove(this.view);if(t instanceof Promise)return t.then((function(){e._unbindView()}));this._unbindView()}},e.prototype._unbindView=function(){var e="false"!==this.cache&&!!this.cache;this.view.unbind(),e||(this.view=null)},e}(),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache=!0,t}return g(t,e),t.prototype.bind=function(t,n){e.prototype.bind.call(this,t,n),this.condition?this._show():this._hide()},t.prototype.conditionChanged=function(e){this._update(e)},t.prototype._update=function(e){var t,n=this;this.animating||(t=this.elseVm?e?this._swap(this.elseVm,this):this._swap(this,this.elseVm):e?this._show():this._hide())&&(this.animating=!0,t.then((function(){n.animating=!1,n.condition!==n.showing&&n._update(n.condition)})))},t.prototype._swap=function(e,t){switch(this.swapOrder){case"before":return Promise.resolve(t._show()).then((function(){return e._hide()}));case"with":return Promise.all([e._hide(),t._show()]);default:var n=e._hide();return n?n.then((function(){return t._show()})):t._show()}},y([c.bindable({primaryProperty:!0})],t.prototype,"condition",void 0),y([c.bindable],t.prototype,"swapOrder",void 0),y([c.bindable],t.prototype,"cache",void 0),t=y([c.customAttribute("if"),c.templateController,s.inject(c.BoundViewFactory,c.ViewSlot)],t)}(C),x=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._registerInIf(),r}return g(t,e),t.prototype.bind=function(t,n){e.prototype.bind.call(this,t,n),this.ifVm.condition?this._hide():this._show()},t.prototype._registerInIf=function(){for(var e=this.viewSlot.anchor.previousSibling;e&&!e.au;)e=e.previousSibling;if(!e||!e.au.if)throw new Error("Can't find matching If for Else custom attribute.");this.ifVm=e.au.if.viewModel,this.ifVm.elseVm=this},t=y([c.customAttribute("else"),c.templateController,s.inject(c.BoundViewFactory,c.ViewSlot)],t)}(C),S=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.parentOverrideContext=null,this.view=null}return e.prototype.bind=function(e,t){this.parentOverrideContext=t,this.valueChanged(this.value)},e.prototype.valueChanged=function(e){var t=l.createOverrideContext(e,this.parentOverrideContext),n=this.view;n?n.bind(e,t):((n=this.view=this.viewFactory.create()).bind(e,t),this.viewSlot.add(n))},e.prototype.unbind=function(){var e=this.view;this.parentOverrideContext=null,e&&e.unbind()},e=y([c.customAttribute("with"),c.templateController,s.inject(c.BoundViewFactory,c.ViewSlot)],e)}(),k=l.bindingMode.oneTime;function T(e,t){var n=e.length;for(t>0&&(t-=1);t<n;++t)I(e[t].overrideContext,t,n)}function O(e,t,n,r,i){var o={},s=l.createOverrideContext(o,e.scope.overrideContext);return void 0!==i?(o[e.key]=i,o[e.value]=t):o[e.local]=t,I(s,n,r),s}function I(e,t,n){var r=0===t,i=t===n-1,o=t%2==0;e.$index=t,e.$first=r,e.$last=i,e.$middle=!(r||i),e.$odd=!o,e.$even=o}function A(e,t){return e.behaviorInstructions.filter((function(e){return e.originalAttrName===t}))[0].attributes.items.sourceExpression}function N(e){for(var t=!1;e instanceof l.BindingBehavior;)e=e.expression;for(;e instanceof l.ValueConverter;)e=e.expression,t=!0;return t?e:null}function R(e){for(;e instanceof l.BindingBehavior;){if("oneTime"===e.name)return!0;e=e.expression}return!1}function P(e){e.call&&e.mode===k?e.call(l.sourceContext):e.updateOneTimeBindings&&e.updateOneTimeBindings()}function M(e,t,n,r){if(!n)return e.indexOf(t);for(var i=e.length,o=r||0;o<i;o++)if(n(e[o],t))return o;return-1}var L=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getArrayObserver(t)},e.prototype.instanceChanged=function(e,t){var n=this,r=e,i=t.length;if(t&&0!==i){var o=r.views(),s=o.length;if(0!==s)if(r.viewsRequireLifecycle){for(var a=o.slice(0),u=r.local,c=r.matcher(),l=[],h=[],p=0;p<s;p++){var d=a[p],f=d.bindingContext[u];-1===M(t,f,c)?h.push(d):l.push(f)}var v=void 0,g=void 0;l.length>0?(g=r.removeViews(h,!0,!r.viewsRequireLifecycle),v=function(){for(var e=0;e<i;e++){var s=t[e],a=M(l,s,c,e),u=void 0;if(-1===a){var h=O(r,t[e],e,i);r.insertView(e,h.bindingContext,h),l.splice(e,0,void 0)}else a===e?(u=o[a],l[a]=void 0):(u=o[a],r.moveView(a,e),l.splice(a,1),l.splice(e,0,void 0));u&&I(u.overrideContext,e,i)}n._inPlaceProcessItems(r,t)}):(g=r.removeAllViews(!0,!r.viewsRequireLifecycle),v=function(){return n._standardProcessInstanceChanged(r,t)}),g instanceof Promise?g.then(v):v()}else this._inPlaceProcessItems(r,t);else this._standardProcessInstanceChanged(r,t)}else r.removeAllViews(!0,!r.viewsRequireLifecycle)},e.prototype._standardProcessInstanceChanged=function(e,t){for(var n=0,r=t.length;n<r;n++){var i=O(e,t[n],n,r);e.addView(i.bindingContext,i)}},e.prototype._inPlaceProcessItems=function(e,t){for(var n=t.length,r=e.viewCount();r>n;)r--,e.removeView(r,!0,!e.viewsRequireLifecycle);for(var i=e.local,o=0;o<r;o++){var s=e.view(o),a=o===n-1,u=0!==o&&!a,c=s.bindingContext,l=s.overrideContext;c[i]===t[o]&&l.$middle===u&&l.$last===a||(c[i]=t[o],l.$middle=u,l.$last=a,e.updateBindings(s))}for(o=r;o<n;o++){l=O(e,t[o],o,n);e.addView(l.bindingContext,l)}},e.prototype.instanceMutated=function(e,t,n){var r=this;if(e.__queuedSplices){for(var i=0,o=n.length;i<o;++i){var s=n[i],a=s.index,u=s.removed,c=s.addedCount;l.mergeSplice(e.__queuedSplices,a,u,c)}e.__array=t.slice(0)}else{var h=this._runSplices(e,t.slice(0),n);if(h instanceof Promise){var p=e.__queuedSplices=[],d=function(){if(!p.length)return e.__queuedSplices=void 0,void(e.__array=void 0);var t=r._runSplices(e,e.__array,p)||Promise.resolve();p=e.__queuedSplices=[],t.then(d)};h.then(d)}}},e.prototype._runSplices=function(e,t,n){for(var r=this,i=0,o=[],s=0,a=n.length;s<a;++s){for(var u=n[s],c=0,l=u.removed.length;c<l;++c){var h=e.removeView(u.index+i+o.length,!0);h instanceof Promise&&o.push(h)}i-=u.addedCount}if(o.length>0)return Promise.all(o).then((function(){var i=r._handleAddedSplices(e,t,n);T(e.views(),i)}));var p=this._handleAddedSplices(e,t,n);T(e.views(),p)},e.prototype._handleAddedSplices=function(e,t,n){for(var r,i,o=t.length,s=0,a=n.length;s<a;++s){var u=n[s],c=r=u.index,l=u.index+u.addedCount;for((null==i||i>u.index)&&(i=r);c<l;++c){var h=O(e,t[c],c,o);e.insertView(c,h.bindingContext,h)}}return i},e}(),D=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getMapObserver(t)},e.prototype.instanceChanged=function(e,t){var n=this,r=e.removeAllViews(!0,!e.viewsRequireLifecycle);r instanceof Promise?r.then((function(){return n._standardProcessItems(e,t)})):this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,t){var n,r=0;t.forEach((function(i,o){n=O(e,i,r,t.size,o),e.addView(n.bindingContext,n),++r}))},e.prototype.instanceMutated=function(e,t,n){var r,i,o,s,a,u,c,l,h=[];for(i=0,o=n.length;i<o;++i)switch(r=(c=n[i]).key,c.type){case"update":a=this._getViewIndexByKey(e,r),(l=e.removeView(a,!0,!e.viewsRequireLifecycle))instanceof Promise&&h.push(l),s=O(e,t.get(r),a,t.size,r),e.insertView(a,s.bindingContext,s);break;case"add":u=e.viewCount()<=t.size-1?e.viewCount():t.size-1,s=O(e,t.get(r),u,t.size,r),e.insertView(t.size-1,s.bindingContext,s);break;case"delete":if(void 0===c.oldValue)return;a=this._getViewIndexByKey(e,r),(l=e.removeView(a,!0,!e.viewsRequireLifecycle))instanceof Promise&&h.push(l);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}h.length>0?Promise.all(h).then((function(){T(e.views(),0)})):T(e.views(),0)},e.prototype._getViewIndexByKey=function(e,t){var n,r;for(n=0,r=e.viewCount();n<r;++n)if(e.view(n).bindingContext[e.key]===t)return n},e}(),j=function(){function e(){}return e.prototype.instanceChanged=function(e,t){e.removeAllViews(!0)},e.prototype.getCollectionObserver=function(e,t){},e}(),F=function(){function e(){}return e.prototype.getCollectionObserver=function(){return null},e.prototype.instanceChanged=function(e,t){var n=this,r=e.removeAllViews(!0,!e.viewsRequireLifecycle);r instanceof Promise?r.then((function(){return n._standardProcessItems(e,t)})):this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,t){var n,r,i,o,s=e.viewCount();if((o=s-(t=Math.floor(t)))>0)for(o>s&&(o=s),n=0,r=o;n<r;++n)e.removeView(s-(n+1),!0,!e.viewsRequireLifecycle);else{for(n=s,r=t;n<r;++n)i=O(e,n,n,r),e.addView(i.bindingContext,i);T(e.views(),0)}},e}(),V=function(){function e(){}return e.prototype.getCollectionObserver=function(e,t){return e.getSetObserver(t)},e.prototype.instanceChanged=function(e,t){var n=this,r=e.removeAllViews(!0,!e.viewsRequireLifecycle);r instanceof Promise?r.then((function(){return n._standardProcessItems(e,t)})):this._standardProcessItems(e,t)},e.prototype._standardProcessItems=function(e,t){var n,r=0;t.forEach((function(i){n=O(e,i,r,t.size),e.addView(n.bindingContext,n),++r}))},e.prototype.instanceMutated=function(e,t,n){var r,i,o,s,a,u,c,l=[];for(i=0,o=n.length;i<o;++i)switch(r=(u=n[i]).value,u.type){case"add":var h=Math.max(t.size-1,0);s=O(e,r,h,t.size),e.insertView(h,s.bindingContext,s);break;case"delete":a=this._getViewIndexByValue(e,r),(c=e.removeView(a,!0,!e.viewsRequireLifecycle))instanceof Promise&&l.push(c);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}l.length>0?Promise.all(l).then((function(){T(e.views(),0)})):T(e.views(),0)},e.prototype._getViewIndexByValue=function(e,t){var n,r;for(n=0,r=e.viewCount();n<r;++n)if(e.view(n).bindingContext[e.local]===t)return n},e}(),B=function(){function e(){this.matchers=[],this.strategies=[],this.addStrategy((function(e){return null==e}),new j),this.addStrategy((function(e){return e instanceof Array}),new L),this.addStrategy((function(e){return e instanceof Map}),new D),this.addStrategy((function(e){return e instanceof Set}),new V),this.addStrategy((function(e){return"number"==typeof e}),new F)}return e.prototype.addStrategy=function(e,t){this.matchers.push(e),this.strategies.push(t)},e.prototype.getStrategy=function(e){for(var t=this.matchers,n=0,r=t.length;n<r;++n)if(t[n](e))return this.strategies[n];return null},e}(),q=["focus","if","else","repeat","show","hide","with"];function U(e){var t=e.type,n=null!==t.elementName?t.elementName:t.attributeName;return-1===q.indexOf(n)&&(t.handlesAttached||t.handlesBind||t.handlesCreated||t.handlesDetached||t.handlesUnbind)||t.viewFactory&&W(t.viewFactory)||e.viewFactory&&W(e.viewFactory)}function H(e){var t=e.behaviorInstructions;if(t)for(var n=t.length;n--;)if(U(t[n]))return!0;return e.viewFactory&&W(e.viewFactory)}function W(e){if("_viewsRequireLifecycle"in e)return e._viewsRequireLifecycle;if(e._viewsRequireLifecycle=!1,e.viewFactory)return e._viewsRequireLifecycle=W(e.viewFactory),e._viewsRequireLifecycle;if(e.template.querySelector(".au-animate"))return e._viewsRequireLifecycle=!0,!0;for(var t in e.instructions)if(H(e.instructions[t]))return e._viewsRequireLifecycle=!0,!0;return e._viewsRequireLifecycle=!1,!1}var z=function(){function e(e){Object.assign(this,{local:"items",viewsRequireLifecycle:!0},e)}return e.prototype.viewCount=function(){throw new Error("subclass must implement `viewCount`")},e.prototype.views=function(){throw new Error("subclass must implement `views`")},e.prototype.view=function(e){throw new Error("subclass must implement `view`")},e.prototype.matcher=function(){throw new Error("subclass must implement `matcher`")},e.prototype.addView=function(e,t){throw new Error("subclass must implement `addView`")},e.prototype.insertView=function(e,t,n){throw new Error("subclass must implement `insertView`")},e.prototype.moveView=function(e,t){throw new Error("subclass must implement `moveView`")},e.prototype.removeAllViews=function(e,t){throw new Error("subclass must implement `removeAllViews`")},e.prototype.removeViews=function(e,t,n){throw new Error("subclass must implement `removeView`")},e.prototype.removeView=function(e,t,n){throw new Error("subclass must implement `removeView`")},e.prototype.updateBindings=function(e){throw new Error("subclass must implement `updateBindings`")},e}(),Q=function(e){function t(t,n,r,i,o,s){var a=e.call(this,{local:"item",viewsRequireLifecycle:W(t)})||this;return a.viewFactory=t,a.instruction=n,a.viewSlot=r,a.lookupFunctions=i.lookupFunctions,a.observerLocator=o,a.key="key",a.value="value",a.strategyLocator=s,a.ignoreMutation=!1,a.sourceExpression=A(a.instruction,"repeat.for"),a.isOneTime=R(a.sourceExpression),a.viewsRequireLifecycle=W(t),a}var n;return g(t,e),n=t,t.prototype.call=function(e,t){this[e](this.items,t)},t.prototype.bind=function(e,t){this.scope={bindingContext:e,overrideContext:t},this.matcherBinding=this._captureAndRemoveMatcherBinding(),this.itemsChanged()},t.prototype.unbind=function(){this.scope=null,this.items=null,this.matcherBinding=null,this.viewSlot.removeAll(!0,!0),this._unsubscribeCollection()},t.prototype._unsubscribeCollection=function(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)},t.prototype.itemsChanged=function(){var e=this;if(this._unsubscribeCollection(),this.scope){var t=this.items;if(this.strategy=this.strategyLocator.getStrategy(t),!this.strategy)throw new Error("Value for '"+this.sourceExpression+"' is non-repeatable");this.isOneTime||this._observeInnerCollection()||this._observeCollection(),this.ignoreMutation=!0,this.strategy.instanceChanged(this,t),this.observerLocator.taskQueue.queueMicroTask((function(){e.ignoreMutation=!1}))}},t.prototype._getInnerCollection=function(){var e=N(this.sourceExpression);return e?e.evaluate(this.scope,null):null},t.prototype.handleCollectionMutated=function(e,t){this.collectionObserver&&(this.ignoreMutation||this.strategy.instanceMutated(this,e,t))},t.prototype.handleInnerCollectionMutated=function(e,t){var n=this;if(this.collectionObserver&&!this.ignoreMutation){this.ignoreMutation=!0;var r=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask((function(){return n.ignoreMutation=!1})),r===this.items?this.itemsChanged():this.items=r}},t.prototype._observeInnerCollection=function(){var e=this._getInnerCollection(),t=this.strategyLocator.getStrategy(e);return!!t&&(this.collectionObserver=t.getCollectionObserver(this.observerLocator,e),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))},t.prototype._observeCollection=function(){var e=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,e),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))},t.prototype._captureAndRemoveMatcherBinding=function(){var e=this.viewFactory.viewFactory;if(e){var t=e.template,r=e.instructions;if(n.useInnerMatcher)return K(r);if(t.children.length>1)return;var i=t.firstElementChild;if(!i.hasAttribute("au-target-id"))return;var o=i.getAttribute("au-target-id");return K(r,o)}},t.prototype.viewCount=function(){return this.viewSlot.children.length},t.prototype.views=function(){return this.viewSlot.children},t.prototype.view=function(e){return this.viewSlot.children[e]},t.prototype.matcher=function(){var e=this.matcherBinding;return e?e.sourceExpression.evaluate(this.scope,e.lookupFunctions):null},t.prototype.addView=function(e,t){var n=this.viewFactory.create();n.bind(e,t),this.viewSlot.add(n)},t.prototype.insertView=function(e,t,n){var r=this.viewFactory.create();r.bind(t,n),this.viewSlot.insert(e,r)},t.prototype.moveView=function(e,t){this.viewSlot.move(e,t)},t.prototype.removeAllViews=function(e,t){return this.viewSlot.removeAll(e,t)},t.prototype.removeViews=function(e,t,n){return this.viewSlot.removeMany(e,t,n)},t.prototype.removeView=function(e,t,n){return this.viewSlot.removeAt(e,t,n)},t.prototype.updateBindings=function(e){for(var t=e,n=t.bindings.length;n--;)P(t.bindings[n]);for(n=t.controllers.length;n--;)for(var r=t.controllers[n].boundProperties.length;r--;){P(t.controllers[n].boundProperties[r].binding)}},t.useInnerMatcher=!0,y([c.bindable],t.prototype,"items",void 0),y([c.bindable],t.prototype,"local",void 0),y([c.bindable],t.prototype,"key",void 0),y([c.bindable],t.prototype,"value",void 0),t=n=y([c.customAttribute("repeat"),c.templateController,s.inject(c.BoundViewFactory,c.TargetInstruction,c.ViewSlot,c.ViewResources,l.ObserverLocator,B)],t)}(z),K=function(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];if(void 0===t||i===t){var o=e[i].expressions;if(o)for(var s=0;s<o.length;s++)if("matcher"===o[s].targetProperty){var a=o[s];return o.splice(s,1),a}}}},G=".aurelia-hide { display:none !important; }";function Y(e){a.FEATURE.shadowDOM&&e&&!e.hasAureliaHideStyle&&(e.hasAureliaHideStyle=!0,a.DOM.injectStyles(G,e))}var $=function(){function e(e,t,n){this.element=e,this.animator=t,this.domBoundary=n}return e.inject=function(){return[a.DOM.Element,c.Animator,s.Optional.of(a.DOM.boundary,!0)]},e.prototype.created=function(){Y(this.domBoundary)},e.prototype.valueChanged=function(e){var t=this.element,n=this.animator;e?n.removeClass(t,"aurelia-hide"):n.addClass(t,"aurelia-hide")},e.prototype.bind=function(e){this.valueChanged(this.value)},e=y([c.customAttribute("show")],e)}(),X=function(){function e(e,t,n){this.element=e,this.animator=t,this.domBoundary=n}return e.inject=function(){return[a.DOM.Element,c.Animator,s.Optional.of(a.DOM.boundary,!0)]},e.prototype.created=function(){Y(this.domBoundary)},e.prototype.valueChanged=function(e){e?this.animator.addClass(this.element,"aurelia-hide"):this.animator.removeClass(this.element,"aurelia-hide")},e.prototype.bind=function(e){this.valueChanged(this.value)},e.prototype.value=function(e){throw new Error("Method not implemented.")},e=y([c.customAttribute("hide")],e)}(),J=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Z=!0,ee=function(){function e(){}return e.prototype.sanitize=function(e){return Z&&(Z=!1,h.getLogger("html-sanitizer").warn("CAUTION: The default HTMLSanitizer does NOT provide security against a wide variety of sophisticated XSS attacks,\nand should not be relied on for sanitizing input from unknown sources.\nPlease see https://aurelia.io/docs/binding/basics#element-content for instructions on how to use a secure solution like DOMPurify or sanitize-html.")),e.replace(J,"")},e}(),te=function(){function e(e){this.sanitizer=e}return e.prototype.toView=function(e){return null==e?null:this.sanitizer.sanitize(e)},e=y([l.valueConverter("sanitizeHTML"),s.inject(ee)],e)}(),ne=function(){function e(e,t){this.viewFactory=e,this.viewSlot=t,this.view=null}return e.prototype.bind=function(e,t){null===this.view&&(this.view=this.viewFactory.create(),this.viewSlot.add(this.view)),this.view.bind(e,t)},e.prototype.unbind=function(){this.view.unbind()},e=y([c.customAttribute("replaceable"),c.templateController,s.inject(c.BoundViewFactory,c.ViewSlot)],e)}(),re=function(){function e(e,t){this.element=e,this.taskQueue=t,this.isAttached=!1,this.needsApply=!1}return e.inject=function(){return[a.DOM.Element,u.TaskQueue]},e.prototype.valueChanged=function(e){this.isAttached?this._apply():this.needsApply=!0},e.prototype._apply=function(){var e=this;this.value?this.taskQueue.queueMicroTask((function(){e.value&&e.element.focus()})):this.element.blur()},e.prototype.attached=function(){this.isAttached=!0,this.needsApply&&(this.needsApply=!1,this._apply()),this.element.addEventListener("focus",this),this.element.addEventListener("blur",this)},e.prototype.detached=function(){this.isAttached=!1,this.element.removeEventListener("focus",this),this.element.removeEventListener("blur",this)},e.prototype.handleEvent=function(e){"focus"===e.type?this.value=!0:a.DOM.activeElement!==this.element&&(this.value=!1)},e=y([c.customAttribute("focus",l.bindingMode.twoWay)],e)}(),ie=/url\((?!['"]data)([^)]+)\)/gi;var oe=function(){function e(e){this.address=e,this._scoped=null,this._global=!1,this._alreadyGloballyInjected=!1}return e.prototype.initialize=function(e,t){this._scoped=new t(this)},e.prototype.register=function(e,t){"scoped"===t?e.registerViewEngineHooks(this._scoped):this._global=!0},e.prototype.load=function(e){var t=this;return e.get(p.Loader).loadText(this.address).catch((function(e){return null})).then((function(e){e=function(e,t){if("string"!=typeof t)throw new Error("Failed loading required CSS file: "+e);return t.replace(ie,(function(t,n){var r=n.charAt(0);return"'"!==r&&'"'!==r||(n=n.substr(1,n.length-2)),"url('"+d.relativeToFile(n,e)+"')"}))}(t.address,e),t._scoped.css=e,t._global&&(t._alreadyGloballyInjected=!0,a.DOM.injectStyles(e))}))},e}(),se=function(){function e(e){this.owner=e,this.css=null}return e.prototype.beforeCompile=function(e,t,n){if(n.targetShadowDOM)a.DOM.injectStyles(this.css,e,!0);else if(a.FEATURE.scopedCSS){a.DOM.injectStyles(this.css,e,!0).setAttribute("scoped","scoped")}else this._global&&!this.owner._alreadyGloballyInjected&&(a.DOM.injectStyles(this.css),this.owner._alreadyGloballyInjected=!0)},e}();var ae=function(){function e(){}return e.prototype.bind=function(e,t){e.targetObserver=new l.DataAttributeObserver(e.target,e.targetProperty)},e.prototype.unbind=function(e,t){},e=y([l.bindingBehavior("attr")],e)}(),ue={bind:function(e,t,n){e.originalMode=e.mode,e.mode=this.mode},unbind:function(e,t){e.mode=e.originalMode,e.originalMode=null}},ce=function(){function e(){this.mode=l.bindingMode.oneTime}return e=y([f.mixin(ue),l.bindingBehavior("oneTime")],e)}(),le=function(){function e(){this.mode=l.bindingMode.toView}return e=y([f.mixin(ue),l.bindingBehavior("oneWay")],e)}(),he=function(){function e(){this.mode=l.bindingMode.toView}return e=y([f.mixin(ue),l.bindingBehavior("toView")],e)}(),pe=function(){function e(){this.mode=l.bindingMode.fromView}return e=y([f.mixin(ue),l.bindingBehavior("fromView")],e)}(),de=function(){function e(){this.mode=l.bindingMode.twoWay}return e=y([f.mixin(ue),l.bindingBehavior("twoWay")],e)}();function fe(e){var t=this,n=this.throttleState,r=+new Date-n.last;if(r>=n.delay)return clearTimeout(n.timeoutId),n.timeoutId=null,n.last=+new Date,void this.throttledMethod(e);n.newValue=e,null===n.timeoutId&&(n.timeoutId=setTimeout((function(){n.timeoutId=null,n.last=+new Date,t.throttledMethod(n.newValue)}),n.delay-r))}var ve=function(){function e(){}return e.prototype.bind=function(e,t,n){void 0===n&&(n=200);var r="updateTarget";e.callSource?r="callSource":e.updateSource&&e.mode===l.bindingMode.twoWay&&(r="updateSource"),e.throttledMethod=e[r],e.throttledMethod.originalName=r,e[r]=fe,e.throttleState={delay:n,last:0,timeoutId:null}},e.prototype.unbind=function(e,t){e[e.throttledMethod.originalName]=e.throttledMethod,e.throttledMethod=null,clearTimeout(e.throttleState.timeoutId),e.throttleState=null},e=y([l.bindingBehavior("throttle")],e)}(),ge={};function ye(e){var t=this,n=this.debounceState;clearTimeout(n.timeoutId),n.timeoutId=setTimeout((function(){return t.debouncedMethod(e)}),n.delay)}function me(e,t,n){var r=this,i=this.debounceState;if(clearTimeout(i.timeoutId),e!==i.callContextToDebounce)return i.oldValue=ge,void this.debouncedMethod(e,t,n);i.oldValue===ge&&(i.oldValue=n),i.timeoutId=setTimeout((function(){var n=i.oldValue;i.oldValue=ge,r.debouncedMethod(e,t,n)}),i.delay)}var be=function(){function e(){}return e.prototype.bind=function(e,t,n){void 0===n&&(n=200);var r=void 0!==e.callSource,i=r?"callSource":"call",o=r?ye:me,s=e.mode,a=s===l.bindingMode.twoWay||s===l.bindingMode.fromView?l.targetContext:l.sourceContext;e.debouncedMethod=e[i],e.debouncedMethod.originalName=i,e[i]=o,e.debounceState={callContextToDebounce:a,delay:n,timeoutId:0,oldValue:ge}},e.prototype.unbind=function(e,t){e[e.debouncedMethod.originalName]=e.debouncedMethod,e.debouncedMethod=null,clearTimeout(e.debounceState.timeoutId),e.debounceState=null},e=y([l.bindingBehavior("debounce")],e)}();function we(e){var t=function(e){return e.path&&e.path[0]||e.deepPath&&e.deepPath[0]||e.target}(e);this.target===t&&this.selfEventCallSource(e)}var _e=function(){function e(){}return e.prototype.bind=function(e,t){if(!e.callSource||!e.targetEvent)throw new Error("Self binding behavior only supports event.");e.selfEventCallSource=e.callSource,e.callSource=we},e.prototype.unbind=function(e,t){e.callSource=e.selfEventCallSource,e.selfEventCallSource=null},e=y([l.bindingBehavior("self")],e)}(),Ce=function(){function e(){this.signals={}}return e.prototype.signal=function(e){var t=this.signals[e];if(t)for(var n=t.length;n--;)t[n].call(l.sourceContext)},e}(),Ee=function(){function e(e){this.signals=e.signals}return e.inject=function(){return[Ce]},e.prototype.bind=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!e.updateTarget)throw new Error("Only property bindings and string interpolation bindings can be signaled.  Trigger, delegate and call bindings cannot be signaled.");var i=this.signals;if(1===n.length){var o=n[0];(i[o]||(i[o]=[])).push(e),e.signalName=o}else{if(!(n.length>1))throw new Error("Signal name is required.");for(var s=n.length;s--;){var a=n[s];(i[a]||(i[a]=[])).push(e)}e.signalName=n}},e.prototype.unbind=function(e,t){var n=this.signals,r=e.signalName;if(e.signalName=null,Array.isArray(r))for(var i=r,o=i.length;o--;){var s;(s=n[i[o]]).splice(s.indexOf(e),1)}else(s=n[r]).splice(s.indexOf(e),1)},e=y([l.bindingBehavior("signal")],e)}(),xe="The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">",Se="The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.",ke=function(){function e(){}return e.prototype.bind=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(0===n.length)throw new Error(xe);if(e.mode!==l.bindingMode.twoWay&&e.mode!==l.bindingMode.fromView)throw new Error(Se);var i=e.observerLocator.getObserver(e.target,e.targetProperty);if(!i.handler)throw new Error(Se);e.targetObserver=i,i.originalHandler=e.targetObserver.handler;var o=new l.EventSubscriber(n);i.handler=o},e.prototype.unbind=function(e,t){var n=e.targetObserver;n.handler.dispose(),n.handler=n.originalHandler,n.originalHandler=null},e=y([l.bindingBehavior("updateTrigger")],e)}();function Te(e){var t=e.container.get(c.ViewEngine),n=e.aurelia.loader;t.addResourcePlugin(".html",{fetch:function(e){return n.loadTemplate(e).then((function(t){var n,r=t.template.getAttribute("bindable"),i=t.template.getAttribute("use-shadow-dom"),o=/([^\/^\?]+)\.html/i.exec(e)[1].toLowerCase();return r?(r=r.split(",").map((function(e){return e.trim()})),t.template.removeAttribute("bindable")):r=[],(n={})[o]=function(e){for(var t=e.name,n=e.viewUrl,r=e.bindableNames,i=e.useShadowDOMmode,o=function(){function e(){}return e.prototype.bind=function(e){this.$parent=e},e=y([c.customElement(t),c.useView(n)],e)}(),s=0,a=r.length;s<a;++s)c.bindable(r[s])(o);switch(i){case"open":c.useShadowDOM({mode:"open"})(o);break;case"closed":c.useShadowDOM({mode:"closed"})(o);break;case"":c.useShadowDOM(o);break;case null:break;default:h.getLogger("aurelia-html-only-element").warn('Expected \'use-shadow-dom\' value to be "close", "open" or "", received '+i)}return o}({name:o,viewUrl:e,bindableNames:r,useShadowDOMmode:i}),n}))}})}e.AbstractRepeater=z,e.ArrayRepeatStrategy=L,e.AttrBindingBehavior=ae,e.BindingSignaler=Ce,e.Compose=m,e.DebounceBindingBehavior=be,e.Else=x,e.Focus=re,e.FromViewBindingBehavior=pe,e.HTMLSanitizer=ee,e.Hide=X,e.If=E,e.MapRepeatStrategy=D,e.NullRepeatStrategy=j,e.NumberRepeatStrategy=F,e.OneTimeBindingBehavior=ce,e.OneWayBindingBehavior=le,e.Repeat=Q,e.RepeatStrategyLocator=B,e.Replaceable=ne,e.SanitizeHTMLValueConverter=te,e.SelfBindingBehavior=_e,e.SetRepeatStrategy=V,e.Show=$,e.SignalBindingBehavior=Ee,e.ThrottleBindingBehavior=ve,e.ToViewBindingBehavior=he,e.TwoWayBindingBehavior=de,e.UpdateTriggerBindingBehavior=ke,e.With=S,e.configure=function(e){a.DOM.injectStyles(G),e.globalResources(m,E,x,S,Q,$,X,ne,re,te,ce,le,he,pe,de,ve,be,_e,Ee,ke,ae),Te(e);var t=e.container.get(c.ViewEngine),n={fetch:function(e){var t;return(t={})[e]=function(e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return g(n,t),n=y([c.resource(new oe(e))],n)}(se)}(e),t}};[".css",".less",".sass",".scss",".styl"].forEach((function(e){return t.addResourcePlugin(e,n)}))},e.createFullOverrideContext=O,e.getItemsSourceExpression=A,e.isOneTime=R,e.unwrapExpression=N,e.updateOneTimeBinding=P,e.updateOverrideContext=I,e.viewsRequireLifecycle=W})),e.entry="dist/commonjs/aurelia-templating-resources.js"})),e.pkg("aurelia-templating-router",{},(function(e){return e.file("dist/commonjs/aurelia-templating-router.js",(function(e,t,n,r,i){t("process");Object.defineProperty(e,"__esModule",{value:!0});var o=t("aurelia-router"),s=t("aurelia-metadata"),a=t("aurelia-path"),u=t("aurelia-templating"),c=t("aurelia-dependency-injection"),l=t("aurelia-binding"),h=t("aurelia-pal"),p=t("aurelia-logging"),d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};var f=function(){},v=function(){function e(e,t,n,r,i,o,s){this.element=e,this.container=t,this.viewSlot=n,this.router=r,this.viewLocator=i,this.compositionTransaction=o,this.compositionEngine=s,this.router.registerViewPort(this,this.element.getAttribute("name")),"initialComposition"in o||(o.initialComposition=!0,this.compositionTransactionNotifier=o.enlist())}return e.inject=function(){return[h.DOM.Element,c.Container,u.ViewSlot,o.Router,u.ViewLocator,u.CompositionTransaction,u.CompositionEngine]},e.prototype.created=function(e){this.owningView=e},e.prototype.bind=function(e,t){this.container.viewModel=e,this.overrideContext=t},e.prototype.process=function(e,t){var n=this,r=e,i=r.component,o=i.childContainer,a=i.viewModel,c=i.viewModelResource,l=c.metadata,h=i.router.currentInstruction.config,p=h.viewPorts&&h.viewPorts[r.name]||{};o.get(g)._notify(this);var d={viewModel:p.layoutViewModel||h.layoutViewModel||this.layoutViewModel,view:p.layoutView||h.layoutView||this.layoutView,model:p.layoutModel||h.layoutModel||this.layoutModel,router:r.component.router,childContainer:o,viewSlot:this.viewSlot},f=this.viewLocator.getViewStrategy(i.view||a);return f&&i.view&&f.makeRelativeTo(s.Origin.get(i.router.container.viewModel.constructor).moduleId),l.load(o,c.value,null,f,!0).then((function(e){n.compositionTransactionNotifier||(n.compositionTransactionOwnershipToken=n.compositionTransaction.tryCapture()),(d.viewModel||d.view)&&(r.layoutInstruction=d);var i=u.BehaviorInstruction.dynamic(n.element,a,e);if(r.controller=l.create(o,i),t)return null;n.swap(r)}))},e.prototype.swap=function(e){var t=this,n=e,r=n.controller,i=n.layoutInstruction,o=this.view,s=function(){var e=u.SwapStrategies[t.swapOrder]||u.SwapStrategies.after,n=t.viewSlot;e(n,o,(function(){return Promise.resolve(n.add(t.view))})).then((function(){t._notify()}))},a=function(e){r.automate(t.overrideContext,e);var n=t.compositionTransactionOwnershipToken;return n?n.waitForCompositionComplete().then((function(){return t.compositionTransactionOwnershipToken=null,s()})):s()};return i?(i.viewModel||(i.viewModel=new f),this.compositionEngine.createController(i).then((function(e){var n=e.view;return u.ShadowDOM.distributeView(r.view,e.slots||n.slots),e.automate(l.createOverrideContext(i.viewModel),t.owningView),n.children.push(r.view),n||e})).then((function(e){return t.view=e,a(e)}))):(this.view=r.view,a(this.owningView))},e.prototype._notify=function(){var e=this.compositionTransactionNotifier;e&&(e.done(),this.compositionTransactionNotifier=null)},e.$view=null,e.$resource={name:"router-view",bindables:["swapOrder","layoutView","layoutViewModel","layoutModel","inherit-binding-context"]},e}(),g=function(){function e(){var e=this;this.promise=new Promise((function(t){return e.resolve=t}))}return e.prototype.findNearest=function(){return this.promise},e.prototype._notify=function(e){this.resolve(e)},e}(),y=function(){};u.inlineView("<template></template>")(y);var m=function(e){function t(t){var n=e.call(this)||this;return n.compositionEngine=t,n}return function(e,t){function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.resolveViewModel=function(e,t){return new Promise((function(n,r){var i;if("moduleId"in t){var o=t.moduleId;return null===o?i=y:(o=a.relativeToFile(o,s.Origin.get(e.container.viewModel.constructor).moduleId),i=/\.html/i.test(o)?function(e){var t=/([^\/^\?]+)\.html/i.exec(e)[1],n=function(){function e(){}return e.prototype.bind=function(e){this.$parent=e},e}();return u.customElement(t)(n),u.useView(e)(n),n}(o):o),n(i)}r(new Error('Invalid route config. No "moduleId" found.'))}))},t.prototype.createChildContainer=function(e){var t=e.container.createChild();return t.registerSingleton(g),t.getChildRouter=function(){var n;return t.registerHandler(o.Router,(function(){return n||(n=e.createChild(t))})),t.get(o.Router)},t},t.prototype.loadRoute=function(e,t,n){var r=this;return this.resolveViewModel(e,t).then((function(n){return r.compositionEngine.ensureViewModel({viewModel:n,childContainer:r.createChildContainer(e),view:t.view||t.viewStrategy,router:e})}))},t.inject=[u.CompositionEngine],t}(o.RouteLoader);var b=p.getLogger("route-href"),w=function(){function e(e,t){this.router=e,this.element=t,this.attribute="href"}return e.inject=function(){return[o.Router,h.DOM.Element]},e.prototype.bind=function(){this.isActive=!0,this.processChange()},e.prototype.unbind=function(){this.isActive=!1},e.prototype.attributeChanged=function(e,t){return t&&this.element.removeAttribute(t),this.processChange()},e.prototype.processChange=function(){var e=this;return this.router.ensureConfigured().then((function(){if(!e.isActive)return null;var t=e.element,n=e.router.generate(e.route,e.params);return t.au.controller?t.au.controller.viewModel[e.attribute]=n:t.setAttribute(e.attribute,n),null})).catch((function(e){b.error(e)}))},e.$resource={type:"attribute",name:"route-href",bindables:[{name:"route",changeHandler:"processChange",primaryProperty:!0},{name:"params",changeHandler:"processChange"},"attribute"]},e}();e.RouteHref=w,e.RouterView=v,e.TemplatingRouteLoader=m,e.configure=function(e){e.singleton(o.RouteLoader,m).singleton(o.Router,o.AppRouter).globalResources(v,w),e.container.registerAlias(o.Router,o.AppRouter)}})),e.entry="dist/commonjs/aurelia-templating-router.js"})),e.pkg("aurelia-templating",{},(function(e){return e.file("dist/commonjs/aurelia-templating.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TemplatingEngine=e.ElementConfigResource=e.CompositionEngine=e.SwapStrategies=e.HtmlBehaviorResource=e.BindableProperty=e.BehaviorPropertyObserver=e.Controller=e.ViewEngine=e.ModuleAnalyzer=e.ResourceDescription=e.ResourceModule=e.ViewCompiler=e.ViewFactory=e.BoundViewFactory=e.ViewSlot=e.View=e.ViewResources=e.ShadowDOM=e.ShadowSlot=e.PassThroughSlot=e.SlotCustomAttribute=e.BindingLanguage=e.ViewLocator=e.StaticViewStrategy=e.InlineViewStrategy=e.TemplateRegistryViewStrategy=e.NoViewStrategy=e.ConventionalViewStrategy=e.RelativeViewStrategy=e.viewStrategy=e.TargetInstruction=e.BehaviorInstruction=e.ViewCompileInstruction=e.ResourceLoadContext=e.ElementEvents=e.ViewEngineHooksResource=e.CompositionTransaction=e.CompositionTransactionOwnershipToken=e.CompositionTransactionNotifier=e.Animator=e.animationEvent=void 0;var o,s,a,u,c,l,h,p,d,f,v,g,y,m,b,w,_,C,E,x,S,k,T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e._hyphenate=H,e._isAllWhitespace=W,e.viewEngineHooks=function(e){var t=function(e){A.metadata.define(A.metadata.resource,new z,e)};return e?t(e):t},e.validateBehaviorName=ge,e.children=function(e){return Xe(e,!0)},e.child=function(e){return Xe(e,!1)},e.resource=function(e){return function(t){"string"==typeof e||Object.getPrototypeOf(e)===Object.prototype?t.$resource=e:A.metadata.define(A.metadata.resource,e,t)}},e.behavior=function(e){return function(t){if(e instanceof $e)A.metadata.define(A.metadata.resource,e,t);else{var n=A.metadata.getOrCreateOwn(A.metadata.resource,$e,t);Object.assign(n,e)}}},e.customElement=function(e){return function(t){A.metadata.getOrCreateOwn(A.metadata.resource,$e,t).elementName=ge(e,"custom element")}},e.customAttribute=function(e,t,n){return function(r){var i=A.metadata.getOrCreateOwn(A.metadata.resource,$e,r);i.attributeName=ge(e,"custom attribute"),i.attributeDefaultBindingMode=t,i.aliases=n}},e.templateController=function(e){var t=function(e){A.metadata.getOrCreateOwn(A.metadata.resource,$e,e).liftsContent=!0};return e?t(e):t},e.bindable=function(e,t,n){var r=function(t,n,r){var i=n?t.constructor:t,o=A.metadata.getOrCreateOwn(A.metadata.resource,$e,i);return n&&((e=e||{}).name=n),new Qe(e).registerWith(i,o,r)};if(!e)return r;if(t){var i=e;return e=null,r(i,t,n)}return r},e.dynamicOptions=function(e){var t=function(e){A.metadata.getOrCreateOwn(A.metadata.resource,$e,e).hasDynamicOptions=!0};return e?t(e):t},e.useShadowDOM=function(e){var t="function"!=typeof e&&e?e:ut,n=function(e){var n=A.metadata.getOrCreateOwn(A.metadata.resource,$e,e);n.targetShadowDOM=!0,n.shadowDOMOptions=t};return"function"==typeof e?n(e):n},e.processAttributes=function(e){return function(t){A.metadata.getOrCreateOwn(A.metadata.resource,$e,t).processAttributes=function(t,n,r,i,o){try{e(t,n,r,i,o)}catch(e){I.getLogger("templating").error(e)}}}},e.processContent=function(e){return function(t){A.metadata.getOrCreateOwn(A.metadata.resource,$e,t).processContent=e?function(t,n,r,i){try{return e(t,n,r,i)}catch(e){return I.getLogger("templating").error(e),!1}}:ct}},e.containerless=function(e){var t=function(e){A.metadata.getOrCreateOwn(A.metadata.resource,$e,e).containerless=!0};return e?t(e):t},e.useViewStrategy=lt,e.useView=function(e){return lt(new te(e))},e.inlineView=function(e,t,n){return lt(new oe(e,t,n))},e.noView=function(e,t){var n=void 0,r=void 0;"function"==typeof e?n=e:(r=e,n=void 0);var i=function(e){A.metadata.define(ae.viewStrategyMetadataKey,new re(r,t),e)};return n?i(n):i},e.view=function(e){return function(t){t.$view=e}},e.elementConfig=function(e){var t=function(e){A.metadata.define(A.metadata.resource,new at,e)};return e?t(e):t},e.viewResources=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){A.metadata.define(Ue.viewModelRequireMetadataKey,t,e)}};var I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(t("aurelia-logging")),A=t("aurelia-metadata"),N=t("aurelia-pal"),R=t("aurelia-loader"),P=t("aurelia-path"),M=t("aurelia-binding"),L=t("aurelia-dependency-injection"),D=t("aurelia-task-queue");e.animationEvent={enterBegin:"animation:enter:begin",enterActive:"animation:enter:active",enterDone:"animation:enter:done",enterTimeout:"animation:enter:timeout",leaveBegin:"animation:leave:begin",leaveActive:"animation:leave:active",leaveDone:"animation:leave:done",leaveTimeout:"animation:leave:timeout",staggerNext:"animation:stagger:next",removeClassBegin:"animation:remove-class:begin",removeClassActive:"animation:remove-class:active",removeClassDone:"animation:remove-class:done",removeClassTimeout:"animation:remove-class:timeout",addClassBegin:"animation:add-class:begin",addClassActive:"animation:add-class:active",addClassDone:"animation:add-class:done",addClassTimeout:"animation:add-class:timeout",animateBegin:"animation:animate:begin",animateActive:"animation:animate:active",animateDone:"animation:animate:done",animateTimeout:"animation:animate:timeout",sequenceBegin:"animation:sequence:begin",sequenceDone:"animation:sequence:done"};var j=e.Animator=function(){function e(){}return e.prototype.enter=function(e){return Promise.resolve(!1)},e.prototype.leave=function(e){return Promise.resolve(!1)},e.prototype.removeClass=function(e,t){return e.classList.remove(t),Promise.resolve(!1)},e.prototype.addClass=function(e,t){return e.classList.add(t),Promise.resolve(!1)},e.prototype.animate=function(e,t){return Promise.resolve(!1)},e.prototype.runSequence=function(e){},e.prototype.registerEffect=function(e,t){},e.prototype.unregisterEffect=function(e){},e}(),F=e.CompositionTransactionNotifier=function(){function e(e){this.owner=e,this.owner._compositionCount++}return e.prototype.done=function(){this.owner._compositionCount--,this.owner._tryCompleteTransaction()},e}(),V=e.CompositionTransactionOwnershipToken=function(){function e(e){this.owner=e,this.owner._ownershipToken=this,this.thenable=this._createThenable()}return e.prototype.waitForCompositionComplete=function(){return this.owner._tryCompleteTransaction(),this.thenable},e.prototype.resolve=function(){this._resolveCallback()},e.prototype._createThenable=function(){var e=this;return new Promise((function(t,n){e._resolveCallback=t}))},e}(),B=e.CompositionTransaction=function(){function e(){this._ownershipToken=null,this._compositionCount=0}return e.prototype.tryCapture=function(){return null===this._ownershipToken?new V(this):null},e.prototype.enlist=function(){return new F(this)},e.prototype._tryCompleteTransaction=function(){if(this._compositionCount<=0&&(this._compositionCount=0,null!==this._ownershipToken)){var e=this._ownershipToken;this._ownershipToken=null,e.resolve()}},e}(),q=/([A-Z])/g;function U(e){return"-"+e.toLowerCase()}function H(e){return(e.charAt(0).toLowerCase()+e.slice(1)).replace(q,U)}function W(e){return!(e.auInterpolationTarget||/[^\t\n\r ]/.test(e.textContent))}var z=e.ViewEngineHooksResource=function(){function e(){}return e.prototype.initialize=function(e,t){this.instance=e.get(t)},e.prototype.register=function(e,t){e.registerViewEngineHooks(this.instance)},e.prototype.load=function(e,t){},e.convention=function(t){if(t.endsWith("ViewEngineHooks"))return new e},e}();var Q=e.ElementEvents=(s=o=function(){function e(e){this.element=e,this.subscriptions={}}return e.prototype._enqueueHandler=function(e){this.subscriptions[e.eventName]=this.subscriptions[e.eventName]||[],this.subscriptions[e.eventName].push(e)},e.prototype._dequeueHandler=function(e){var t=void 0,n=this.subscriptions[e.eventName];return n&&(t=n.indexOf(e))>-1&&n.splice(t,1),e},e.prototype.publish=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=N.DOM.createCustomEvent(e,{cancelable:r,bubbles:n,detail:t});this.element.dispatchEvent(i)},e.prototype.subscribe=function(t,n,r){if("function"==typeof n)return void 0===r&&(r=e.defaultListenerOptions),new K(this,t,n,r,!1)},e.prototype.subscribeOnce=function(t,n,r){if("function"==typeof n)return void 0===r&&(r=e.defaultListenerOptions),new K(this,t,n,r,!0)},e.prototype.dispose=function(e){if(e&&"string"==typeof e){var t=this.subscriptions[e];if(t)for(;t.length;){var n=t.pop();n&&n.dispose()}}else this.disposeAll()},e.prototype.disposeAll=function(){for(var e in this.subscriptions)this.dispose(e)},e}(),o.defaultListenerOptions=!0,s),K=function(){function e(e,t,n,r,i){this.owner=e,this.eventName=t,this.handler=n,this.capture="boolean"==typeof r?r:r.capture,this.bubbles=!this.capture,this.captureOrOptions=r,this.once=i,e.element.addEventListener(t,this,r),e._enqueueHandler(this)}return e.prototype.handleEvent=function(e){(0,this.handler)(e),this.once&&this.dispose()},e.prototype.dispose=function(){this.owner.element.removeEventListener(this.eventName,this,this.captureOrOptions),this.owner._dequeueHandler(this),this.owner=this.handler=null},e}(),G=e.ResourceLoadContext=function(){function e(){this.dependencies={}}return e.prototype.addDependency=function(e){this.dependencies[e]=!0},e.prototype.hasDependency=function(e){return e in this.dependencies},e}(),Y=e.ViewCompileInstruction=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.targetShadowDOM=e,this.compileSurrogate=t,this.associatedModuleId=null};Y.normal=new Y;var $=e.BehaviorInstruction=function(){function e(){}return e.enhance=function(){var t=new e;return t.enhance=!0,t},e.unitTest=function(t,n){var r=new e;return r.type=t,r.attributes=n||{},r},e.element=function(t,n){var r=new e;return r.type=n,r.attributes={},r.anchorIsContainer=!(t.hasAttribute("containerless")||n.containerless),r.initiatedByBehavior=!0,r},e.attribute=function(t,n){var r=new e;return r.attrName=t,r.type=n||null,r.attributes={},r},e.dynamic=function(t,n,r){var i=new e;return i.host=t,i.viewModel=n,i.viewFactory=r,i.inheritBindingContext=!0,i},e}(),X=$.prototype;X.initiatedByBehavior=!1,X.enhance=!1,X.partReplacements=null,X.viewFactory=null,X.originalAttrName=null,X.skipContentProcessing=!1,X.contentFactory=null,X.viewModel=null,X.anchorIsContainer=!1,X.host=null,X.attributes=null,X.type=null,X.attrName=null,X.inheritBindingContext=!1,$.normal=new $;var J=e.TargetInstruction=(u=a=function(){function e(){}return e.shadowSlot=function(t){var n=new e;return n.parentInjectorId=t,n.shadowSlot=!0,n},e.contentExpression=function(t){var n=new e;return n.contentExpression=t,n},e.letElement=function(t){var n=new e;return n.expressions=t,n.letElement=!0,n},e.lifting=function(t,n){var r=new e;return r.parentInjectorId=t,r.expressions=e.noExpressions,r.behaviorInstructions=[n],r.viewFactory=n.viewFactory,r.providers=[n.type.target],r.lifting=!0,r},e.normal=function(t,n,r,i,o,s){var a=new e;return a.injectorId=t,a.parentInjectorId=n,a.providers=r,a.behaviorInstructions=i,a.expressions=o,a.anchorIsContainer=!s||s.anchorIsContainer,a.elementInstruction=s,a},e.surrogate=function(t,n,r,i){var o=new e;return o.expressions=r,o.behaviorInstructions=n,o.providers=t,o.values=i,o},e}(),a.noExpressions=Object.freeze([]),u),Z=J.prototype;Z.injectorId=null,Z.parentInjectorId=null,Z.shadowSlot=!1,Z.slotName=null,Z.slotFallbackFactory=null,Z.contentExpression=null,Z.letElement=!1,Z.expressions=null,Z.expressions=null,Z.providers=null,Z.viewFactory=null,Z.anchorIsContainer=!1,Z.elementInstruction=null,Z.lifting=!1,Z.values=null;var ee=e.viewStrategy=A.protocol.create("aurelia:view-strategy",{validate:function(e){return"function"==typeof e.loadViewFactory||"View strategies must implement: loadViewFactory(viewEngine: ViewEngine, compileInstruction: ViewCompileInstruction, loadContext?: ResourceLoadContext): Promise<ViewFactory>"},compose:function(e){"function"!=typeof e.makeRelativeTo&&(e.makeRelativeTo=N.PLATFORM.noop)}}),te=e.RelativeViewStrategy=ee()(c=function(){function e(e){this.path=e,this.absolutePath=null}return e.prototype.loadViewFactory=function(e,t,n,r){return null===this.absolutePath&&this.moduleId&&(this.absolutePath=(0,P.relativeToFile)(this.path,this.moduleId)),t.associatedModuleId=this.moduleId,e.loadViewFactory(this.absolutePath||this.path,t,n,r)},e.prototype.makeRelativeTo=function(e){null===this.absolutePath&&(this.absolutePath=(0,P.relativeToFile)(this.path,e))},e}())||c,ne=e.ConventionalViewStrategy=ee()(l=function(){function e(e,t){this.moduleId=t.moduleId,this.viewUrl=e.convertOriginToViewUrl(t)}return e.prototype.loadViewFactory=function(e,t,n,r){return t.associatedModuleId=this.moduleId,e.loadViewFactory(this.viewUrl,t,n,r)},e}())||l,re=e.NoViewStrategy=ee()(h=function(){function e(e,t){this.dependencies=e||null,this.dependencyBaseUrl=t||""}return e.prototype.loadViewFactory=function(e,t,n,r){var i=this.entry,o=this.dependencies;if(i&&i.factoryIsReady)return Promise.resolve(null);if(this.entry=i=new R.TemplateRegistryEntry(this.moduleId||this.dependencyBaseUrl),i.dependencies=[],i.templateIsLoaded=!0,null!==o)for(var s=0,a=o.length;s<a;++s){var u=o[s];"string"==typeof u||"function"==typeof u?i.addDependency(u):i.addDependency(u.from,u.as)}return t.associatedModuleId=this.moduleId,e.loadViewFactory(i,t,n,r)},e}())||h,ie=e.TemplateRegistryViewStrategy=ee()(p=function(){function e(e,t){this.moduleId=e,this.entry=t}return e.prototype.loadViewFactory=function(e,t,n,r){var i=this.entry;return i.factoryIsReady?Promise.resolve(i.factory):(t.associatedModuleId=this.moduleId,e.loadViewFactory(i,t,n,r))},e}())||p,oe=e.InlineViewStrategy=ee()(d=function(){function e(e,t,n){this.markup=e,this.dependencies=t||null,this.dependencyBaseUrl=n||""}return e.prototype.loadViewFactory=function(e,t,n,r){var i=this.entry,o=this.dependencies;if(i&&i.factoryIsReady)return Promise.resolve(i.factory);if(this.entry=i=new R.TemplateRegistryEntry(this.moduleId||this.dependencyBaseUrl),i.template=N.DOM.createTemplateFromMarkup(this.markup),null!==o)for(var s=0,a=o.length;s<a;++s){var u=o[s];"string"==typeof u||"function"==typeof u?i.addDependency(u):i.addDependency(u.from,u.as)}return t.associatedModuleId=this.moduleId,e.loadViewFactory(i,t,n,r)},e}())||d,se=e.StaticViewStrategy=ee()(f=function(){function e(e){("string"==typeof e||e instanceof N.DOM.Element&&"TEMPLATE"===e.tagName)&&(e={template:e}),this.template=e.template,this.dependencies=e.dependencies||[],this.factoryIsReady=!1,this.onReady=null,this.moduleId="undefined"}return e.prototype.loadViewFactory=function(e,t,n,r){var i=this;if(this.factoryIsReady)return Promise.resolve(this.factory);var o=this.dependencies;return o=(o="function"==typeof o?o():o)||[],o=Array.isArray(o)?o:[o],Promise.all(o).then((function(n){var o=e.container,s=e.appResources,a=e.viewCompiler,u=new ye(s),c=void 0,l=[];r&&u.autoRegister(o,r);var h=n,p=Array.isArray(h),d=0;for(h=p?h:h[Symbol.iterator]();;){var f;if(p){if(d>=h.length)break;f=h[d++]}else{if((d=h.next()).done)break;f=d.value}var v=f;if("function"==typeof v)null!==(c=u.autoRegister(o,v)).elementName&&l.push(c);else{if(!v||"object"!==(void 0===v?"undefined":O(v)))throw new Error('dependency neither function nor object. Received: "'+(void 0===v?"undefined":O(v))+'"');for(var g in v){var y=v[g];"function"==typeof y&&null!==(c=u.autoRegister(o,y)).elementName&&l.push(c)}}}return Promise.all(l.map((function(e){return e.load(o,e.target)}))).then((function(){var e=null!==i.template?a.compile(i.template,u,t):null;return i.factoryIsReady=!0,i.factory=e,e}))}))},e}())||f,ae=e.ViewLocator=(g=v=function(){function e(){}return e.prototype.getViewStrategy=function(t){if(!t)return null;if("object"===(void 0===t?"undefined":O(t))&&"getViewStrategy"in t){var n=A.Origin.get(t.constructor);return"string"==typeof(t=t.getViewStrategy())&&(t=new te(t)),ee.assert(t),n.moduleId&&t.makeRelativeTo(n.moduleId),t}if("string"==typeof t&&(t=new te(t)),ee.validate(t))return t;if("function"!=typeof t&&(t=t.constructor),"$view"in t){var r=t.$view,i=void 0;return i=null===(r="function"==typeof r?r.call(t):r)?new re:r instanceof se?r:new se(r),A.metadata.define(e.viewStrategyMetadataKey,i,t),i}var o=A.Origin.get(t),s=A.metadata.get(e.viewStrategyMetadataKey,t);if(s)o.moduleId&&(s.moduleId=o.moduleId);else{if(!o.moduleId)throw new Error("Cannot determine default view strategy for object.",t);s=this.createFallbackViewStrategy(o)}return s},e.prototype.createFallbackViewStrategy=function(e){return new ne(this,e)},e.prototype.convertOriginToViewUrl=function(e){var t=e.moduleId;return(t.endsWith(".js")||t.endsWith(".ts")?t.substring(0,t.length-3):t)+".html"},e}(),v.viewStrategyMetadataKey="aurelia:view-strategy",g);function ue(e){throw new Error("BindingLanguage must implement "+e+"().")}var ce=e.BindingLanguage=function(){function e(){}return e.prototype.inspectAttribute=function(e,t,n,r){ue("inspectAttribute")},e.prototype.createAttributeInstruction=function(e,t,n,r){ue("createAttributeInstruction")},e.prototype.createLetExpressions=function(e,t){ue("createLetExpressions")},e.prototype.inspectTextContent=function(e,t){ue("inspectTextContent")},e}(),le=Object.freeze([]),he=e.SlotCustomAttribute=function(){function e(e){this.element=e,this.element.auSlotAttribute=this}return e.inject=function(){return[N.DOM.Element]},e.prototype.valueChanged=function(e,t){},e}(),pe=e.PassThroughSlot=function(){function e(e,t,n,r){this.anchor=e,this.anchor.viewSlot=this,this.name=t,this.destinationName=n,this.fallbackFactory=r,this.destinationSlot=null,this.projections=0,this.contentView=null,new he(this.anchor).value=this.destinationName}return e.prototype.renderFallbackContent=function(e,t,n,r){if(null===this.contentView){this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext);var i=Object.create(null);i[this.destinationSlot.name]=this.destinationSlot,fe.distributeView(this.contentView,i,n,r,this.destinationSlot.name)}},e.prototype.passThroughTo=function(e){this.destinationSlot=e},e.prototype.addNode=function(t,n,r,i){null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),n.viewSlot instanceof e?n.viewSlot.passThroughTo(this):(this.projections++,this.destinationSlot.addNode(t,n,r,i))},e.prototype.removeView=function(e,t){this.projections--,this.destinationSlot.removeView(e,t),this.needsFallbackRendering&&this.renderFallbackContent(null,le,t)},e.prototype.removeAll=function(e){this.projections=0,this.destinationSlot.removeAll(e),this.needsFallbackRendering&&this.renderFallbackContent(null,le,e)},e.prototype.projectFrom=function(e,t){this.destinationSlot.projectFrom(e,t)},e.prototype.created=function(e){this.ownerView=e},e.prototype.bind=function(e){this.contentView&&this.contentView.bind(e.bindingContext,e.overrideContext)},e.prototype.attached=function(){this.contentView&&this.contentView.attached()},e.prototype.detached=function(){this.contentView&&this.contentView.detached()},e.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},T(e,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),e}(),de=e.ShadowSlot=function(){function e(e,t,n){this.anchor=e,this.anchor.isContentProjectionSource=!0,this.anchor.viewSlot=this,this.name=t,this.fallbackFactory=n,this.contentView=null,this.projections=0,this.children=[],this.projectFromAnchors=null,this.destinationSlots=null}return e.prototype.addNode=function(e,t,n,r,i){if(null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),t.viewSlot instanceof pe)t.viewSlot.passThroughTo(this);else if(null!==this.destinationSlots)fe.distributeNodes(e,[t],this.destinationSlots,this,r);else{t.auOwnerView=e,t.auProjectionSource=n,t.auAssignedSlot=this;var o=this._findAnchor(e,t,n,r);o.parentNode.insertBefore(t,o),this.children.push(t),this.projections++}},e.prototype.removeView=function(e,t){if(null!==this.destinationSlots)fe.undistributeView(e,this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)fe.undistributeView(e,this.contentView.slots,t);else{var n=this.children.find((function(e){return e.auSlotProjectFrom===t}));if(n){for(var r=n.auProjectionChildren,i=0,o=r.length;i<o;++i){var s=r[i];s.auOwnerView===e&&(r.splice(i,1),e.fragment.appendChild(s),i--,o--,this.projections--)}this.needsFallbackRendering&&this.renderFallbackContent(e,le,t)}}},e.prototype.removeAll=function(e){if(null!==this.destinationSlots)fe.undistributeAll(this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)fe.undistributeAll(this.contentView.slots,e);else{var t=this.children.find((function(t){return t.auSlotProjectFrom===e}));if(t){for(var n=t.auProjectionChildren,r=0,i=n.length;r<i;++r){var o=n[r];o.auOwnerView.fragment.appendChild(o),this.projections--}t.auProjectionChildren=[],this.needsFallbackRendering&&this.renderFallbackContent(null,le,e)}}},e.prototype._findAnchor=function(e,t,n,r){if(n){var i=this.children.find((function(e){return e.auSlotProjectFrom===n}));if(i){if(void 0!==r)for(var o=i.auProjectionChildren,s=-1,a=void 0,u=0,c=o.length;u<c;++u){var l=o[u];if(l.auOwnerView!==a&&(s++,a=l.auOwnerView,s>=r&&a!==e))return o.splice(u,0,t),l}return i.auProjectionChildren.push(t),i}}return this.anchor},e.prototype.projectTo=function(e){this.destinationSlots=e},e.prototype.projectFrom=function(e,t){var n=N.DOM.createComment("anchor"),r=this.anchor.parentNode;n.auSlotProjectFrom=t,n.auOwnerView=e,n.auProjectionChildren=[],r.insertBefore(n,this.anchor),this.children.push(n),null===this.projectFromAnchors&&(this.projectFromAnchors=[]),this.projectFromAnchors.push(n)},e.prototype.renderFallbackContent=function(e,t,n,r){if(null===this.contentView&&(this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext),this.contentView.insertNodesBefore(this.anchor)),this.contentView.hasSlots){var i=this.contentView.slots,o=this.projectFromAnchors;if(null!==o)for(var s in i)for(var a=i[s],u=0,c=o.length;u<c;++u){var l=o[u];a.projectFrom(l.auOwnerView,l.auSlotProjectFrom)}this.fallbackSlots=i,fe.distributeNodes(e,t,i,n,r)}},e.prototype.created=function(e){this.ownerView=e},e.prototype.bind=function(e){this.contentView&&this.contentView.bind(e.bindingContext,e.overrideContext)},e.prototype.attached=function(){this.contentView&&this.contentView.attached()},e.prototype.detached=function(){this.contentView&&this.contentView.detached()},e.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},T(e,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),e}(),fe=e.ShadowDOM=(m=y=function(){function e(){}return e.getSlotName=function(t){return void 0===t.auSlotAttribute?e.defaultSlotKey:t.auSlotAttribute.value},e.distributeView=function(t,n,r,i,o){var s=void 0;if(null===t)s=le;else{var a=t.fragment.childNodes,u=a.length;s=new Array(u);for(var c=0;c<u;++c)s[c]=a[c]}e.distributeNodes(t,s,n,r,i,o)},e.undistributeView=function(e,t,n){for(var r in t)t[r].removeView(e,n)},e.undistributeAll=function(e,t){for(var n in e)e[n].removeAll(t)},e.distributeNodes=function(t,n,r,i,o,s){for(var a=0,u=n.length;a<u;++a){var c=n[a],l=c.nodeType;if(c.isContentProjectionSource){for(var h in c.viewSlot.projectTo(r),r)r[h].projectFrom(t,c.viewSlot);n.splice(a,1),u--,a--}else if(1===l||3===l||c.viewSlot instanceof pe)if(3===l&&W(c))n.splice(a,1),u--,a--;else{var p=r[s||e.getSlotName(c)];p&&(p.addNode(t,c,i,o),n.splice(a,1),u--,a--)}else n.splice(a,1),u--,a--}for(var d in r){var f=r[d];f.needsFallbackRendering&&f.renderFallbackContent(t,n,i,o)}},e}(),y.defaultSlotKey="__au-default-slot-key__",m);function ve(e,t,n,r){if(t){var i=e[t];if(i){if(i!==n)throw new Error("Attempted to register "+r+" when one with the same name already exists. Name: "+t+".")}else e[t]=n}}function ge(e,t){if(/[A-Z]/.test(e)){var n=H(e);return I.getLogger("templating").warn("'"+e+"' is not a valid "+t+" name and has been converted to '"+n+"'. Upper-case letters are not allowed because the DOM is not case-sensitive."),n}return e}var ye=e.ViewResources=function(){function e(e,t){this.bindingLanguage=null,this.parent=e||null,this.hasParent=null!==this.parent,this.viewUrl=t||"",this.lookupFunctions={valueConverters:this.getValueConverter.bind(this),bindingBehaviors:this.getBindingBehavior.bind(this)},this.attributes=Object.create(null),this.elements=Object.create(null),this.valueConverters=Object.create(null),this.bindingBehaviors=Object.create(null),this.attributeMap=Object.create(null),this.values=Object.create(null),this.beforeCompile=this.afterCompile=this.beforeCreate=this.afterCreate=this.beforeBind=this.beforeUnbind=!1}return e.convention=function(e,t){var n=void 0;if(t&&"__au_resource__"in t)return t;if("$resource"in e){var r=e.$resource;if("string"==typeof r)(n=t||new $e).__au_resource__=!0,n.elementName||(n.elementName=ge(r,"custom element"));else{"function"==typeof r&&(r=r.call(e)),"string"==typeof r&&(r={name:r});var i=(r=Object.assign({},r)).type||"element",o=r.name;switch(i){case"element":case"attribute":(n=t||new $e).__au_resource__=!0,"element"===i?n.elementName||(n.elementName=o?ge(o,"custom element"):H(e.name)):n.attributeName||(n.attributeName=o?ge(o,"custom attribute"):H(e.name)),"templateController"in r&&(r.liftsContent=r.templateController,delete r.templateController),"defaultBindingMode"in r&&void 0!==n.attributeDefaultBindingMode&&(r.attributeDefaultBindingMode=r.defaultBindingMode,delete r.defaultBindingMode),delete r.name,Object.assign(n,r);break;case"valueConverter":n=new M.ValueConverterResource((0,M.camelCase)(o||e.name));break;case"bindingBehavior":n=new M.BindingBehaviorResource((0,M.camelCase)(o||e.name));break;case"viewEngineHooks":n=new z}}if(n instanceof $e){var s="string"==typeof r?void 0:r.bindables,a=n.properties;if(Array.isArray(s))for(var u=0,c=s.length;c>u;++u){var l=s[u];if(!l||"string"!=typeof l&&!l.name)throw new Error('Invalid bindable property at "'+u+'" for class "'+e.name+'". Expected either a string or an object with "name" property.');for(var h=new Qe(l),p=!1,d=0,f=a.length;f>d;++d)if(a[d].name===h.name){p=!0;break}p||h.registerWith(e,n)}}}return n},e.prototype._tryAddHook=function(e,t){if("function"==typeof e[t]){for(var n=e[t].bind(e),r=1,i=void 0;void 0!==this[i=t+r.toString()];)r++;this[t]=!0,this[i]=n}},e.prototype._invokeHook=function(e,t,n,r,i){if(this.hasParent&&this.parent._invokeHook(e,t,n,r,i),this[e]){this[e+"1"](t,n,r,i);var o=e+"2";if(this[o]&&(this[o](t,n,r,i),this[o=e+"3"])){this[o](t,n,r,i);for(var s=4;void 0!==this[o=e+s.toString()];)this[o](t,n,r,i),s++}}},e.prototype.registerViewEngineHooks=function(e){this._tryAddHook(e,"beforeCompile"),this._tryAddHook(e,"afterCompile"),this._tryAddHook(e,"beforeCreate"),this._tryAddHook(e,"afterCreate"),this._tryAddHook(e,"beforeBind"),this._tryAddHook(e,"beforeUnbind")},e.prototype.getBindingLanguage=function(e){return this.bindingLanguage||(this.bindingLanguage=e)},e.prototype.patchInParent=function(e){var t=this.parent;this.parent=e||null,this.hasParent=null!==this.parent,null===e.parent&&(e.parent=t,e.hasParent=null!==t)},e.prototype.relativeToView=function(e){return(0,P.relativeToFile)(e,this.viewUrl)},e.prototype.registerElement=function(e,t){ve(this.elements,e,t,"an Element")},e.prototype.getElement=function(e){return this.elements[e]||(this.hasParent?this.parent.getElement(e):null)},e.prototype.mapAttribute=function(e){return this.attributeMap[e]||(this.hasParent?this.parent.mapAttribute(e):null)},e.prototype.registerAttribute=function(e,t,n){this.attributeMap[e]=n,ve(this.attributes,e,t,"an Attribute")},e.prototype.getAttribute=function(e){return this.attributes[e]||(this.hasParent?this.parent.getAttribute(e):null)},e.prototype.registerValueConverter=function(e,t){ve(this.valueConverters,e,t,"a ValueConverter")},e.prototype.getValueConverter=function(e){return this.valueConverters[e]||(this.hasParent?this.parent.getValueConverter(e):null)},e.prototype.registerBindingBehavior=function(e,t){ve(this.bindingBehaviors,e,t,"a BindingBehavior")},e.prototype.getBindingBehavior=function(e){return this.bindingBehaviors[e]||(this.hasParent?this.parent.getBindingBehavior(e):null)},e.prototype.registerValue=function(e,t){ve(this.values,e,t,"a value")},e.prototype.getValue=function(e){return this.values[e]||(this.hasParent?this.parent.getValue(e):null)},e.prototype.autoRegister=function(t,n){var r=A.metadata.getOwn(A.metadata.resource,n);return r?r instanceof $e&&(e.convention(n,r),null===r.attributeName&&null===r.elementName&&$e.convention(n.name,r),null===r.attributeName&&null===r.elementName&&(r.elementName=H(n.name))):((r=e.convention(n)||$e.convention(n.name)||M.ValueConverterResource.convention(n.name)||M.BindingBehaviorResource.convention(n.name)||z.convention(n.name))||((r=new $e).elementName=H(n.name)),A.metadata.define(A.metadata.resource,r,n)),r.initialize(t,n),r.register(this),r},e}(),me=e.View=function(){function e(e,t,n,r,i,o,s){for(var a in this.container=e,this.viewFactory=t,this.resources=t.resources,this.fragment=n,this.firstChild=n.firstChild,this.lastChild=n.lastChild,this.controllers=r,this.bindings=i,this.children=o,this.slots=s,this.hasSlots=!1,this.fromCache=!1,this.isBound=!1,this.isAttached=!1,this.bindingContext=null,this.overrideContext=null,this.controller=null,this.viewModelScope=null,this.animatableElement=void 0,this._isUserControlled=!1,this.contentView=null,s){this.hasSlots=!0;break}}return e.prototype.returnToCache=function(){this.viewFactory.returnViewToCache(this)},e.prototype.created=function(){var e,t=void 0,n=this.controllers;for(t=0,e=n.length;t<e;++t)n[t].created(this)},e.prototype.bind=function(e,t,n){var r=void 0,i=void 0,o=void 0,s=void 0,a=void 0;if(!n||!this._isUserControlled){if(this.isBound){if(this.bindingContext===e)return;this.unbind()}for(this.isBound=!0,this.bindingContext=e,this.overrideContext=t||(0,M.createOverrideContext)(e),this.resources._invokeHook("beforeBind",this),s=0,a=(i=this.bindings).length;s<a;++s)i[s].bind(this);for(null!==this.viewModelScope&&(e.bind(this.viewModelScope.bindingContext,this.viewModelScope.overrideContext),this.viewModelScope=null),s=0,a=(r=this.controllers).length;s<a;++s)r[s].bind(this);for(s=0,a=(o=this.children).length;s<a;++s)o[s].bind(e,t,!0);this.hasSlots&&fe.distributeView(this.contentView,this.slots)}},e.prototype.addBinding=function(e){this.bindings.push(e),this.isBound&&e.bind(this)},e.prototype.unbind=function(){var e=void 0,t=void 0,n=void 0,r=void 0,i=void 0;if(this.isBound){for(this.isBound=!1,this.resources._invokeHook("beforeUnbind",this),null!==this.controller&&this.controller.unbind(),r=0,i=(t=this.bindings).length;r<i;++r)t[r].unbind();for(r=0,i=(e=this.controllers).length;r<i;++r)e[r].unbind();for(r=0,i=(n=this.children).length;r<i;++r)n[r].unbind();this.bindingContext=null,this.overrideContext=null}},e.prototype.insertNodesBefore=function(e){e.parentNode.insertBefore(this.fragment,e)},e.prototype.appendNodesTo=function(e){e.appendChild(this.fragment)},e.prototype.removeNodes=function(){for(var e=this.fragment,t=this.firstChild,n=this.lastChild,r=void 0;t&&(r=t.nextSibling,e.appendChild(t),t!==n);)t=r},e.prototype.attached=function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(!this.isAttached){for(this.isAttached=!0,null!==this.controller&&this.controller.attached(),n=0,r=(e=this.controllers).length;n<r;++n)e[n].attached();for(n=0,r=(t=this.children).length;n<r;++n)t[n].attached()}},e.prototype.detached=function(){var e=void 0,t=void 0,n=void 0,r=void 0;if(this.isAttached){for(this.isAttached=!1,null!==this.controller&&this.controller.detached(),n=0,r=(e=this.controllers).length;n<r;++n)e[n].detached();for(n=0,r=(t=this.children).length;n<r;++n)t[n].detached()}},e}();function be(e){if(void 0!==e.animatableElement)return e.animatableElement;for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;return t&&1===t.nodeType?e.animatableElement=t.classList.contains("au-animate")?t:null:e.animatableElement=null}var we=e.ViewSlot=function(){function e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j.instance;this.anchor=e,this.anchorIsContainer=t,this.bindingContext=null,this.overrideContext=null,this.animator=n,this.children=[],this.isBound=!1,this.isAttached=!1,this.contentSelectors=null,e.viewSlot=this,e.isContentProjectionSource=!1}return e.prototype.animateView=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"enter",n=be(e);if(null!==n)switch(t){case"enter":return this.animator.enter(n);case"leave":return this.animator.leave(n);default:throw new Error("Invalid animation direction: "+t)}},e.prototype.transformChildNodesIntoView=function(){var e=this.anchor;this.children.push({fragment:e,firstChild:e.firstChild,lastChild:e.lastChild,returnToCache:function(){},removeNodes:function(){for(var t=void 0;t=e.lastChild;)e.removeChild(t)},created:function(){},bind:function(){},unbind:function(){},attached:function(){},detached:function(){}})},e.prototype.bind=function(e,t){var n,r=void 0,i=void 0;if(this.isBound){if(this.bindingContext===e)return;this.unbind()}for(this.isBound=!0,this.bindingContext=e=e||this.bindingContext,this.overrideContext=t=t||this.overrideContext,r=0,n=(i=this.children).length;r<n;++r)i[r].bind(e,t,!0)},e.prototype.unbind=function(){if(this.isBound){var e,t=void 0,n=this.children;for(this.isBound=!1,this.bindingContext=null,this.overrideContext=null,t=0,e=n.length;t<e;++t)n[t].unbind()}},e.prototype.add=function(e){if(this.anchorIsContainer?e.appendNodesTo(this.anchor):e.insertNodesBefore(this.anchor),this.children.push(e),this.isAttached)return e.attached(),this.animateView(e,"enter")},e.prototype.insert=function(e,t){var n=this.children,r=n.length;return 0===e&&0===r||e>=r?this.add(t):(t.insertNodesBefore(n[e].firstChild),n.splice(e,0,t),this.isAttached?(t.attached(),this.animateView(t,"enter")):void 0)},e.prototype.move=function(e,t){if(e!==t){var n=this.children,r=n[e];r.removeNodes(),r.insertNodesBefore(n[t].firstChild),n.splice(e,1),n.splice(t,0,r)}},e.prototype.remove=function(e,t,n){return this.removeAt(this.children.indexOf(e),t,n)},e.prototype.removeMany=function(e,t,n){var r=this,i=this.children,o=e.length,s=void 0,a=[];e.forEach((function(e){if(n)e.removeNodes();else{var t=r.animateView(e,"leave");t?a.push(t.then((function(){return e.removeNodes()}))):e.removeNodes()}}));var u=function(){if(r.isAttached)for(s=0;s<o;++s)e[s].detached();if(t)for(s=0;s<o;++s)e[s].returnToCache();for(s=0;s<o;++s){var n=i.indexOf(e[s]);n>=0&&i.splice(n,1)}};return a.length>0?Promise.all(a).then((function(){return u()})):u()},e.prototype.removeAt=function(e,t,n){var r=this,i=this.children[e],o=function(){return e=r.children.indexOf(i),i.removeNodes(),r.children.splice(e,1),r.isAttached&&i.detached(),t&&i.returnToCache(),i};if(!n){var s=this.animateView(i,"leave");if(s)return s.then((function(){return o()}))}return o()},e.prototype.removeAll=function(e,t){var n=this,r=this.children,i=r.length,o=void 0,s=[];r.forEach((function(e){if(t)e.removeNodes();else{var r=n.animateView(e,"leave");r?s.push(r.then((function(){return e.removeNodes()}))):e.removeNodes()}}));var a=function(){if(n.isAttached)for(o=0;o<i;++o)r[o].detached();if(e)for(o=0;o<i;++o){var t=r[o];t&&t.returnToCache()}n.children=[]};return s.length>0?Promise.all(s).then((function(){return a()})):a()},e.prototype.attached=function(){var e,t,n=void 0,r=void 0;if(!this.isAttached)for(this.isAttached=!0,n=0,e=(t=this.children).length;n<e;++n)(r=t[n]).attached(),this.animateView(r,"enter")},e.prototype.detached=function(){var e=void 0,t=void 0,n=void 0;if(this.isAttached)for(this.isAttached=!1,e=0,t=(n=this.children).length;e<t;++e)n[e].detached()},e.prototype.projectTo=function(e){var t=this;this.projectToSlots=e,this.add=this._projectionAdd,this.insert=this._projectionInsert,this.move=this._projectionMove,this.remove=this._projectionRemove,this.removeAt=this._projectionRemoveAt,this.removeMany=this._projectionRemoveMany,this.removeAll=this._projectionRemoveAll,this.children.forEach((function(n){return fe.distributeView(n,e,t)}))},e.prototype._projectionAdd=function(e){fe.distributeView(e,this.projectToSlots,this),this.children.push(e),this.isAttached&&e.attached()},e.prototype._projectionInsert=function(e,t){0===e&&!this.children.length||e>=this.children.length?this.add(t):(fe.distributeView(t,this.projectToSlots,this,e),this.children.splice(e,0,t),this.isAttached&&t.attached())},e.prototype._projectionMove=function(e,t){if(e!==t){var n=this.children,r=n[e];fe.undistributeView(r,this.projectToSlots,this),fe.distributeView(r,this.projectToSlots,this,t),n.splice(e,1),n.splice(t,0,r)}},e.prototype._projectionRemove=function(e,t){fe.undistributeView(e,this.projectToSlots,this),this.children.splice(this.children.indexOf(e),1),this.isAttached&&e.detached(),t&&e.returnToCache()},e.prototype._projectionRemoveAt=function(e,t){var n=this.children[e];fe.undistributeView(n,this.projectToSlots,this),this.children.splice(e,1),this.isAttached&&n.detached(),t&&n.returnToCache()},e.prototype._projectionRemoveMany=function(e,t){var n=this;e.forEach((function(e){return n.remove(e,t)}))},e.prototype._projectionRemoveAll=function(e){fe.undistributeAll(this.projectToSlots,this);for(var t=this.children,n=t.length,r=0;r<n;++r)e?t[r].returnToCache():this.isAttached&&t[r].detached();this.children=[]},e}(),_e=new((0,L.resolver)(b=function(){function e(){}return e.prototype.get=function(e,t){var n=t.__providerId__;return n in e?e[n]:e[n]=e.invoke(t)},e}())||b);function Ce(e){if(e===N.DOM.Element)return this.element;if(e===Ie){if(this.boundViewFactory)return this.boundViewFactory;var t=this.instruction.viewFactory,n=this.partReplacements;return n&&(t=n[t.part]||t),this.boundViewFactory=new Ie(this,t,n),this.boundViewFactory}return e===we?(void 0===this.viewSlot&&(this.viewSlot=new we(this.element,this.instruction.anchorIsContainer),this.element.isContentProjectionSource=this.instruction.lifting,this.children.push(this.viewSlot)),this.viewSlot):e===Q?this.elementEvents||(this.elementEvents=new Q(this.element)):e===B?this.compositionTransaction||(this.compositionTransaction=this.parent.get(e)):e===ye?this.viewResources:e===J?this.instruction:this.superGet(e)}function Ee(e){return this._element.hasAttribute(e)}function xe(e){return this._element.getAttribute(e)}function Se(e,t){this._element.setAttribute(e,t)}function ke(e,t,n,r,i,o,s,a,u){var c=n.behaviorInstructions,l=n.expressions,h=void 0,p=void 0,d=void 0,f=void 0,v=void 0;if(n.contentExpression)return i.push(n.contentExpression.createBinding(t.nextSibling)),t.nextSibling.auInterpolationTarget=!0,void t.parentNode.removeChild(t);if(n.shadowSlot){var g=N.DOM.createComment("slot"),y=void 0;return y=n.slotDestination?new pe(g,n.slotName,n.slotDestination,n.slotFallbackFactory):new de(g,n.slotName,n.slotFallbackFactory),N.DOM.replaceNode(g,t),s[n.slotName]=y,void r.push(y)}if(n.letElement){for(p=0,d=l.length;p<d;++p)i.push(l[p].createBinding());t.parentNode.removeChild(t)}else{if(c.length)for(n.anchorIsContainer||(t=function(e,t){var n=N.DOM.createComment("anchor");if(t){var r=e.firstChild;r&&"AU-CONTENT"===r.tagName&&(n.contentElement=r),n._element=e,n.hasAttribute=Ee,n.getAttribute=xe,n.setAttribute=Se}return N.DOM.replaceNode(n,e),n}(t,n.elementInstruction)),e[n.injectorId]=h=function(e,t,n,r,i,o){var s,a=e.createChild(),u=void 0;for(a.element=t,a.instruction=n,a.children=r,a.viewResources=o,a.partReplacements=i,u=(s=n.providers).length;u--;)a._resolvers.set(s[u],_e);return a.superGet=a.get,a.get=Ce,a}(e[n.parentInjectorId],t,n,o,a,u),p=0,d=c.length;p<d;++p)v=(f=c[p]).type.create(h,f,t,i),r.push(v);for(p=0,d=l.length;p<d;++p)i.push(l[p].createBinding(t))}}function Te(e,t){var n=e.split(";"),r=void 0,i=void 0,o=void 0,s=void 0,a=void 0;for(t=t||{},i=0;i<n.length;i++)r=(o=n[i]).indexOf(":"),s=o.substring(0,r).trim(),a=o.substring(r+1).trim(),t[s]=a;return t}function Oe(e){var t="";for(var n in e)t+=n+":"+e[n]+";";return t}var Ie=e.BoundViewFactory=function(){function e(e,t,n){this.parentContainer=e,this.viewFactory=t,this.factoryCreateInstruction={partReplacements:n}}return e.prototype.create=function(){var e=this.viewFactory.create(this.parentContainer.createChild(),this.factoryCreateInstruction);return e._isUserControlled=!0,e},e.prototype.setCacheSize=function(e,t){this.viewFactory.setCacheSize(e,t)},e.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},e.prototype.returnViewToCache=function(e){this.viewFactory.returnViewToCache(e)},T(e,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),e}(),Ae=e.ViewFactory=function(){function e(e,t,n){this.isCaching=!1,this.template=e,this.instructions=t,this.resources=n,this.cacheSize=-1,this.cache=null}return e.prototype.setCacheSize=function(e,t){e&&("*"===e?e=Number.MAX_VALUE:"string"==typeof e&&(e=parseInt(e,10))),-1!==this.cacheSize&&t||(this.cacheSize=e),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0},e.prototype.getCachedView=function(){return null!==this.cache&&this.cache.pop()||null},e.prototype.returnViewToCache=function(e){e.isAttached&&e.detached(),e.isBound&&e.unbind(),null!==this.cache&&this.cache.length<this.cacheSize&&(e.fromCache=!0,this.cache.push(e))},e.prototype.create=function(e,t,n){t=t||$.normal;var r=this.getCachedView();if(null!==r)return r;var i,o=t.enhance?this.template:this.template.cloneNode(!0),s=o.querySelectorAll(".au-target"),a=this.instructions,u=this.resources,c=[],l=[],h=[],p=Object.create(null),d={root:e},f=t.partReplacements,v=void 0,g=void 0,y=void 0,m=void 0;for(this.resources._invokeHook("beforeCreate",this,e,o,t),n&&null!==this.surrogateInstruction&&function(e,t,n,r,i,o){var s=n.behaviorInstructions,a=n.expressions,u=n.providers,c=n.values,l=void 0,h=void 0,p=void 0,d=void 0,f=void 0;for(l=u.length;l--;)e._resolvers.set(u[l],_e);for(var v in c)if(f=t.getAttribute(v)){if("class"===v)t.setAttribute("class",f+" "+c[v]);else if("style"===v){var g=Te(c[v]);Te(f,g),t.setAttribute("style",Oe(g))}}else t.setAttribute(v,c[v]);if(s.length)for(l=0,h=s.length;l<h;++l)(d=(p=s[l]).type.create(e,p,t,i)).contentView&&o.push(d.contentView),r.push(d);for(l=0,h=a.length;l<h;++l)i.push(a[l].createBinding(t))}(e,n,this.surrogateInstruction,c,l,h),t.enhance&&o.hasAttribute("au-target-id")&&(m=a[(y=o).getAttribute("au-target-id")],ke(d,y,m,c,l,h,p,f,u)),v=0,i=s.length;v<i;++v)m=a[(y=s[v]).getAttribute("au-target-id")],ke(d,y,m,c,l,h,p,f,u);return g=new me(e,this,o,c,l,h,p),t.initiatedByBehavior||g.created(),this.resources._invokeHook("afterCreate",g),g},e}(),Ne=0;var Re=0;function Pe(e){var t=e.getAttribute("class"),n=(++Re).toString();return e.setAttribute("class",t?t+" au-target":"au-target"),e.setAttribute("au-target-id",n),n}var Me=ce.prototype.createLetExpressions,Le=e.ViewCompiler=(0,L.inject)(ce,ye)(w=function(){function e(e,t){this.bindingLanguage=e,this.resources=t}return e.prototype.compile=function(e,t,n){t=t||this.resources,n=n||Y.normal;var r=void 0,i=void 0,o=void 0;(e="string"==typeof e?N.DOM.createTemplateFromMarkup(e):e).content?(i=e.getAttribute("part"),o=e.getAttribute("view-cache"),r=N.DOM.adoptNode(e.content)):r=e,n.targetShadowDOM=n.targetShadowDOM&&N.FEATURE.shadowDOM,t._invokeHook("beforeCompile",r,t,n);var s={};this._compileNode(r,t,s,e,"root",!n.targetShadowDOM);var a=r.firstChild;if(a&&1===a.nodeType){var u=a.getAttribute("au-target-id");if(u){var c=s[u];(c.shadowSlot||c.lifting||c.elementInstruction&&!c.elementInstruction.anchorIsContainer)&&r.insertBefore(N.DOM.createComment("view"),a)}}var l=new Ae(r,s,t);return l.surrogateInstruction=n.compileSurrogate?this._compileSurrogate(e,t):null,l.part=i,o&&l.setCacheSize(o),t._invokeHook("afterCompile",l),l},e.prototype._compileNode=function(e,t,n,r,i,o){switch(e.nodeType){case 1:return this._compileElement(e,t,n,r,i,o);case 3:var s=t.getBindingLanguage(this.bindingLanguage).inspectTextContent(t,e.wholeText);if(s){var a=N.DOM.createElement("au-marker"),u=Pe(a);for((e.parentNode||r).insertBefore(a,e),e.textContent=" ",n[u]=J.contentExpression(s);e.nextSibling&&3===e.nextSibling.nodeType;)(e.parentNode||r).removeChild(e.nextSibling)}else for(;e.nextSibling&&3===e.nextSibling.nodeType;)e=e.nextSibling;return e.nextSibling;case 11:for(var c=e.firstChild;c;)c=this._compileNode(c,t,n,e,i,o)}return e.nextSibling},e.prototype._compileSurrogate=function(e,t){var n=e.tagName.toLowerCase(),r=e.attributes,i=t.getBindingLanguage(this.bindingLanguage),o=void 0,s=void 0,a=void 0,u=void 0,c=void 0,l=void 0,h=void 0,p=void 0,d=void 0,f=void 0,v=[],g=void 0,y=[],m={},b=!1,w=[];for(u=0,c=r.length;u<c;++u){if(h=(l=r[u]).name,p=l.value,d=i.inspectAttribute(t,n,h,p),(f=t.getAttribute(d.attrName))&&(o=t.mapAttribute(d.attrName))&&(s=f.attributes[o])&&(d.defaultBindingMode=s.defaultBindingMode,d.command||d.expression||(d.command=s.hasOptions?"options":null),d.command&&"options"!==d.command&&f.primaryProperty)){var _=f.primaryProperty;h=d.attrName=_.attribute,d.defaultBindingMode=_.defaultBindingMode}if(a=i.createAttributeInstruction(t,e,d,void 0,f))if(a.alteredAttr&&(f=t.getAttribute(a.attrName)),a.discrete)v.push(a);else if(f){if(a.type=f,this._configureProperties(a,t),f.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");y.push(a)}else v.push(a.attributes[a.attrName]);else if(f){if((a=$.attribute(h,f)).attributes[t.mapAttribute(h)]=p,f.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");y.push(a)}else"id"!==h&&"part"!==h&&"replace-part"!==h&&(b=!0,m[h]=p)}if(v.length||y.length||b){for(u=0,c=y.length;u<c;++u)(a=y[u]).type.compile(this,t,e,a),w.push(a.type.target);for(u=0,c=v.length;u<c;++u)void 0!==(g=v[u]).attrToRemove&&e.removeAttribute(g.attrToRemove);return J.surrogate(w,y,v,m)}return null},e.prototype._compileElement=function(e,t,n,r,i,o){var s=e.tagName.toLowerCase(),a=e.attributes,u=[],c=void 0,l=[],h=[],p=t.getBindingLanguage(this.bindingLanguage),d=void 0,f=void 0,v=void 0,g=void 0,y=void 0,m=void 0,b=void 0,w=void 0,_=void 0,C=void 0,E=void 0,x=void 0,S=void 0,k=void 0,T=void 0,O=void 0;if("slot"===s)return o&&(e=function(e,t,n,r,i){var o=N.DOM.createElement("au-shadow-slot");N.DOM.replaceNode(o,n);var s=Pe(o),a=J.shadowSlot(i);if(a.slotName=n.getAttribute("name")||fe.defaultSlotKey,a.slotDestination=n.getAttribute("slot"),n.innerHTML.trim()){for(var u=N.DOM.createDocumentFragment(),c=void 0;c=n.firstChild;)u.appendChild(c);a.slotFallbackFactory=e.compile(u,t)}return r[s]=a,o}(this,t,e,n,i)),e.nextSibling;if("template"===s){if(!("content"in e))throw new Error("You cannot place a template element within "+e.namespaceURI+" namespace");(f=this.compile(e,t)).part=e.getAttribute("part")}else{if(v=t.getElement(e.getAttribute("as-element")||s),"let"===s&&!v&&p.createLetExpressions!==Me)return u=p.createLetExpressions(t,e),n[Pe(e)]=J.letElement(u),e.nextSibling;v&&(g=$.element(e,v),v.processAttributes(this,t,e,a,g),l.push(g))}for(m=0,b=a.length;m<b;++m){if(E=_=(w=a[m]).name,C=w.value,S=p.inspectAttribute(t,s,_,C),o&&"slot"===S.attrName&&(S.attrName=_="au-slot"),y=null,v=t.getAttribute(S.attrName)){if((T=t.mapAttribute(S.attrName))&&(k=v.attributes[T])&&(S.defaultBindingMode=k.defaultBindingMode,S.command||S.expression||(S.command=k.hasOptions?"options":null),S.command&&"options"!==S.command&&v.primaryProperty)){var I=v.primaryProperty;_=S.attrName=I.attribute,S.defaultBindingMode=I.defaultBindingMode}}else g&&(y=g.type.attributes[S.attrName])&&(S.defaultBindingMode=y.defaultBindingMode);if(x=y?p.createAttributeInstruction(t,e,S,g):p.createAttributeInstruction(t,e,S,void 0,v))if(x.alteredAttr&&(v=t.getAttribute(x.attrName)),x.discrete)u.push(x);else if(v){if(x.type=v,this._configureProperties(x,t),v.liftsContent){x.originalAttrName=E,d=x;break}l.push(x)}else y?g.attributes[S.attrName].targetProperty=y.name:u.push(x.attributes[x.attrName]);else if(v){if((x=$.attribute(_,v)).attributes[t.mapAttribute(_)]=C,v.liftsContent){x.originalAttrName=E,d=x;break}l.push(x)}else y&&(g.attributes[_]=C)}if(d)d.viewFactory=f,n[Pe(e=d.type.compile(this,t,e,d,r))]=J.lifting(i,d);else{var A=!1;if(u.length||l.length){for(O=!!l.length&&++Ne,m=0,b=l.length;m<b;++m)(x=l[m]).type.compile(this,t,e,x,r),h.push(x.type.target),A=A||x.skipContentProcessing;for(m=0,b=u.length;m<b;++m)void 0!==(c=u[m]).attrToRemove&&e.removeAttribute(c.attrToRemove);n[Pe(e)]=J.normal(O,i,h,l,u,g)}if(A)return e.nextSibling;for(var R=e.firstChild;R;)R=this._compileNode(R,t,n,e,O||i,o)}return e.nextSibling},e.prototype._configureProperties=function(e,t){var n=e.type,r=e.attrName,i=e.attributes,o=void 0,s=void 0,a=void 0,u=t.mapAttribute(r);for(s in u&&r in i&&u!==r&&(i[u]=i[r],delete i[r]),i)null!==(a=i[s])&&"object"===(void 0===a?"undefined":O(a))&&(o=n.attributes[s],a.targetProperty=void 0!==o?o.name:s)},e}())||w,De=e.ResourceModule=function(){function e(e){this.id=e,this.moduleInstance=null,this.mainResource=null,this.resources=null,this.viewStrategy=null,this.isInitialized=!1,this.onLoaded=null,this.loadContext=null}return e.prototype.initialize=function(e){var t=this.mainResource,n=this.resources,r=this.viewStrategy;if(!this.isInitialized){this.isInitialized=!0,void 0!==t&&(t.metadata.viewStrategy=r,t.initialize(e));for(var i=0,o=n.length;i<o;++i)(t=n[i]).metadata.viewStrategy=r,t.initialize(e)}},e.prototype.register=function(e,t){var n=this.mainResource,r=this.resources;void 0!==n&&(n.register(e,t),t=null);for(var i=0,o=r.length;i<o;++i)r[i].register(e,t),t=null},e.prototype.load=function(e,t){if(null!==this.onLoaded)return this.loadContext===t?Promise.resolve():this.onLoaded;var n=this.mainResource,r=this.resources,i=void 0;if(void 0!==n){(i=new Array(r.length+1))[0]=n.load(e,t);for(var o=0,s=r.length;o<s;++o)i[o+1]=r[o].load(e,t)}else{i=new Array(r.length);for(var a=0,u=r.length;a<u;++a)i[a]=r[a].load(e,t)}return this.loadContext=t,this.onLoaded=Promise.all(i),this.onLoaded},e}(),je=e.ResourceDescription=function(){function e(e,t,n){n||(n=A.metadata.get(A.metadata.resource,t))||((n=new $e).elementName=H(e),A.metadata.define(A.metadata.resource,n,t)),n instanceof $e?void 0===n.elementName?n.elementName=H(e):void 0===n.attributeName?n.attributeName=H(e):null===n.attributeName&&null===n.elementName&&$e.convention(e,n):n.name||(n.name=H(e)),this.metadata=n,this.value=t}return e.prototype.initialize=function(e){this.metadata.initialize(e,this.value)},e.prototype.register=function(e,t){this.metadata.register(e,t)},e.prototype.load=function(e,t){return this.metadata.load(e,this.value,t)},e}(),Fe=e.ModuleAnalyzer=function(){function e(){this.cache=Object.create(null)}return e.prototype.getAnalysis=function(e){return this.cache[e]},e.prototype.analyze=function(e,t,n){var r=void 0,i=void 0,o=void 0,s=void 0,a=void 0,u=void 0,c=[],l=void 0,h=void 0,p=void 0;if(p=this.cache[e])return p;for(a in p=new De(e),this.cache[e]=p,"function"==typeof t&&(t={default:t}),n&&(r=new je(n,t[n])),t)u=t[a],a!==n&&"function"==typeof u&&((s=A.metadata.get(A.metadata.resource,u))?(s instanceof $e&&(ye.convention(u,s),null===s.attributeName&&null===s.elementName&&$e.convention(a,s),null===s.attributeName&&null===s.elementName&&(s.elementName=H(a))),!r&&s instanceof $e&&null!==s.elementName?r=new je(a,u,s):c.push(new je(a,u,s))):ee.decorates(u)?h=u:u instanceof R.TemplateRegistryEntry?h=new ie(e,u):(l=ye.convention(u))?(null===l.elementName||r?c.push(new je(a,u,l)):r=new je(a,u,l),A.metadata.define(A.metadata.resource,l,u)):(l=$e.convention(a))?(null===l.elementName||r?c.push(new je(a,u,l)):r=new je(a,u,l),A.metadata.define(A.metadata.resource,l,u)):(l=M.ValueConverterResource.convention(a)||M.BindingBehaviorResource.convention(a)||z.convention(a))?(c.push(new je(a,u,l)),A.metadata.define(A.metadata.resource,l,u)):i||(i=u,o=a));return!r&&i&&(r=new je(o,i)),p.moduleInstance=t,p.mainResource=r,p.resources=c,p.viewStrategy=h,p},e}(),Ve=I.getLogger("templating");var Be=function(){function e(e){var t=this;e.then((function(e){return t.viewFactory=e}))}return e.prototype.create=function(e,t,n,r){return this.viewFactory.create(e,t,n,r)},e.prototype.setCacheSize=function(e,t){this.viewFactory.setCacheSize(e,t)},e.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},e.prototype.returnViewToCache=function(e){this.viewFactory.returnViewToCache(e)},T(e,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),e}(),qe=null,Ue=e.ViewEngine=(0,L.inject)(R.Loader,L.Container,Le,Fe,ye)((E=C=function(){function e(e,t,n,r,i){this.loader=e,this.container=t,this.viewCompiler=n,this.moduleAnalyzer=r,this.appResources=i,this._pluginMap={},null===qe&&((qe=new $e).attributeName="au-slot",A.metadata.define(A.metadata.resource,qe,he)),qe.initialize(t,he),qe.register(i)}return e.prototype.addResourcePlugin=function(e,t){var n=e.replace(".","")+"-resource-plugin";this._pluginMap[e]=n,this.loader.addPlugin(n,t)},e.prototype.loadViewFactory=function(e,t,n,r){var i=this;return n=n||new G,function(e,t){return t instanceof R.TemplateRegistryEntry?Promise.resolve(t):e.loadTemplate(t)}(this.loader,e).then((function(e){var o=e.address;return e.onReady?n.hasDependency(o)?null===e.template?e.onReady:Promise.resolve(new Be(e.onReady)):(n.addDependency(o),e.onReady):(n.addDependency(o),e.onReady=i.loadTemplateResources(e,t,n,r).then((function(n){if(e.resources=n,null===e.template)return e.factory=null;var r=i.viewCompiler.compile(e.template,n,t);return e.factory=r})),e.onReady)}))},e.prototype.loadTemplateResources=function(t,n,r,i){var o=new ye(this.appResources,t.address),s=t.dependencies,a=void 0,u=void 0;if(n=n||Y.normal,0===s.length&&!n.associatedModuleId)return Promise.resolve(o);if(a=s.map((function(e){return e.src})),u=s.map((function(e){return e.name})),Ve.debug("importing resources for "+t.address,a),i){var c=A.metadata.get(e.viewModelRequireMetadataKey,i);if(c){for(var l=a.length,h=0,p=c.length;h<p;++h){var d=c[h],f="function"==typeof d?A.Origin.get(d).moduleId:(0,P.relativeToFile)(d.src||d,t.address);-1===a.indexOf(f)&&(a.push(f),u.push(d.as))}Ve.debug("importing ViewModel resources for "+n.associatedModuleId,a.slice(l))}}return this.importViewResources(a,u,o,n,r)},e.prototype.importViewModelResource=function(e,t){var n=this;return this.loader.loadModule(e).then((function(r){var i=A.Origin.get(r).moduleId,o=n.moduleAnalyzer.analyze(i,r,t);if(!o.mainResource)throw new Error('No view model found in module "'+e+'".');return o.initialize(n.container),o.mainResource}))},e.prototype.importViewResources=function(e,t,n,r,i){var o=this;return i=i||new G,r=r||Y.normal,e=e.map((function(e){return o._applyLoaderPlugin(e)})),this.loader.loadAllModules(e).then((function(e){var s=void 0,a=void 0,u=void 0,c=void 0,l=void 0,h=void 0,p=o.container,d=o.moduleAnalyzer,f=new Array(e.length);for(s=0,a=e.length;s<a;++s)l=e[s],c=A.Origin.get(l).moduleId,(u=d.analyze(c,l)).initialize(p),u.register(n,t[s]),f[s]=u;for(r.associatedModuleId&&(h=d.getAnalysis(r.associatedModuleId))&&h.register(n),s=0,a=f.length;s<a;++s)f[s]=f[s].load(p,i);return Promise.all(f).then((function(){return n}))}))},e.prototype._applyLoaderPlugin=function(e){var t=e.lastIndexOf(".");if(-1!==t){var n=e.substring(t),r=this._pluginMap[n];return void 0===r?e:this.loader.applyPluginToUrl(e,r)}return e},e}(),C.viewModelRequireMetadataKey="aurelia:view-model-require",_=E))||_,He=e.Controller=function(){function e(e,t,n,r){this.behavior=e,this.instruction=t,this.viewModel=n,this.isAttached=!1,this.view=null,this.isBound=!1,this.scope=null,this.container=r,this.elementEvents=r.elementEvents||null;var i,o=e.observerLocator.getOrCreateObserversLookup(n),s=e.handlesBind,a=t.attributes,u=this.boundProperties=[],c=e.properties,l=void 0;for(e._ensurePropertiesDefined(n,o),l=0,i=c.length;l<i;++l)c[l]._initialize(n,o,a,s,u)}return e.prototype.created=function(e){this.behavior.handlesCreated&&this.viewModel.created(e,this.view)},e.prototype.automate=function(e,t){this.view.bindingContext=this.viewModel,this.view.overrideContext=e||(0,M.createOverrideContext)(this.viewModel),this.view._isUserControlled=!0,this.behavior.handlesCreated&&this.viewModel.created(t||null,this.view),this.bind(this.view)},e.prototype.bind=function(e){var t,n=this.behavior.handlesBind,r=this.boundProperties,i=void 0,o=void 0,s=void 0,a=void 0;if(this.isBound){if(this.scope===e)return;this.unbind()}for(this.isBound=!0,this.scope=e,i=0,t=r.length;i<t;++i)a=(s=(o=r[i]).observer).selfSubscriber,s.publishing=!1,n&&(s.selfSubscriber=null),o.binding.bind(e),s.call(),s.publishing=!0,s.selfSubscriber=a;var u=void 0;null!==this.view?(n&&(this.view.viewModelScope=e),this.viewModel===e.overrideContext.bindingContext?u=e.overrideContext:this.instruction.inheritBindingContext?u=(0,M.createOverrideContext)(this.viewModel,e.overrideContext):(u=(0,M.createOverrideContext)(this.viewModel)).__parentOverrideContext=e.overrideContext,this.view.bind(this.viewModel,u)):n&&(u=e.overrideContext,void 0!==e.overrideContext.__parentOverrideContext&&this.viewModel.viewFactory&&this.viewModel.viewFactory.factoryCreateInstruction.partReplacements&&((u=Object.assign({},e.overrideContext)).parentOverrideContext=e.overrideContext.__parentOverrideContext),this.viewModel.bind(e.bindingContext,u))},e.prototype.unbind=function(){if(this.isBound){var e,t=this.boundProperties,n=void 0;for(this.isBound=!1,this.scope=null,null!==this.view&&this.view.unbind(),this.behavior.handlesUnbind&&this.viewModel.unbind(),null!==this.elementEvents&&this.elementEvents.disposeAll(),n=0,e=t.length;n<e;++n)t[n].binding.unbind()}},e.prototype.attached=function(){this.isAttached||(this.isAttached=!0,this.behavior.handlesAttached&&this.viewModel.attached(),null!==this.view&&this.view.attached())},e.prototype.detached=function(){this.isAttached&&(this.isAttached=!1,null!==this.view&&this.view.detached(),this.behavior.handlesDetached&&this.viewModel.detached())},e}(),We=e.BehaviorPropertyObserver=(0,M.subscriberCollection)()(x=function(){function e(e,t,n,r,i){this.taskQueue=e,this.obj=t,this.propertyName=n,this.notqueued=!0,this.publishing=!1,this.selfSubscriber=r,this.currentValue=this.oldValue=i}return e.prototype.getValue=function(){return this.currentValue},e.prototype.setValue=function(e){var t=this.currentValue;Object.is(e,t)||(this.oldValue=t,this.currentValue=e,this.publishing&&this.notqueued&&(this.taskQueue.flushing?this.call():(this.notqueued=!1,this.taskQueue.queueMicroTask(this))))},e.prototype.call=function(){var e=this.oldValue,t=this.currentValue;this.notqueued=!0,Object.is(t,e)||(this.selfSubscriber&&this.selfSubscriber(t,e),this.callSubscribers(t,e),this.oldValue=t)},e.prototype.subscribe=function(e,t){this.addSubscriber(e,t)},e.prototype.unsubscribe=function(e,t){this.removeSubscriber(e,t)},e}())||x;function ze(e,t){var n=e.__observers__;if(void 0===n){var r=Object.getPrototypeOf(e).constructor,i=A.metadata.get(A.metadata.resource,r);i.isInitialized||i.initialize(L.Container.instance||new L.Container,e.constructor),n=i.observerLocator.getOrCreateObserversLookup(e),i._ensurePropertiesDefined(e,n)}return n[t]}var Qe=e.BindableProperty=function(){function e(e){"string"==typeof e?this.name=e:Object.assign(this,e),this.attribute=this.attribute||H(this.name);var t=this.defaultBindingMode;null==t?this.defaultBindingMode=M.bindingMode.oneWay:"string"==typeof t&&(this.defaultBindingMode=M.bindingMode[t]||M.bindingMode.oneWay),this.changeHandler=this.changeHandler||null,this.owner=null,this.descriptor=null}return e.prototype.registerWith=function(e,t,n){if(t.properties.push(this),t.attributes[this.attribute]=this,this.owner=t,n)return this.descriptor=n,this._configureDescriptor(n)},e.prototype._configureDescriptor=function(e){var t=this.name;return e.configurable=!0,e.enumerable=!0,"initializer"in e&&(this.defaultValue=e.initializer,delete e.initializer,delete e.writable),"value"in e&&(this.defaultValue=e.value,delete e.value,delete e.writable),e.get=function(){return ze(this,t).getValue()},e.set=function(e){ze(this,t).setValue(e)},e.get.getObserver=function(e){return ze(e,t)},e},e.prototype.defineOn=function(e,t){var n=this.name,r=void 0;null===this.changeHandler&&(r=n+"Changed")in e.prototype&&(this.changeHandler=r),null===this.descriptor&&Object.defineProperty(e.prototype,n,this._configureDescriptor(t,{}))},e.prototype.createObserver=function(e){var t=null,n=this.defaultValue,r=this.changeHandler,i=this.name,o=void 0;if(!this.hasOptions){if(r in e)t="propertyChanged"in e?function(t,n){e[r](t,n),e.propertyChanged(i,t,n)}:function(t,n){return e[r](t,n)};else if("propertyChanged"in e)t=function(t,n){return e.propertyChanged(i,t,n)};else if(null!==r)throw new Error("Change handler "+r+" was specified but not declared on the class.");return void 0!==n&&(o="function"==typeof n?n.call(e):n),new We(this.owner.taskQueue,e,this.name,t,o)}},e.prototype._initialize=function(e,t,n,r,i){var o=void 0,s=void 0,a=void 0,u=this.defaultValue;if(this.isDynamic)for(var c in n)this._createDynamicProperty(e,t,r,c,n[c],i);else this.hasOptions||(s=t[this.name],null!==n&&(o=s.selfSubscriber,a=n[this.attribute],r&&(s.selfSubscriber=null),"string"==typeof a?(e[this.name]=a,s.call()):a?i.push({observer:s,binding:a.createBinding(e)}):void 0!==u&&s.call(),s.selfSubscriber=o),s.publishing=!0)},e.prototype._createDynamicProperty=function(e,t,n,r,i,o){var s=r+"Changed",a=null,u=void 0,c=void 0;s in e?a="propertyChanged"in e?function(t,n){e[s](t,n),e.propertyChanged(r,t,n)}:function(t,n){return e[s](t,n)}:"propertyChanged"in e&&(a=function(t,n){return e.propertyChanged(r,t,n)}),u=t[r]=new We(this.owner.taskQueue,e,r,a),Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:u.getValue.bind(u),set:u.setValue.bind(u)}),n&&(u.selfSubscriber=null),"string"==typeof i?(e[r]=i,u.call()):i&&(c={observer:u,binding:i.createBinding(e)},o.push(c)),u.publishing=!0,u.selfSubscriber=a},e}(),Ke=0;function Ge(){return!0}function Ye(){}var $e=e.HtmlBehaviorResource=function(){function e(){this.elementName=null,this.attributeName=null,this.attributeDefaultBindingMode=void 0,this.liftsContent=!1,this.targetShadowDOM=!1,this.shadowDOMOptions=null,this.processAttributes=Ye,this.processContent=Ge,this.usesShadowDOM=!1,this.childBindings=null,this.hasDynamicOptions=!1,this.containerless=!1,this.properties=[],this.attributes={},this.isInitialized=!1,this.primaryProperty=null}return e.convention=function(t,n){var r=void 0;return t.endsWith("CustomAttribute")&&((r=n||new e).attributeName=H(t.substring(0,t.length-15))),t.endsWith("CustomElement")&&((r=n||new e).elementName=H(t.substring(0,t.length-13))),r},e.prototype.addChildBinding=function(e){null===this.childBindings&&(this.childBindings=[]),this.childBindings.push(e)},e.prototype.initialize=function(e,t){var n=t.prototype,r=this.properties,i=this.attributeName,o=this.attributeDefaultBindingMode,s=void 0,a=void 0,u=void 0;if(!this.isInitialized)if(this.isInitialized=!0,t.__providerId__=++Ke,this.observerLocator=e.get(M.ObserverLocator),this.taskQueue=e.get(D.TaskQueue),this.target=t,this.usesShadowDOM=this.targetShadowDOM&&N.FEATURE.shadowDOM,this.handlesCreated="created"in n,this.handlesBind="bind"in n,this.handlesUnbind="unbind"in n,this.handlesAttached="attached"in n,this.handlesDetached="detached"in n,this.htmlName=this.elementName||this.attributeName,null!==i)if(0===r.length&&new Qe({name:"value",changeHandler:"valueChanged"in n?"valueChanged":null,attribute:i,defaultBindingMode:o}).registerWith(t,this),u=r[0],1===r.length&&"value"===u.name)u.isDynamic=u.hasOptions=this.hasDynamicOptions,u.defineOn(t,this);else{for(s=0,a=r.length;s<a;++s)if(r[s].defineOn(t,this),r[s].primaryProperty){if(this.primaryProperty)throw new Error("Only one bindable property on a custom element can be defined as the default");this.primaryProperty=r[s]}(u=new Qe({name:"value",changeHandler:"valueChanged"in n?"valueChanged":null,attribute:i,defaultBindingMode:o})).hasOptions=!0,u.registerWith(t,this)}else{for(s=0,a=r.length;s<a;++s)r[s].defineOn(t,this);this._copyInheritedProperties(e,t)}},e.prototype.register=function(e,t){var n=this;null!==this.attributeName&&(e.registerAttribute(t||this.attributeName,this,this.attributeName),Array.isArray(this.aliases)&&this.aliases.forEach((function(t){e.registerAttribute(t,n,n.attributeName)}))),null!==this.elementName&&e.registerElement(t||this.elementName,this)},e.prototype.load=function(e,t,n,r,i){var o=this,s=void 0;return null!==this.elementName?(r=e.get(ae).getViewStrategy(r||this.viewStrategy||t),s=new Y(this.targetShadowDOM,!0),r.moduleId||(r.moduleId=A.Origin.get(t).moduleId),r.loadViewFactory(e.get(Ue),s,n,t).then((function(e){return i&&o.viewFactory||(o.viewFactory=e),e}))):Promise.resolve(this)},e.prototype.compile=function(e,t,n,r,i){if(this.liftsContent){if(!r.viewFactory){var o=N.DOM.createElement("template"),s=N.DOM.createDocumentFragment(),a=n.getAttribute("view-cache"),u=n.getAttribute("part");n.removeAttribute(r.originalAttrName),N.DOM.replaceNode(o,n,i),s.appendChild(n),r.viewFactory=e.compile(s,t),u&&(r.viewFactory.part=u,n.removeAttribute("part")),a&&(r.viewFactory.setCacheSize(a),n.removeAttribute("view-cache")),n=o}}else if(null!==this.elementName){var c={};if(this.processContent(e,t,n,r)&&n.hasChildNodes()){for(var l=n.firstChild,h=this.usesShadowDOM?null:N.DOM.createElement("au-content"),p=void 0,d=void 0;l;)p=l.nextSibling,"TEMPLATE"===l.tagName&&(d=l.getAttribute("replace-part"))?(c[d]=e.compile(l,t),N.DOM.removeNode(l,i),r.partReplacements=c):null!==h&&(3===l.nodeType&&W(l)?N.DOM.removeNode(l,i):h.appendChild(l)),l=p;null!==h&&h.hasChildNodes()&&n.appendChild(h),r.skipContentProcessing=!1}else r.skipContentProcessing=!0}else this.processContent(e,t,n,r)||(r.skipContentProcessing=!0);return n},e.prototype.create=function(e,t,n,r){var i=void 0,o=null;t=t||$.normal,n=n||null,r=r||null,null!==this.elementName&&n&&(this.usesShadowDOM?(i=n.attachShadow(this.shadowDOMOptions),e.registerInstance(N.DOM.boundary,i)):(i=n,this.targetShadowDOM&&e.registerInstance(N.DOM.boundary,i))),null!==n&&(n.au=o=n.au||{});var s=t.viewModel||e.get(this.target),a=new He(this,t,s,e),u=this.childBindings,c=void 0;if(this.liftsContent)o.controller=a;else if(null!==this.elementName){if(c=t.viewFactory||this.viewFactory,e.viewModel=s,c&&(a.view=c.create(e,t,n)),null!==n){if(o.controller=a,a.view){if(!this.usesShadowDOM&&(1===n.childNodes.length||n.contentElement)){var l=n.childNodes[0]||n.contentElement;a.view.contentView={fragment:l},l.parentNode&&N.DOM.removeNode(l)}if(t.anchorIsContainer){if(null!==u)for(var h=0,p=u.length;h<p;++h)a.view.addBinding(u[h].create(n,s,a));a.view.appendNodesTo(i)}else a.view.insertNodesBefore(i)}else if(null!==u)for(var d=0,f=u.length;d<f;++d)r.push(u[d].create(n,s,a))}else if(a.view){if(a.view.controller=a,null!==u)for(var v=0,g=u.length;v<g;++v)a.view.addBinding(u[v].create(t.host,s,a))}else if(null!==u)for(var y=0,m=u.length;y<m;++y)r.push(u[y].create(t.host,s,a))}else if(null!==u)for(var b=0,w=u.length;b<w;++b)r.push(u[b].create(n,s,a));return null!==o&&(o[this.htmlName]=a),t.initiatedByBehavior&&c&&a.view.created(),a},e.prototype._ensurePropertiesDefined=function(e,t){var n,r=void 0,i=void 0,o=void 0;if(!("__propertiesDefined__"in t))for(t.__propertiesDefined__=!0,i=0,n=(r=this.properties).length;i<n;++i)void 0!==(o=r[i].createObserver(e))&&(t[o.propertyName]=o)},e.prototype._copyInheritedProperties=function(e,t){for(var n=this,r=void 0,i=t;;){var o=Object.getPrototypeOf(t.prototype);if(!(t=o&&o.constructor))return;if(r=A.metadata.getOwn(A.metadata.resource,t))break}r.initialize(e,t);for(var s=function(e,t){var o=r.properties[e];if(n.properties.some((function(e){return e.name===o.name})))return"continue";new Qe(o).registerWith(i,n)},a=0,u=r.properties.length;a<u;++a)s(a)},e}();function Xe(e,t){return function(n,r,i){var o="string"==typeof r?n.constructor:n,s=A.metadata.getOrCreateOwn(A.metadata.resource,$e,o);"string"==typeof e&&(e={selector:e,name:r}),i&&(i.writable=!0,i.configurable=!0),e.all=t,s.addChildBinding(new Je(e))}}var Je=function(){function e(e){this.name=e.name,this.changeHandler=e.changeHandler||this.name+"Changed",this.selector=e.selector,this.all=e.all}return e.prototype.create=function(e,t,n){return new nt(this.selector,e,this.name,t,n,this.changeHandler,this.all)},e}(),Ze=[];function et(e,t,n){var r=e.get(t);r||(r=[],e.set(t,r)),r.push(n)}function tt(e,t){for(var n=t.binders,r=n.length,i=new Map,o=0,s=e.length;o<s;++o){for(var a=e[o],u=a.addedNodes,c=a.removedNodes,l=0,h=c.length;l<h;++l){var p=c[l];if(1===p.nodeType)for(var d=0;d<r;++d){var f=n[d];f.onRemove(p)&&et(i,f,a)}}for(var v=0,g=u.length;v<g;++v){var y=u[v];if(1===y.nodeType)for(var m=0;m<r;++m){var b=n[m];b.onAdd(y)&&et(i,b,a)}}}i.forEach((function(e,t){null!==t.changeHandler&&t.viewModel[t.changeHandler](e)}))}var nt=function(){function e(e,t,n,r,i,o,s){this.selector=e,this.viewHost=t,this.property=n,this.viewModel=r,this.controller=i,this.changeHandler=o in r?o:null,this.usesShadowDOM=i.behavior.usesShadowDOM,this.all=s,!this.usesShadowDOM&&i.view&&i.view.contentView?this.contentView=i.view.contentView:this.contentView=null}return e.prototype.matches=function(e){if(e.matches(this.selector)){if(null===this.contentView)return!0;var t=this.contentView,n=e.auAssignedSlot;if(n&&n.projectFromAnchors){for(var r=n.projectFromAnchors,i=0,o=r.length;i<o;++i)if(r[i].auOwnerView===t)return!0;return!1}return e.auOwnerView===t}return!1},e.prototype.bind=function(e){var t=this.viewHost,n=this.viewModel,r=t.__childObserver__;if(!r){r=t.__childObserver__=N.DOM.createMutationObserver(tt);var i={childList:!0,subtree:!this.usesShadowDOM};r.observe(t,i),r.binders=[]}if(r.binders.push(this),this.usesShadowDOM){var o=t.firstElementChild;if(this.all){var s=n[this.property];for(s?s.splice(0):s=n[this.property]=[];o;)this.matches(o)&&s.push(o.au&&o.au.controller?o.au.controller.viewModel:o),o=o.nextElementSibling;null!==this.changeHandler&&this.viewModel[this.changeHandler](Ze)}else for(;o;){if(this.matches(o)){var a=o.au&&o.au.controller?o.au.controller.viewModel:o;this.viewModel[this.property]=a,null!==this.changeHandler&&this.viewModel[this.changeHandler](a);break}o=o.nextElementSibling}}},e.prototype.onRemove=function(e){if(this.matches(e)){var t=e.au&&e.au.controller?e.au.controller.viewModel:e;if(this.all){var n=this.viewModel[this.property]||(this.viewModel[this.property]=[]),r=n.indexOf(t);return-1!==r&&n.splice(r,1),!0}return!1}return!1},e.prototype.onAdd=function(e){if(this.matches(e)){var t=e.au&&e.au.controller?e.au.controller.viewModel:e;if(this.all){var n=this.viewModel[this.property]||(this.viewModel[this.property]=[]);if("*"===this.selector)return n.push(t),!0;for(var r=0,i=e.previousElementSibling;i;)this.matches(i)&&r++,i=i.previousElementSibling;return n.splice(r,0,t),!0}this.viewModel[this.property]=t,null!==this.changeHandler&&this.viewModel[this.changeHandler](t)}return!1},e.prototype.unbind=function(){this.viewHost.__childObserver__&&(this.viewHost.__childObserver__.disconnect(),this.viewHost.__childObserver__=null,this.viewModel[this.property]=null)},e}();function rt(e,t){return Array.isArray(t)?e.removeMany(t,!0):e.remove(t,!0)}var it=e.SwapStrategies={before:function(e,t,n){return void 0===t?n():n().then((function(){return rt(e,t)}))},with:function(e,t,n){return void 0===t?n():Promise.all([rt(e,t),n()])},after:function(e,t,n){return Promise.resolve(e.removeAll(!0)).then(n)}};function ot(e){return e.skipActivation||"function"!=typeof e.viewModel.activate?Promise.resolve():e.viewModel.activate(e.model)||Promise.resolve()}var st=e.CompositionEngine=(0,L.inject)(Ue,ae)(S=function(){function e(e,t){this.viewEngine=e,this.viewLocator=t}return e.prototype._swap=function(e,t){var n=it[e.swapOrder]||it.after,r=e.viewSlot.children.slice();return n(e.viewSlot,r,(function(){return Promise.resolve(e.viewSlot.add(t)).then((function(){e.currentController&&e.currentController.unbind()}))})).then((function(){e.compositionTransactionNotifier&&e.compositionTransactionNotifier.done()}))},e.prototype._createControllerAndSwap=function(e){var t=this;return this.createController(e).then((function(n){return e.compositionTransactionOwnershipToken?e.compositionTransactionOwnershipToken.waitForCompositionComplete().then((function(){return n.automate(e.overrideContext,e.owningView),t._swap(e,n.view)})).then((function(){return n})):(n.automate(e.overrideContext,e.owningView),t._swap(e,n.view).then((function(){return n})))}))},e.prototype.createController=function(e){var t=this,n=void 0,r=void 0,i=void 0,o=void 0;return this.ensureViewModel(e).then(ot).then((function(){n=e.childContainer,r=e.viewModel,i=e.viewModelResource,o=i.metadata;var s=t.viewLocator.getViewStrategy(e.view||r);return e.viewResources&&s.makeRelativeTo(e.viewResources.viewUrl),o.load(n,i.value,null,s,!0)})).then((function(t){return o.create(n,$.dynamic(e.host,r,t))}))},e.prototype.ensureViewModel=function(e){var t=e.childContainer=e.childContainer||e.container.createChild();if("string"==typeof e.viewModel)return e.viewModel=e.viewResources?e.viewResources.relativeToView(e.viewModel):e.viewModel,this.viewEngine.importViewModelResource(e.viewModel).then((function(n){return t.autoRegister(n.value),e.host&&t.registerInstance(N.DOM.Element,e.host),e.viewModel=t.viewModel=t.get(n.value),e.viewModelResource=n,e}));var n=e.viewModel.constructor,r="function"==typeof e.viewModel;r&&(n=e.viewModel,t.autoRegister(n));var i=A.metadata.getOrCreateOwn(A.metadata.resource,$e,n);return i.elementName=i.elementName||"dynamic-element",i.initialize(r?t:e.container||t,n),e.viewModelResource={metadata:i,value:n},e.host&&t.registerInstance(N.DOM.Element,e.host),t.viewModel=e.viewModel=r?t.get(n):e.viewModel,Promise.resolve(e)},e.prototype.compose=function(e){var t=this;e.childContainer=e.childContainer||e.container.createChild(),e.view=this.viewLocator.getViewStrategy(e.view);var n=e.childContainer.get(B),r=n.tryCapture();return r?e.compositionTransactionOwnershipToken=r:e.compositionTransactionNotifier=n.enlist(),e.viewModel?this._createControllerAndSwap(e):e.view?(e.viewResources&&e.view.makeRelativeTo(e.viewResources.viewUrl),e.view.loadViewFactory(this.viewEngine,new Y).then((function(n){var r=n.create(e.childContainer);return r.bind(e.bindingContext,e.overrideContext),e.compositionTransactionOwnershipToken?e.compositionTransactionOwnershipToken.waitForCompositionComplete().then((function(){return t._swap(e,r)})).then((function(){return r})):t._swap(e,r).then((function(){return r}))}))):e.viewSlot?(e.viewSlot.removeAll(),e.compositionTransactionNotifier&&e.compositionTransactionNotifier.done(),Promise.resolve(null)):Promise.resolve(null)},e}())||S,at=e.ElementConfigResource=function(){function e(){}return e.prototype.initialize=function(e,t){},e.prototype.register=function(e,t){},e.prototype.load=function(e,t){var n=new t;e.get(M.EventManager).registerElementConfig(n)},e}();var ut={mode:"open"};function ct(){return!1}function lt(e){return function(t){A.metadata.define(ae.viewStrategyMetadataKey,e,t)}}e.TemplatingEngine=(0,L.inject)(L.Container,Fe,Le,st)(k=function(){function e(e,t,n,r){this._container=e,this._moduleAnalyzer=t,this._viewCompiler=n,this._compositionEngine=r,e.registerInstance(j,j.instance=new j)}return e.prototype.configureAnimator=function(e){this._container.unregister(j),this._container.registerInstance(j,j.instance=e)},e.prototype.compose=function(e){return this._compositionEngine.compose(e)},e.prototype.enhance=function(e){e instanceof N.DOM.Element&&(e={element:e});var t={letExpressions:[]},n=e.resources||this._container.get(ye);this._viewCompiler._compileNode(e.element,n,t,e.element.parentNode,"root",!0);var r=new Ae(e.element,t,n),i=e.container||this._container.createChild(),o=r.create(i,$.enhance());return o.bind(e.bindingContext||{},e.overrideContext),o.firstChild=o.lastChild=o.fragment,o.fragment=N.DOM.createDocumentFragment(),o.attached(),o},e}())||k})),e.entry="dist/commonjs/aurelia-templating.js"})),e.pkg("firebase-app",{},(function(e){return e.file("index.cjs.js",(function(e,t,n,r,i){"use strict";var o,s=(o=t("@firebase/app"))&&"object"==typeof o&&"default"in o?o.default:o;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.exports=s})),e.file("index.cjs.js",(function(e,t,n,r,i){"use strict";var o,s=(o=t("@firebase/app"))&&"object"==typeof o&&"default"in o?o.default:o;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.exports=s})),e.entry="index.cjs.js"})),e.pkg("firebase-auth",{},(function(e){return e.file("index.cjs.js",(function(e,t,n,r,i){"use strict";t("@firebase/auth")})),e.file("index.cjs.js",(function(e,t,n,r,i){"use strict";t("@firebase/auth")})),e.entry="index.cjs.js"})),e.pkg("firebase-firestore",{},(function(e){return e.file("index.cjs.js",(function(e,t,n,r,i){"use strict";t("@firebase/database")})),e.file("index.cjs.js",(function(e,t,n,r,i){"use strict";t("@firebase/database")})),e.entry="index.cjs.js"})),e.pkg("fuse-box-aurelia-loader",{},(function(t){return t.file("dist/commonjs/fuse-box-aurelia-loader.js",(function(t,n,r,i,o){var s,a=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var l,h=n("aurelia-metadata"),p=n("aurelia-loader"),d=n("aurelia-pal"),f=n("aurelia-logging").getLogger("fuse-box-aurelia-loader"),v=function(){function e(){}return e.prototype.loadTemplate=function(e,t){return u(this,void 0,void 0,(function(){var n;return c(this,(function(r){switch(r.label){case 0:return[4,e.loadText(t.address)];case 1:return n=r.sent(),t.template=d.DOM.createTemplateFromMarkup(n),[2]}}))}))},e}();function g(e,t){var n,r,i=e;if(i.__useDefault&&(i=i.default),h.Origin.set(i,new h.Origin(t,"default")),"object"==typeof i)for(n in i)"function"==typeof(r=i[n])&&h.Origin.set(r,new h.Origin(t,n));return e}t.TextTemplateLoader=v,t.ensureOriginOnExports=g;try{l=e.import("process").env}catch(e){l={},console.log(e)}var y=l.FB_AU_LOG||window.FUSEBOX_AURELIA_LOADER_LOGGING;function m(e,t,n){y&&("error"===e&&f.error(t,n),"info"===e&&f.debug(t,n))}var b=function(t){function n(){var e=t.call(this)||this;return e.loaderPlugins=Object.create(null),e.moduleRegistry=Object.create(null),e.modulesBeingLoaded=new Map,e.useTemplateLoader(new v),e.addPlugin("template-registry-entry",{fetch:function(t){return u(e,void 0,void 0,(function(){var e;return c(this,(function(n){switch(n.label){case 0:return m("info","template-registry-entry- fetch =>",t),(e=this.getOrCreateTemplateRegistryEntry(t)).templateIsLoaded?[3,2]:[4,this.templateLoader.loadTemplate(this,e)];case 1:n.sent(),n.label=2;case 2:return[2,e]}}))}))}}),e}return a(n,t),n.prototype.useTemplateLoader=function(e){this.templateLoader=e},n.prototype.loadAllModules=function(e){var t=this;return m("info","loadAllModules => ",arguments),Promise.all(e.map((function(e){return t.loadModule(e)})))},n.prototype.loadTemplate=function(e){return m("info","loadTemplate => ",arguments),this.loadModule(this.applyPluginToUrl(e,"template-registry-entry"))},n.prototype.loadText=function(e){return m("info","loadText => ",arguments),Promise.resolve(this.loadWithFusebox(this.findFuseBoxPath(e))).then((function(e){return"string"==typeof e?e:e.default?e.default:""}))},n.prototype.loadModule=function(e){return u(this,void 0,void 0,(function(){var t,n,r;return c(this,(function(i){switch(i.label){case 0:return m("info","loadModule => ",e),(t=this.moduleRegistry[e])?[2,t]:(n=this.modulesBeingLoaded.get(e))?[2,n]:(n=this._import(e),this.modulesBeingLoaded.set(e,n),[4,n]);case 1:return r=i.sent(),this.moduleRegistry[e]=g(r,e),this.modulesBeingLoaded.delete(e),[2,r]}}))}))},n.prototype.addPlugin=function(e,t){this.loaderPlugins[e]=t},n.prototype.normalize=function(e,t){return m("info","normalize =>",[e,t]),Promise.resolve(e)},n.prototype.map=function(){},n.prototype._import=function(e){return u(this,void 0,void 0,(function(){var t,n,r,i,o,s,a;return c(this,(function(u){switch(u.label){case 0:t=e.split("!"),n=t.splice(t.length-1,1)[0],r=1===t.length?t[0]:null,u.label=1;case 1:if(u.trys.push([1,4,,5]),!r)return[3,3];if(!(i=this.loaderPlugins[r]))throw new Error("Plugin "+r+" is not registered in the loader.");return[4,i.fetch(n)];case 2:return[2,u.sent()];case 3:return[3,5];case 4:throw o=u.sent(),new Error("\n        Fusebox-loader _import() telling this not registered in the loader:"+e+", module id was: "+n+"\n        Did you forget to add it to bundle?\n\n        "+o+"\n      ");case 5:s=this.findFuseBoxPath(n);try{return a=g(a=this.loadWithFusebox(s),n),this.moduleRegistry[n]=a,[2,Promise.resolve(a)]}catch(t){throw new Error("\n        Fusebox-loader _import() telling this not registered in the loader:"+e+", module path returned: "+s+"\n        Did you forget to add it to bundle?\n\n        "+t+"\n      ")}return[2]}}))}))},n.prototype.applyPluginToUrl=function(e,t){return m("info","applyPluginToUrl =>",arguments),t+"!"+e},n.prototype.loadWithFusebox=function(t){return e.import(t)},n.prototype.fuseBoxExist=function(t){var n=!1;try{n=e.exists(t)}catch(e){n=!1}return n},n.prototype.findFuseBoxPath=function(t){var n;switch(!0){case-1!==t.indexOf("/"):switch(!0){case this.fuseBoxExist(t):n=t;break;case this.fuseBoxExist("~/"+t):n="~/"+t;break;default:var r=Object.keys(e.packages).find((function(e){return t.startsWith(e+"/")}));if(r){var i=e.packages[r].s.entry,o=t.replace(r,"");n=r+"/"+i.replace(/\/([^\/]+)\/?$/,o)}if(!this.fuseBoxExist(n))throw m("error","findFuseBoxPath() failed to find",t),new Error("\n                fusebox-loader - findFuseBoxPath() failed to find:"+t+"\n                Did you forget to add it to bundle??\n\n                ")}break;default:switch(!0){case this.fuseBoxExist(t):n=t;break;case this.fuseBoxExist("~/"+t):n="~/"+t;break;default:throw m("error","findFuseBoxPath() failed to find",t),new Error("\n                fusebox-loader - findFuseBoxPath() failed to find:"+t+"\n                Did you forget to add it to bundle??\n\n                ")}}return n},n}(p.Loader);t.FuseBoxAureliaLoader=b,d.PLATFORM.Loader=b})),t.entry="dist/commonjs/fuse-box-aurelia-loader.js"})),e.pkg("fuse-box-css",{},(function(t){return t.file("index.js",(function(t,n,r,i,o){var s=e.isBrowser||"electron"===e.target,a=function(e,t){if(s){var n=e.replace(/[\.\/]+/g,"-");"-"===n.charAt(0)&&(n=n.substring(1));var r=document.getElementById(n);if(r)t&&(r.innerHTML=t);else{var i=document.createElement(t?"style":"link");i.id=n,i.type="text/css",t?i.innerHTML=t:(i.rel="stylesheet",i.href=e),document.getElementsByTagName("head")[0].appendChild(i)}}};void 0!==e&&s&&e.on("async",(function(e){if(/\.css$/.test(e))return a(e),!1})),r.exports=a})),t.entry="index.js"})),e.pkg("process",{},(function(n){return n.file("index.js",(function(n,r,i,o,s){if(e.isServer)void 0!==t&&Object.assign(global.process.env,t),i.exports=global.process;else{"function"!=typeof Object.assign&&(Object.assign=function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n});var a,u=i.exports={},c=[],l=!1,h=-1;function p(){l=!1,a.length?c=a.concat(c):h=-1,c.length&&d()}function d(){if(!l){var e=setTimeout(p);l=!0;for(var t=c.length;t;){for(a=c,c=[];++h<t;)a&&a[h].run();h=-1,t=c.length}a=null,l=!1,clearTimeout(e)}}function f(e,t){this.fun=e,this.array=t}function v(){}u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||setTimeout(d,0)},f.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={NODE_ENV:"development"},void 0!==t&&Object.assign(u.env,t),u.argv=[],u.version="",u.versions={},u.on=v,u.addListener=v,u.once=v,u.off=v,u.removeListener=v,u.removeAllListeners=v,u.emit=v,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}}})),n.entry="index.js"})),e.pkg("tslib",{},(function(e){return e.file("tslib.js",(function(e,t,n,r,i){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var o,s,a,u,c,l,h,p,d,f,v,g,y,m,b,w,_,C,E,x;!function(e){var t="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};function r(e,n){return e!==t&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(t,r){return e[t]=n?n(t,r):r}}"function"==typeof define&&define.amd?define("tslib",["exports"],(function(n){e(r(t,r(n)))})):"object"==typeof n&&"object"==typeof n.exports?e(r(t,r(n.exports))):e(r(t))}((function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};o=function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},u=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},c=function(e,t){return function(n,r){t(n,r,e)}},l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},h=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))},p=function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},d=function(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])},f=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}},v=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},g=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(v(arguments[t]));return e},y=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},m=function(e){return this instanceof m?(this.v=e,this):new m(e)},b=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||a(e,t)}))})}function a(e,t){try{(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(u,c):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}},w=function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}},_=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}},C=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},x=function(e){return e&&e.__esModule?e:{default:e}},e("__extends",o),e("__assign",s),e("__rest",a),e("__decorate",u),e("__param",c),e("__metadata",l),e("__awaiter",h),e("__generator",p),e("__exportStar",d),e("__values",f),e("__read",v),e("__spread",g),e("__spreadArrays",y),e("__await",m),e("__asyncGenerator",b),e("__asyncDelegator",w),e("__asyncValues",_),e("__makeTemplateObject",C),e("__importStar",E),e("__importDefault",x)}))})),e.entry="tslib.js"})),e.import("fuse-box-aurelia-loader"),e.import("aurelia-bootstrapper")}(function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0,i=arguments.length;r<i;r++)n=n.concat(arguments[r].split("/"));var o=[];for(r=0,i=n.length;r<i;r++){var s=n[r];s&&"."!==s&&(".."===s?o.pop():o.push(s))}return""===n[0]&&o.unshift(""),o.join("/")||(o.length?"/":".")}function n(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function r(e){return{server:require(e)}}function i(e,n){var i=n.path||"./",o=n.pkg||"default",s=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);if((l||58!==n)&&(t>=97&&t<=122||64===t)){if(64===t){var r=e.split("/"),i=r.splice(2,r.length).join("/");return[r[0]+"/"+r[1],i||void 0]}var o=e.indexOf("/");return-1===o?[e]:[e.substring(0,o),e.substring(o+1)]}}(e);if(s&&(i="./",o=s[0],n.v&&n.v[o]&&(o=o+"@"+n.v[o]),e=s[1]),e)if(126===e.charCodeAt(0))e=e.slice(2,e.length),i="./";else if(!l&&(47===e.charCodeAt(0)||58===e.charCodeAt(1)))return r(e);var a=d[o];if(!a){if(l&&"electron"!==v.target)throw"Package not found "+o;return r(o+(e?"/"+e:""))}var u,c=t(i,e=e||"./"+a.s.entry),h=function(e){var t=e.match(/\.(\w{1,})$/);return t&&t[1]?e:e+".js"}(c),p=a.f[h];return!p&&h.indexOf("*")>-1&&(u=h),p||u||(h=t(c,"/","index.js"),(p=a.f[h])||"."!==c||(h=a.s&&a.s.entry||"index.js",p=a.f[h]),p||(h=c+".js",p=a.f[h]),p||(p=a.f[c+".jsx"]),p||(h=c+"/index.jsx",p=a.f[h])),{file:p,wildcard:u,pkgName:o,versions:a.v,filePath:c,validPath:h}}function o(e,n,r){if(void 0===r&&(r={}),!l)return n(/\.(js|json)$/.test(e)?h.require(e):"");if(r&&r.ajaxed===e)return console.error(e,"does not provide a module");var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){var r=i.getResponseHeader("Content-Type"),o=i.responseText;/json/.test(r)?o="module.exports = "+o:/javascript/.test(r)||(o="module.exports = "+JSON.stringify(o));var s=t("./",e);v.dynamic(s,o),n(v.import(e,{ajaxed:e}))}else console.error(e,"not found on request"),n(void 0)},i.open("GET",e,!0),i.send()}function s(e,t){var n=f[e];if(n)for(var r in n){if(!1===n[r].apply(null,t))return!1}}function a(e,t){if(void 0===t&&(t={}),58===e.charCodeAt(4)||58===e.charCodeAt(5))return function(e){if(l){var t,n=document,r=n.getElementsByTagName("head")[0];/\.css$/.test(e)?((t=n.createElement("link")).rel="stylesheet",t.type="text/css",t.href=e):((t=n.createElement("script")).type="text/javascript",t.src=e,t.async=!0),r.insertBefore(t,r.firstChild)}}(e);var n=i(e,t);if(n.server)return n.server;var r=n.file;if(n.wildcard){var u=new RegExp(n.wildcard.replace(/\*/g,"@").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&").replace(/@@/g,".*").replace(/@/g,"[a-z0-9$_-]+"),"i"),c=d[n.pkgName];if(c){var p={};for(var f in c.f)u.test(f)&&(p[f]=a(n.pkgName+"/"+f));return p}}if(!r){var g="function"==typeof t;if(!1===s("async",[e,t]))return;return o(e,(function(e){return g?t(e):null}),t)}var y=n.pkgName;if(r.locals&&r.locals.module)return r.locals.module.exports;var m=r.locals={},b=function(e){return e.substring(0,e.lastIndexOf("/"))||"./"}(n.validPath);m.exports={},m.module={exports:m.exports},m.require=function(e,t){var r=a(e,{pkg:y,path:b,v:n.versions});return v.sdep&&function(e){if(null!==e&&-1!==["function","object","array"].indexOf(typeof e)&&!e.hasOwnProperty("default"))Object.isFrozen(e)?e.default=e:Object.defineProperty(e,"default",{value:e,writable:!0,enumerable:!1})}(r),r},l||!h.require.main?m.require.main={filename:"./",paths:[]}:m.require.main=h.require.main;var w=[m.module.exports,m.require,m.module,n.validPath,b,y];return s("before-import",w),r.fn.apply(w[0],w),s("after-import",w),m.module.exports}if(e.FuseBox)return e.FuseBox;var u="undefined"!=typeof ServiceWorkerGlobalScope,c="undefined"!=typeof WorkerGlobalScope,l="undefined"!=typeof window&&void 0!==window.navigator||c||u,h=l?c||u?{}:window:global;l&&(h.global=c||u?{}:window),e=l&&"undefined"==typeof __fbx__dnm__?e:module.exports;var p=l?c||u?{}:window.__fsbx__=window.__fsbx__||{}:h.$fsbx=h.$fsbx||{};l||(h.require=require);var d=p.p=p.p||{},f=p.e=p.e||{},v=function(){function t(){}return t.global=function(e,t){return void 0===t?h[e]:void(h[e]=t)},t.import=function(e,t){return a(e,t)},t.on=function(e,t){f[e]=f[e]||[],f[e].push(t)},t.exists=function(e){try{return void 0!==i(e,{}).file}catch(e){return!1}},t.remove=function(e){var t=i(e,{}),n=d[t.pkgName];n&&n.f[t.validPath]&&delete n.f[t.validPath]},t.main=function(e){return this.mainFile=e,t.import(e,{})},t.expose=function(t){var r=function(r){var i=t[r].alias,o=a(t[r].pkg);"*"===i?n(o,(function(t,n){return e[t]=n})):"object"==typeof i?n(i,(function(t,n){return e[n]=o[t]})):e[i]=o};for(var i in t)r(i)},t.dynamic=function(t,n,r){this.pkg(r&&r.pkg||"default",{},(function(r){r.file(t,(function(t,r,i,o,s){new Function("__fbx__dnm__","exports","require","module","__filename","__dirname","__root__",n)(!0,t,r,i,o,s,e)}))}))},t.flush=function(e){var t=d.default;for(var n in t.f)e&&!e(n)||delete t.f[n].locals},t.pkg=function(e,t,n){if(d[e])return n(d[e].s);var r=d[e]={};return r.f={},r.v=t,r.s={file:function(e,t){return r.f[e]={fn:t}}},n(r.s)},t.addPlugin=function(e){this.plugins.push(e)},t.packages=d,t.isBrowser=l,t.isServer=!l,t.plugins=[],t}();return l||(h.FuseBox=v),e.FuseBox=v}(this));