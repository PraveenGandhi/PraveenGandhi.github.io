!function(e){e.$fuse$=e,e.target="browser";e.pkg("default",{},(function(t){return t.file("main.js",(function(t,n,r,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n("./services/app-service");t.configure=async function(t){t.use.standardConfiguration().feature("resources/index"),e.import("process").env.devMode&&t.use.developmentLogging(),await t.start();const n=t.container.get(s.App);await n.authenticate(t)}})),t.file("services/app-service.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=t("./firebase");e.App=class{constructor(){this.dbRef=a.default.default.database().ref("learning"),this.loadingMessage="Logging In..!",this.viewName="",this.colors=["red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black"],this.state={type:"cards",theme:"",loggedInUser:"",data:[]}}loadWords(){return this.dbRef.once("value").then(e=>{let t=Object.entries(e.val()).map(e=>Object.assign(e[1],{key:e[0]}));this.state.data=t,this.state.data.forEach(e=>e.color=this.colors.filter(e=>"black"!==e)[this.randomIntFromInterval()]),localStorage.setItem("renshuu-app-state",JSON.stringify(this.state))})}saveWord(e,t){this.dbRef.child(e.name).set(e,t)}authenticate(e){let t=localStorage.getItem("renshuu-app-state")||"";t&&(this.state=JSON.parse(t)),this.onUserChange(t=>{if(t){let n=localStorage.getItem("renshuu-app-state")||"";n?(this.state=JSON.parse(n),this.state.loggedInUser=t.displayName):(this.state.loggedInUser=t.displayName,localStorage.setItem("renshuu-app-state",JSON.stringify(this.state))),e.setRoot("app")}else this.state.loggedInUser="",e.setRoot("app")})}login(){const e=new a.default.auth.GoogleAuthProvider;return a.default.auth().signInWithPopup(e)}loginWithCred(e,t){return a.default.auth().signInWithEmailAndPassword(e,t)}logout(){return a.default.auth().signOut()}onUserChange(e){a.default.auth().onAuthStateChanged(e)}randomIntFromInterval(e=0,t=this.colors.length-2){return Math.floor(Math.random()*(t-e+1)+e)}}})),t.file("services/firebase.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=t("firebase-app");t("firebase-auth"),t("firebase-firestore");const s={apiKey:"AIzaSyCcVDWLlTCY9J8hNJNAB8RatW0mkeNBeLM",authDomain:"nihongo-renshuu.firebaseapp.com",databaseURL:"https://nihongo-renshuu.firebaseio.com",projectId:"nihongo-renshuu",storageBucket:"nihongo-renshuu.appspot.com",messagingSenderId:"459783235634"};a.apps.length||a.initializeApp(s),e.default=a})),t.file("app.css",(function(e,t,n,r,i){t("fuse-box-css")("default/app.css","\r\n  .view {\r\n    -webkit-animation: fadeInRight 0.5s;\r\n    animation: fadeInRight 0.5s;\r\n    animation-timing-function: cubic-bezier(.07,.39,.29,.98);\r\n  }\r\n  /* =============Flexbox IE Fix============= */\r\n  _:-ms-fullscreen, :root [class*='equal width'].ui.grid > :not(.row).column, [class*='equal width'].ui.grid > .row > .column, .ui.grid > [class*='equal width'].row > .column {\r\n    -ms-flex: 1 !important;\r\n    -webkit-flex: 1 !important;\r\n    flex: 1 !important;\r\n   /* IE 10 */\r\n  }\r\n\r\n  .ui.cards>.card {\r\n    margin-bottom: 0px;\r\n  }")})),t.file("app.html",(function(e,t,n,r,i){n.exports.default='<template>\r\n  <require from="./app.css"></require>\r\n  <div class="ui basic ${app.state.theme} segment" style="min-height: 700px;">\r\n    <div class="ui fixed top ${app.state.theme} pointing menu">\r\n      <a class="${type===\'cards\' ? \'active\' : \'\'} item" click.trigger="type = \'cards\'"><i class="box icon"></i>カード</a>\r\n      <a class="${type===\'list\' ? \'active\' : \'\'} item" click.trigger="type = \'list\'"><i class="list icon"></i>一覧</a>\r\n      <a class="${type===\'add\' ? \'active\' : \'\'} item" click.trigger="type = \'add\'" if.bind="app.state.loggedInUser">\r\n        <i class="add icon"></i>新規登録\r\n      </a>\r\n      <a class="${type===\'add\' ? \'active\' : \'\'} item" target="_blank" href="http://praveengandhi.github.io/renshuu/"\r\n        if.bind="!app.state.loggedInUser">\r\n        <i class="add icon"></i>新規登録\r\n      </a>\r\n      <a class="item" click.trigger="toggleInvert()"><i class="exchange alternate icon"></i>Theme</a>\r\n      <div class="item">\r\n        <div class="ui icon input">\r\n          <input placeholder="検索" type="text" value.bind="search" id="search">\r\n          <i class="search link icon"></i>\r\n        </div>\r\n      </div>\r\n      <div class="item" if.bind="type===\'list\'">\r\n        <div class="ui toggle ${app.state.theme} checkbox">\r\n          <input type="checkbox" checked.bind="showKana">\r\n          <label>かな</label>\r\n        </div>\r\n        <div class="ui toggle ${app.state.theme} checkbox">\r\n          <input type="checkbox" checked.bind="showMeaning">\r\n          <label>意味</label>\r\n        </div>\r\n      </div>\r\n      <div class="right menu" if.bind="app.state.loggedInUser">\r\n        <div class="item">\r\n          <span>Hello ${app.state.loggedInUser}!</span>\r\n        </div>\r\n        <a class="item" click.trigger="logout()">\r\n          <i class="sign out alternate icon"></i> ログアウト\r\n        </a>\r\n      </div>\r\n    </div>\r\n    <div style="margin-top: 48px;">\r\n      <div class="view ui cards" if.bind="type===\'cards\'">\r\n        <div class="ui ${app.state.theme} card" repeat.for="card of app.state.data | filterOnProperty:search">\r\n          <div class="content">\r\n            <a href="https://jisho.org/search/${card.name}" target="_blank">\r\n              <span data-tooltip="${card.kana}" data-position="right center"\r\n              class="ui ${card.color} big text">${card.name}</span>\r\n            </a>\r\n            <div class="right floated meta" data-tooltip="${card.meaning}" data-position="left center">意味</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class="view" if.bind="type===\'list\'">\r\n        <table class="ui striped celled selectable ${app.state.theme} compact table">\r\n          <thead>\r\n            <th>言葉</th>\r\n            <th if.bind="showKana">かな</th>\r\n            <th if.bind="showMeaning">意味</th>\r\n          </thead>\r\n          <tbody>\r\n            <tr repeat.for="obj of app.state.data | filterOnProperty:search">\r\n              <td>${obj.name}</td>\r\n              <td if.bind=" showKana">${obj.kana}</td>\r\n              <td if.bind="showMeaning">${obj.meaning}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      <div class="view" if.bind="type===\'add\'">\r\n        <div class="ui ${app.state.theme} segment">\r\n          <form class="ui ${app.state.theme} form">\r\n            <div class="three fields">\r\n              <form-control name="name" value.bind="entity.name" label="Name" required="true"></form-control>\r\n              <form-control name="meaning" value.bind="entity.meaning" label="Meaning" required="true"></form-control>\r\n              <form-control name="kana" value.bind="entity.kana" label="Reading" required="true"></form-control>\r\n            </div>\r\n            <button type="button" class="ui submit fluid button green" click.trigger="submit()">\r\n              <i class="send icon"></i>Add</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>'})),t.file("app.js",(function(e,t,n,r,i){"use strict";var a=this&&this.__decorate||function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});const o=t("aurelia-framework"),l=t("./services/app-service");class c{constructor(e,t){this.aurelia=e,this.app=t,this.data=[],this.type="",this.type=this.app.state.type}activate(){this.app.loadWords()}toggleInvert(){this.setValue("theme",this.app.state.theme?"":"inverted")}typeChanged(e){this.setValue("type",e)}setValue(e,t){("type"!==e||t)&&(this.app.state[e]=t,localStorage.setItem("renshuu-app-state",JSON.stringify(this.app.state)))}submit(){this.app.saveWord(this.entity,()=>{console.log("data has been inserted"),console.log(this.entity),this.app.loadWords()})}logout(){this.app.logout().then(()=>{this.aurelia.setRoot("login")}).catch(e=>{throw new Error(e)})}}c.inject=[o.Aurelia,l.App],a([o.observable,s("design:type",Object)],c.prototype,"type",void 0),e.AppVM=c;e.FilterOnPropertyValueConverter=class{toView(e,t){return null==e||void 0===t?e:e.filter(e=>this.hasValue(e.name,t)||this.hasValue(e.meaning,t)||this.hasValue(e.kana,t))}hasValue(e,t){return e&&e.toLowerCase().indexOf(t.toLowerCase())>-1}}})),t.file("login.html",(function(e,t,n,r,i){n.exports.default='<template>\n  <style type="text/css">\n    #loginContent {\n      height: 100% !important;\n      -webkit-animation: fadeInRight 0.5s;\n      animation: fadeInRight 0.5s;\n      animation-timing-function: cubic-bezier(.07, .39, .29, .98);\n    }\n  </style>\n  <div class="ui middle aligned center aligned grid" id="loginContent">\n    <div class="column" style="max-width: 400px;">\n      <div class="ui segment">\n        <h1 class="ui teal header">練習アプリ</h1>\n        <a class="ui massive teal fluid button" click.delegate="googleLogin()">\n          <i class="google plus icon"></i> グーグルでログイン\n        </a>\n      </div>\n    </div>\n  </div>\n</template>'})),t.file("login.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=t("aurelia-framework"),s=t("./services/app-service");class o{constructor(e,t){this.aurelia=e,this.app=t}googleLogin(){this.app.login().then(()=>{this.aurelia.setRoot("shells/app")}).catch(console.log)}}e.Login=o,o.inject=[a.Aurelia,s.App]})),t.file("resources/elements/form-control.html",(function(e,t,n,r,i){n.exports.default='<template>\r\n  <div class="field">\r\n    <label for.bind="name">${label}</label>\r\n    <input type.bind="type" id.bind="name" placeholder.bind="label" value.bind="value" class="mini" if.bind="!required">\r\n\r\n    <div class="ui corner labeled input" if.bind="required">\r\n\t  <input type.bind="type" id.bind="name" placeholder.bind="label" value.bind="value" class="mini">\r\n\t  <div class="ui corner label">\r\n\t    <i class="asterisk icon red"></i>\r\n\t  </div>\r\n\t</div>\r\n  </div>\r\n</template>\r\n'})),t.file("resources/elements/form-control.js",(function(e,t,n,r,i){"use strict";var a=this&&this.__decorate||function(e,t,n,r){var i,a=arguments.length,s=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(i=e[o])&&(s=(a<3?i(s):a>3?i(t,n,s):i(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});const o=t("aurelia-framework");let l=class{};a([o.bindable,s("design:type",Object)],l.prototype,"name",void 0),a([o.bindable,s("design:type",Object)],l.prototype,"label",void 0),a([o.bindable,s("design:type",Object)],l.prototype,"required",void 0),l=a([o.customElement("form-control"),o.containerless(),o.bindable({name:"value",attribute:"value",defaultBindingMode:2,defaultValue:void 0}),o.bindable({name:"type",attribute:"type",defaultValue:"text"})],l),e.FormControl=l})),t.file("resources/index.js",(function(e,t,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.configure=function(e){e.globalResources(["./elements/form-control"])}})),t.entry="main.js"})),e.import("fuse-box-aurelia-loader"),e.import("aurelia-bootstrapper"),e.import("default/main.js"),e.main("default/main.js")}(function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0,i=arguments.length;r<i;r++)n=n.concat(arguments[r].split("/"));var a=[];for(r=0,i=n.length;r<i;r++){var s=n[r];s&&"."!==s&&(".."===s?a.pop():a.push(s))}return""===n[0]&&a.unshift(""),a.join("/")||(a.length?"/":".")}function n(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function r(e){return{server:require(e)}}function i(e,n){var i=n.path||"./",a=n.pkg||"default",s=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);if((d||58!==n)&&(t>=97&&t<=122||64===t)){if(64===t){var r=e.split("/"),i=r.splice(2,r.length).join("/");return[r[0]+"/"+r[1],i||void 0]}var a=e.indexOf("/");return-1===a?[e]:[e.substring(0,a),e.substring(a+1)]}}(e);if(s&&(i="./",a=s[0],n.v&&n.v[a]&&(a=a+"@"+n.v[a]),e=s[1]),e)if(126===e.charCodeAt(0))e=e.slice(2,e.length),i="./";else if(!d&&(47===e.charCodeAt(0)||58===e.charCodeAt(1)))return r(e);var o=f[a];if(!o){if(d&&"electron"!==g.target)throw"Package not found "+a;return r(a+(e?"/"+e:""))}var l,c=t(i,e=e||"./"+o.s.entry),u=function(e){var t=e.match(/\.(\w{1,})$/);return t&&t[1]?e:e+".js"}(c),p=o.f[u];return!p&&u.indexOf("*")>-1&&(l=u),p||l||(u=t(c,"/","index.js"),(p=o.f[u])||"."!==c||(u=o.s&&o.s.entry||"index.js",p=o.f[u]),p||(u=c+".js",p=o.f[u]),p||(p=o.f[c+".jsx"]),p||(u=c+"/index.jsx",p=o.f[u])),{file:p,wildcard:l,pkgName:a,versions:o.v,filePath:c,validPath:u}}function a(e,n,r){if(void 0===r&&(r={}),!d)return n(/\.(js|json)$/.test(e)?u.require(e):"");if(r&&r.ajaxed===e)return console.error(e,"does not provide a module");var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status){var r=i.getResponseHeader("Content-Type"),a=i.responseText;/json/.test(r)?a="module.exports = "+a:/javascript/.test(r)||(a="module.exports = "+JSON.stringify(a));var s=t("./",e);g.dynamic(s,a),n(g.import(e,{ajaxed:e}))}else console.error(e,"not found on request"),n(void 0)},i.open("GET",e,!0),i.send()}function s(e,t){var n=h[e];if(n)for(var r in n){if(!1===n[r].apply(null,t))return!1}}function o(e,t){if(void 0===t&&(t={}),58===e.charCodeAt(4)||58===e.charCodeAt(5))return function(e){if(d){var t,n=document,r=n.getElementsByTagName("head")[0];/\.css$/.test(e)?((t=n.createElement("link")).rel="stylesheet",t.type="text/css",t.href=e):((t=n.createElement("script")).type="text/javascript",t.src=e,t.async=!0),r.insertBefore(t,r.firstChild)}}(e);var n=i(e,t);if(n.server)return n.server;var r=n.file;if(n.wildcard){var l=new RegExp(n.wildcard.replace(/\*/g,"@").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&").replace(/@@/g,".*").replace(/@/g,"[a-z0-9$_-]+"),"i"),c=f[n.pkgName];if(c){var p={};for(var h in c.f)l.test(h)&&(p[h]=o(n.pkgName+"/"+h));return p}}if(!r){var m="function"==typeof t;if(!1===s("async",[e,t]))return;return a(e,(function(e){return m?t(e):null}),t)}var v=n.pkgName;if(r.locals&&r.locals.module)return r.locals.module.exports;var b=r.locals={},y=function(e){return e.substring(0,e.lastIndexOf("/"))||"./"}(n.validPath);b.exports={},b.module={exports:b.exports},b.require=function(e,t){var r=o(e,{pkg:v,path:y,v:n.versions});return g.sdep&&function(e){if(null!==e&&-1!==["function","object","array"].indexOf(typeof e)&&!e.hasOwnProperty("default"))Object.isFrozen(e)?e.default=e:Object.defineProperty(e,"default",{value:e,writable:!0,enumerable:!1})}(r),r},d||!u.require.main?b.require.main={filename:"./",paths:[]}:b.require.main=u.require.main;var x=[b.module.exports,b.require,b.module,n.validPath,y,v];return s("before-import",x),r.fn.apply(x[0],x),s("after-import",x),b.module.exports}if(e.FuseBox)return e.FuseBox;var l="undefined"!=typeof ServiceWorkerGlobalScope,c="undefined"!=typeof WorkerGlobalScope,d="undefined"!=typeof window&&void 0!==window.navigator||c||l,u=d?c||l?{}:window:global;d&&(u.global=c||l?{}:window),e=d&&"undefined"==typeof __fbx__dnm__?e:module.exports;var p=d?c||l?{}:window.__fsbx__=window.__fsbx__||{}:u.$fsbx=u.$fsbx||{};d||(u.require=require);var f=p.p=p.p||{},h=p.e=p.e||{},g=function(){function t(){}return t.global=function(e,t){return void 0===t?u[e]:void(u[e]=t)},t.import=function(e,t){return o(e,t)},t.on=function(e,t){h[e]=h[e]||[],h[e].push(t)},t.exists=function(e){try{return void 0!==i(e,{}).file}catch(e){return!1}},t.remove=function(e){var t=i(e,{}),n=f[t.pkgName];n&&n.f[t.validPath]&&delete n.f[t.validPath]},t.main=function(e){return this.mainFile=e,t.import(e,{})},t.expose=function(t){var r=function(r){var i=t[r].alias,a=o(t[r].pkg);"*"===i?n(a,(function(t,n){return e[t]=n})):"object"==typeof i?n(i,(function(t,n){return e[n]=a[t]})):e[i]=a};for(var i in t)r(i)},t.dynamic=function(t,n,r){this.pkg(r&&r.pkg||"default",{},(function(r){r.file(t,(function(t,r,i,a,s){new Function("__fbx__dnm__","exports","require","module","__filename","__dirname","__root__",n)(!0,t,r,i,a,s,e)}))}))},t.flush=function(e){var t=f.default;for(var n in t.f)e&&!e(n)||delete t.f[n].locals},t.pkg=function(e,t,n){if(f[e])return n(f[e].s);var r=f[e]={};return r.f={},r.v=t,r.s={file:function(e,t){return r.f[e]={fn:t}}},n(r.s)},t.addPlugin=function(e){this.plugins.push(e)},t.packages=f,t.isBrowser=d,t.isServer=!d,t.plugins=[],t}();return d||(u.FuseBox=g),e.FuseBox=g}(this));