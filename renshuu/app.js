!function(e){e.$fuse$=e,e.target="browser";e.pkg("default",{},(function(t){return t.file("main.js",(function(t,n,i,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n("./services/app-service");t.configure=async function(t){t.use.standardConfiguration().feature("resources/index"),e.import("process").env.devMode&&t.use.developmentLogging(),await t.start();const n=t.container.get(s.App);await n.authenticate(t)}})),t.file("services/app-service.js",(function(e,t,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=t("./firebase");e.App=class{constructor(){this.dbRef=a.default.default.database().ref("learning"),this.loadingMessage="Logging In..!",this.viewName="",this.colors=["red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black"],this.state={type:"cards",theme:"",primaryColor:"teal",data:[]}}loadWords(){return this.dbRef.once("value").then(e=>{let t=Object.entries(e.val()).map(e=>Object.assign(e[1],{key:e[0]}));this.state.data=t,this.state.data.forEach(e=>e.color=this.colors.filter(e=>"black"!==e)[this.randomIntFromInterval()]),localStorage.setItem("renshuu-app-state",JSON.stringify(this.state))})}saveWord(e,t){this.dbRef.child(e.name).set(e,t)}authenticate(e){let t=localStorage.getItem("renshuu-app-state")||"";t&&(this.state=JSON.parse(t)),this.onUserChange(t=>{if(t){let n=localStorage.getItem("renshuu-app-state")||"";n?(this.state=JSON.parse(n),this.state.loggedInUser=t.displayName):(this.state.loggedInUser=t.displayName,localStorage.setItem("renshuu-app-state",JSON.stringify(this.state))),e.setRoot("app")}else e.setRoot("login")})}login(){const e=new a.default.auth.GoogleAuthProvider;return a.default.auth().signInWithPopup(e)}loginWithCred(e,t){return a.default.auth().signInWithEmailAndPassword(e,t)}logout(){return a.default.auth().signOut()}onUserChange(e){a.default.auth().onAuthStateChanged(e)}randomIntFromInterval(e=0,t=this.colors.length-2){return Math.floor(Math.random()*(t-e+1)+e)}}})),t.file("services/firebase.js",(function(e,t,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=t("firebase-app");t("firebase-auth"),t("firebase-firestore");const s={apiKey:"AIzaSyCcVDWLlTCY9J8hNJNAB8RatW0mkeNBeLM",authDomain:"nihongo-renshuu.firebaseapp.com",databaseURL:"https://nihongo-renshuu.firebaseio.com",projectId:"nihongo-renshuu",storageBucket:"nihongo-renshuu.appspot.com",messagingSenderId:"459783235634"};a.apps.length||a.initializeApp(s),e.default=a})),t.file("app.css",(function(e,t,n,i,r){t("fuse-box-css")("default/app.css","\r\n  .view {\r\n    -webkit-animation: fadeInRight 0.5s;\r\n    animation: fadeInRight 0.5s;\r\n    animation-timing-function: cubic-bezier(.07,.39,.29,.98);\r\n  }\r\n  /* =============Flexbox IE Fix============= */\r\n  _:-ms-fullscreen, :root [class*='equal width'].ui.grid > :not(.row).column, [class*='equal width'].ui.grid > .row > .column, .ui.grid > [class*='equal width'].row > .column {\r\n    -ms-flex: 1 !important;\r\n    -webkit-flex: 1 !important;\r\n    flex: 1 !important;\r\n   /* IE 10 */\r\n  }\r\n\r\n  .ui.cards>.card {\r\n    margin-bottom: 0px;\r\n  }")})),t.file("app.html",(function(e,t,n,i,r){n.exports.default='<template>\r\n  <require from="./app.css"></require>\r\n  <div class="ui basic ${app.state.theme} segment" style="min-height: 700px;">\r\n    <div class="ui equal width left aligned padded grid ${app.state.theme} stackable">\r\n      <div class="row">\r\n        <div class="sixteen wide column">\r\n          <div class="ui fixed top ${app.state.theme} pointing menu">\r\n            <a class="${type===\'cards\' ? \'active\' : \'\'} item" click.trigger="type = \'cards\'"><i\r\n                class="box icon"></i>カード</a>\r\n            <a class="${type===\'list\' ? \'active\' : \'\'} item" click.trigger="type = \'list\'"><i\r\n                class="list icon"></i>一覧</a>\r\n            <a class="${type===\'add\' ? \'active\' : \'\'} item" click.trigger="type = \'add\'"><i\r\n              class="add icon"></i>新規登録</a>\r\n            <a class="item" click.trigger="toggleInvert()"><i class="exchange alternate icon"></i>Theme</a>\r\n            <div class="item">\r\n              <div class="ui icon input">\r\n                <input placeholder="検索" type="text" value.bind="search" id="search">\r\n                <i class="search link icon"></i>\r\n              </div>\r\n            </div>\r\n            <div class="item" if.bind="type===\'list\'">\r\n              <div class="ui toggle ${app.state.theme} checkbox">\r\n                <input type="checkbox" checked.bind="showKana">\r\n                <label>かな</label>\r\n              </div>\r\n              <div class="ui toggle ${app.state.theme} checkbox">\r\n                <input type="checkbox" checked.bind="showMeaning">\r\n                <label>意味</label>\r\n              </div>\r\n            </div>\r\n            <div class="right menu">\r\n              <div class="ui simple ${app.state.primaryColor} dropdown item">\r\n                <i class="user ${app.state.primaryColor} icon"></i>${app.state.loggedInUser}! <i\r\n                  class="dropdown ${app.state.primaryColor} icon"></i>\r\n                <div class="${app.state.primaryColor} menu">\r\n                  <a class="item" click.trigger="logout()"><i class="power off icon"></i><span t="app.logout"></span></a>\r\n                  \x3c!-- <a class="item" route-href="route: settings"><i class="cogs icon"></i><span t="app.settings"></span></a> --\x3e\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div style="margin-top: 48px;">\r\n          <div class="view ui cards" if.bind="type===\'cards\'">\r\n            <div class="ui ${app.state.theme} card" repeat.for="card of app.state.data | filterOnProperty:search">\r\n              <div class="content">\r\n                <span data-tooltip="${card.kana}" data-position="right center"\r\n                  class="ui ${card.color} big text">${card.name}</span>\r\n                <div class="right floated meta" data-tooltip="${card.meaning}" data-position="left center">意味</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class="view" if.bind="type===\'list\'">\r\n            <table class="ui striped celled selectable ${app.state.theme} compact table">\r\n              <thead>\r\n                <th>言葉</th>\r\n                <th if.bind="showKana">かな</th>\r\n                <th if.bind="showMeaning">意味</th>\r\n              </thead>\r\n              <tbody>\r\n                <tr repeat.for="obj of app.state.data | filterOnProperty:search">\r\n                  <td>${obj.name}</td>\r\n                  <td if.bind=" showKana">${obj.kana}</td>\r\n                  <td if.bind="showMeaning">${obj.meaning}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div class="view" if.bind="type===\'add\'">\r\n            <div class="ui ${app.state.theme} segment">\r\n              <form class="ui ${app.state.theme} form">\r\n                <div class="three fields">\r\n                  <form-control name="name" value.bind="entity.name" label="Name" required="true"></form-control>\r\n                  <form-control name="meaning" value.bind="entity.meaning" label="Meaning" required="true"></form-control>\r\n                  <form-control name="kana" value.bind="entity.kana" label="Reading" required="true"></form-control>\r\n                </div>\r\n                <button type="button" class="ui submit fluid button green" click.trigger="submit()">\r\n                  <i class="send icon"></i>Add</button>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>'})),t.file("app.js",(function(e,t,n,i,r){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var r,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,n,s):r(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});const o=t("aurelia-framework"),l=t("./services/app-service");class c{constructor(e,t){this.aurelia=e,this.app=t,this.data=[],this.type="",this.type=this.app.state.type}activate(){this.app.loadWords()}toggleInvert(){this.setValue("theme",this.app.state.theme?"":"inverted")}typeChanged(e){this.setValue("type",e)}setValue(e,t){("type"!==e||t)&&(this.app.state[e]=t,localStorage.setItem("renshuu-app-state",JSON.stringify(this.app.state)))}submit(){this.app.saveWord(this.entity,()=>{console.log("data has been inserted"),console.log(this.entity),this.app.loadWords()})}logout(){this.app.logout().then(()=>{this.aurelia.setRoot("login")}).catch(e=>{throw new Error(e)})}}c.inject=[o.Aurelia,l.App],a([o.observable,s("design:type",Object)],c.prototype,"type",void 0),e.AppVM=c;e.FilterOnPropertyValueConverter=class{toView(e,t){return null==e||void 0===t?e:e.filter(e=>this.hasValue(e.name,t)||this.hasValue(e.meaning,t)||this.hasValue(e.kana,t))}hasValue(e,t){return e&&e.toLowerCase().indexOf(t.toLowerCase())>-1}}})),t.file("login.html",(function(e,t,n,i,r){n.exports.default='<template>\n  <style type="text/css">\n    #loginContent {\n      height: 100% !important;\n      -webkit-animation: fadeInRight 0.5s;\n      animation: fadeInRight 0.5s;\n      animation-timing-function: cubic-bezier(.07, .39, .29, .98);\n    }\n  </style>\n  <div class="ui middle aligned center aligned grid animated" class="view" id="loginContent">\n    <div class="column" style="max-width: 400px;">\n      <div class="ui segment">\n        <h1 class="ui ${app.state.primaryColor} header">練習アプリ</h1>\n        <a class="ui massive button ${app.state.primaryColor} fluid" click.delegate="googleLogin()">\n          <i class="google plus icon"></i> グーグルでログイン\n        </a>\n      </div>\n    </div>\n  </div>\n</template>'})),t.file("login.js",(function(e,t,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const a=t("aurelia-framework"),s=t("./services/app-service");class o{constructor(e,t){this.aurelia=e,this.app=t}async canActivate(){return new Promise(e=>{this.app.onUserChange(t=>{t?this.aurelia.setRoot("app"):e()})})}googleLogin(){this.app.login().then(()=>{this.aurelia.setRoot("shells/app")}).catch(console.log)}loginWithCred(){return this.app.loginWithCred(this.email,this.password)}}e.Login=o,o.inject=[a.Aurelia,s.App]})),t.file("resources/elements/form-control.html",(function(e,t,n,i,r){n.exports.default='<template>\r\n  <div class="field">\r\n    <label for.bind="name">${label}</label>\r\n    <input type.bind="type" id.bind="name" placeholder.bind="label" value.bind="value" class="mini" if.bind="!required">\r\n\r\n    <div class="ui corner labeled input" if.bind="required">\r\n\t  <input type.bind="type" id.bind="name" placeholder.bind="label" value.bind="value" class="mini">\r\n\t  <div class="ui corner label">\r\n\t    <i class="asterisk icon red"></i>\r\n\t  </div>\r\n\t</div>\r\n  </div>\r\n</template>\r\n'})),t.file("resources/elements/form-control.js",(function(e,t,n,i,r){"use strict";var a=this&&this.__decorate||function(e,t,n,i){var r,a=arguments.length,s=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(s=(a<3?r(s):a>3?r(t,n,s):r(t,n))||s);return a>3&&s&&Object.defineProperty(t,n,s),s},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(e,"__esModule",{value:!0});const o=t("aurelia-framework");let l=class{};a([o.bindable,s("design:type",Object)],l.prototype,"name",void 0),a([o.bindable,s("design:type",Object)],l.prototype,"label",void 0),a([o.bindable,s("design:type",Object)],l.prototype,"required",void 0),l=a([o.customElement("form-control"),o.containerless(),o.bindable({name:"value",attribute:"value",defaultBindingMode:2,defaultValue:void 0}),o.bindable({name:"type",attribute:"type",defaultValue:"text"})],l),e.FormControl=l})),t.file("resources/index.js",(function(e,t,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.configure=function(e){e.globalResources(["./elements/form-control"])}})),t.entry="main.js"})),e.import("fuse-box-aurelia-loader"),e.import("aurelia-bootstrapper"),e.import("default/main.js"),e.main("default/main.js")}(function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],i=0,r=arguments.length;i<r;i++)n=n.concat(arguments[i].split("/"));var a=[];for(i=0,r=n.length;i<r;i++){var s=n[i];s&&"."!==s&&(".."===s?a.pop():a.push(s))}return""===n[0]&&a.unshift(""),a.join("/")||(a.length?"/":".")}function n(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function i(e){return{server:require(e)}}function r(e,n){var r=n.path||"./",a=n.pkg||"default",s=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1);if((d||58!==n)&&(t>=97&&t<=122||64===t)){if(64===t){var i=e.split("/"),r=i.splice(2,i.length).join("/");return[i[0]+"/"+i[1],r||void 0]}var a=e.indexOf("/");return-1===a?[e]:[e.substring(0,a),e.substring(a+1)]}}(e);if(s&&(r="./",a=s[0],n.v&&n.v[a]&&(a=a+"@"+n.v[a]),e=s[1]),e)if(126===e.charCodeAt(0))e=e.slice(2,e.length),r="./";else if(!d&&(47===e.charCodeAt(0)||58===e.charCodeAt(1)))return i(e);var o=f[a];if(!o){if(d&&"electron"!==m.target)throw"Package not found "+a;return i(a+(e?"/"+e:""))}var l,c=t(r,e=e||"./"+o.s.entry),u=function(e){var t=e.match(/\.(\w{1,})$/);return t&&t[1]?e:e+".js"}(c),p=o.f[u];return!p&&u.indexOf("*")>-1&&(l=u),p||l||(u=t(c,"/","index.js"),(p=o.f[u])||"."!==c||(u=o.s&&o.s.entry||"index.js",p=o.f[u]),p||(u=c+".js",p=o.f[u]),p||(p=o.f[c+".jsx"]),p||(u=c+"/index.jsx",p=o.f[u])),{file:p,wildcard:l,pkgName:a,versions:o.v,filePath:c,validPath:u}}function a(e,n,i){if(void 0===i&&(i={}),!d)return n(/\.(js|json)$/.test(e)?u.require(e):"");if(i&&i.ajaxed===e)return console.error(e,"does not provide a module");var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState)if(200==r.status){var i=r.getResponseHeader("Content-Type"),a=r.responseText;/json/.test(i)?a="module.exports = "+a:/javascript/.test(i)||(a="module.exports = "+JSON.stringify(a));var s=t("./",e);m.dynamic(s,a),n(m.import(e,{ajaxed:e}))}else console.error(e,"not found on request"),n(void 0)},r.open("GET",e,!0),r.send()}function s(e,t){var n=h[e];if(n)for(var i in n){if(!1===n[i].apply(null,t))return!1}}function o(e,t){if(void 0===t&&(t={}),58===e.charCodeAt(4)||58===e.charCodeAt(5))return function(e){if(d){var t,n=document,i=n.getElementsByTagName("head")[0];/\.css$/.test(e)?((t=n.createElement("link")).rel="stylesheet",t.type="text/css",t.href=e):((t=n.createElement("script")).type="text/javascript",t.src=e,t.async=!0),i.insertBefore(t,i.firstChild)}}(e);var n=r(e,t);if(n.server)return n.server;var i=n.file;if(n.wildcard){var l=new RegExp(n.wildcard.replace(/\*/g,"@").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&").replace(/@@/g,".*").replace(/@/g,"[a-z0-9$_-]+"),"i"),c=f[n.pkgName];if(c){var p={};for(var h in c.f)l.test(h)&&(p[h]=o(n.pkgName+"/"+h));return p}}if(!i){var g="function"==typeof t;if(!1===s("async",[e,t]))return;return a(e,(function(e){return g?t(e):null}),t)}var v=n.pkgName;if(i.locals&&i.locals.module)return i.locals.module.exports;var b=i.locals={},y=function(e){return e.substring(0,e.lastIndexOf("/"))||"./"}(n.validPath);b.exports={},b.module={exports:b.exports},b.require=function(e,t){var i=o(e,{pkg:v,path:y,v:n.versions});return m.sdep&&function(e){if(null!==e&&-1!==["function","object","array"].indexOf(typeof e)&&!e.hasOwnProperty("default"))Object.isFrozen(e)?e.default=e:Object.defineProperty(e,"default",{value:e,writable:!0,enumerable:!1})}(i),i},d||!u.require.main?b.require.main={filename:"./",paths:[]}:b.require.main=u.require.main;var w=[b.module.exports,b.require,b.module,n.validPath,y,v];return s("before-import",w),i.fn.apply(w[0],w),s("after-import",w),b.module.exports}if(e.FuseBox)return e.FuseBox;var l="undefined"!=typeof ServiceWorkerGlobalScope,c="undefined"!=typeof WorkerGlobalScope,d="undefined"!=typeof window&&void 0!==window.navigator||c||l,u=d?c||l?{}:window:global;d&&(u.global=c||l?{}:window),e=d&&"undefined"==typeof __fbx__dnm__?e:module.exports;var p=d?c||l?{}:window.__fsbx__=window.__fsbx__||{}:u.$fsbx=u.$fsbx||{};d||(u.require=require);var f=p.p=p.p||{},h=p.e=p.e||{},m=function(){function t(){}return t.global=function(e,t){return void 0===t?u[e]:void(u[e]=t)},t.import=function(e,t){return o(e,t)},t.on=function(e,t){h[e]=h[e]||[],h[e].push(t)},t.exists=function(e){try{return void 0!==r(e,{}).file}catch(e){return!1}},t.remove=function(e){var t=r(e,{}),n=f[t.pkgName];n&&n.f[t.validPath]&&delete n.f[t.validPath]},t.main=function(e){return this.mainFile=e,t.import(e,{})},t.expose=function(t){var i=function(i){var r=t[i].alias,a=o(t[i].pkg);"*"===r?n(a,(function(t,n){return e[t]=n})):"object"==typeof r?n(r,(function(t,n){return e[n]=a[t]})):e[r]=a};for(var r in t)i(r)},t.dynamic=function(t,n,i){this.pkg(i&&i.pkg||"default",{},(function(i){i.file(t,(function(t,i,r,a,s){new Function("__fbx__dnm__","exports","require","module","__filename","__dirname","__root__",n)(!0,t,i,r,a,s,e)}))}))},t.flush=function(e){var t=f.default;for(var n in t.f)e&&!e(n)||delete t.f[n].locals},t.pkg=function(e,t,n){if(f[e])return n(f[e].s);var i=f[e]={};return i.f={},i.v=t,i.s={file:function(e,t){return i.f[e]={fn:t}}},n(i.s)},t.addPlugin=function(e){this.plugins.push(e)},t.packages=f,t.isBrowser=d,t.isServer=!d,t.plugins=[],t}();return d||(u.FuseBox=m),e.FuseBox=m}(this));